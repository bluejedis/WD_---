

# 1.1.5 答案与解析  

# 一、单项选择题  

01. C
- 操作系统管理计算机资源
  - 包括硬件和软件资源
  - 文件虽不属于硬件资源,但属于计算机资源

02.D
- 源程序不属于操作系统管理内容
  - 是用程序设计语言编写的程序
  - 经编译/解释后形成可执行文件
  - 直接面向程序员用户
- 操作系统对文件的管理
  - 关注文件的逻辑结构、物理结构
  - 关注文件内部结构
  - 关注多文件组织方式
  - 不关心文件具体内容

03.D
- 操作系统的主要功能
  - 管理计算机软/硬件资源
  - 扩充裸机提供更强大功能
  - 充当用户与硬件交互中介
  - 不包含高级语言编译器

04.D
- 操作系统的定义
  - 控制和管理计算机系统资源
  - 组织调度计算机工作
  - 分配系统资源
  - 为用户和其他软件提供接口与环境
  - A、B、C项都是应用程序功能

05.B
- 操作系统最基本特征
  - 并发和共享
  - 两者互为存在条件

06.C
- 并发与并行的区别
  - 并发:同一时间间隔内发生
  - 并行:同一时刻发生

07.B
- 操作系统提供的接口类型
  - 命令接口
  - 程序接口(系统调用)
  - 图形接口(通过系统调用实现)

08.B
- 系统调用
  - 操作系统为应用程序使用内核功能提供的接口

09.C
- 程序接口(系统调用)
  - 操作系统为编程人员提供的接口

10.A
- 用户程序使用资源方式
  - 不能直接操作硬件资源
  - 必须通过系统调用请求服务
  - 间接使用各种资源

11.A
- 操作系统接口关系
  - 程序接口、图形接口、命令接口无从属关系
  - 命令接口分类
    - 联机用户接口
    - 脱机用户接口

12.D
- 操作系统的特点
  - 管理资源的程序
  - 管理用户程序执行
  - 提高资源利用率
  - 不能直接用来编程

13.D
- 系统并行性分析
  - 单CPU系统进程间不能并行
  - 处理器与通道可以并行
  - 处理器与设备可以并行
  - 设备与设备可以并行

14.A
- 操作系统接口与库函数
  - 主要接口
    - 命令接口
    - 程序接口(系统调用)
  - 库函数特点
    - 与系统调用对应
    - 隐藏访管指令细节
    - 属于用户程序
    - 是系统调用的上层
# 二、综合应用题  

01.【解答】
- 库函数与系统调用的区别
  - 所属层次不同
    - 库函数是语言或应用程序的一部分
    - 系统调用是操作系统的一部分
  - 运行空间不同  
    - 库函数运行在用户空间
    - 系统调用运行在内核空间
  - 实现关系
    - 许多库函数通过系统调用实现功能
  - 执行效率
    - 未使用系统调用的库函数效率更高
    - 系统调用需要上下文切换和状态转换(用户态转核心态)


# 1.2.8 答案与解析  

# 一、单项选择题  

01.D
- 提高系统资源利用率的技术
  - 脱机技术
    - 在主机以外设备进行I/O操作
    - 需要时再送主机处理
    - 提高设备利用率
  - 多道程序设计技术
    - 同时在主存运行多个程序
    - 一个程序等待时可执行其他程序
    - 提高系统资源利用率
  - 其他技术
    - 虚拟技术和交换技术以多道程序设计为前提

02.D
- 批处理系统特点
  - 用户无法直接干预程序运行
  - 只能通过作业控制说明书间接干预
  - 缺少交互能力
  - 促使分时操作系统出现

03.C
- 多道程序运行环境特点
  - 比单道程序更复杂
  - 程序执行失去封闭性和顺序性
  - 程序间存在资源竞争和相互制约
  - 考虑竞争公平性,程序执行呈断续性

04.B
- 操作系统基本类型
  - 批处理操作系统
  - 分时操作系统
  - 实时操作系统

05.B
- 实时系统要求
  - 实时处理外部事件
  - 在规定时间内完成处理

06.B
- 实时操作系统目标
  - 主要目标
    - 实时性(快速处理和及时响应)
    - 可靠性(安全可靠)
  - 次要目标
    - 资源利用率非主要考虑

07.D
- 实时操作系统应用场景
  - 需要立即响应外界输入的场合
  - 具体应用
    - 航空订票系统(实时处理票务)
    - 机床控制(实时控制)
    - 股票交易(实时交易)
08.A

- 分时系统特点
  - 主要用于交互式作业而非批处理作业
  - CPU分配策略
    - 每个任务依次轮流使用时间片
    - 采用公平的分配方式
  - 响应性能
    - 响应时间好
    - 采用时间片轮转法调度进程
    - 每个任务在较短时间内得到响应
    - 提高用户满意度
  - 多用户支持
    - 支持多个终端同时连接到同一台计算机

09.C

- 系统响应时间改善方案
  - 采用优先级+非抢占式调度算法
    - 重要作业/进程通过高优先级获得快速响应
    - 次要作业/进程通过非抢占式调度保证响应
  - 不相关因素
    - 加大时间片会延迟响应时间
    - 静态页式管理与响应时间无关
    - 代码可重入与响应时间无关

10.B

- 分时系统出现原因
  - 要求快速响应用户是主要原因

11.C

- 分时系统响应时间特点
  - 时间片固定时
    - 用户数越多,每用户分配时间片越少
    - 响应时间相应变长
  - 响应时间计算公式
    - $T\approx Q N$
    - $Q$为时间片
    - $N$为用户数

12.B

- 时间片计算
  - 响应时间要求不超过2s
  - 最大时间片计算
    - $2\mathrm{s}/100=20\mathrm{ms}$

13.B、A、C、D

- 操作系统发展过程中的主要类型

14.B

- 进程执行特点
  - 多进程并发执行
    - 宏观上多进程同时运行
    - 单处理器系统中每时刻只能一道程序执行
    - 微观上分时交替执行
  - 多处理器系统
    - 可实现真正的并行执行
    - 每个处理器运行不同进程

15.B

- 操作系统时间要求特点
  - 实时操作系统
    - 要求在规定时间内完成特定功能
  - 批处理操作系统
    - 不需要在响应时间内处理任务
  - 分时操作系统
    - 不要求在周转时间或调度时间内处理外部事件

16.C

- 多道程序技术要求
  - 进程间实现并发
  - 实现进程调度保证CPU工作效率
  - 并发性实现需要中断功能支持

17.A

- 批处理系统特点
  - 用户干预
    - 执行时无法直接干预
    - 只能通过作业控制说明书间接干预
    - 缺少交互能力
  - 系统分类
    - 单道批处理系统
    - 多道批处理系统
  - 多道程序设计技术
    - 多个程序同时装入内存
    - CPU中交替运行
    - 共享硬/软件资源
    - I/O设备可与CPU并行工作
    - 通过中断技术实现

18.D

- 多道程序系统特点
  - 优点
    - 提高CPU利用率
    - 提高系统吞吐量
    - 提高I/O设备利用率
  - 缺点
    - 需要额外开销组织和切换作业

19.C

- 现代操作系统特点
  - 多任务支持
    - 程序可分为多个任务并发执行
    - 单CPU环境
      - 宏观并行执行
      - 微观分时交替执行
    - 多CPU环境
      - 真正并行执行
  - 中断机制
    - CPU与外设并行工作
  - 资源访问
    - 多任务互斥访问共享资源
    - 需要对共享资源进行保护
  - 硬件要求
    - 不一定需要多CPU
    - 单CPU通过分时使用可满足要求

20.D

- 操作系统基本特点
  - 基本特性
    - 并发和共享为最基本特性
    - 必须实现并发和共享
  - 多道批处理系统
    - 可不支持虚拟存储管理
    - 通过调入所有进程数据实现并发
  - CPU利用率
    - 进程数量与利用率无必然关系
    - 过多进程可能导致资源竞争
    - 可能出现死锁降低利用率

# 二、综合应用题  

01.【解答】

- CPU利用率计算
  - 单道环境
    - CPU运行时间为 $(10+5+10)\mathrm{s}+(10+5)\mathrm{s}=40\mathrm{s}$
    - 两程序总运行时间为 $40s+40s=80s$
    - 利用率为 $40/80=50\%$

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/8422e8cf2c4eba761221be8858bbfba52afcd890b16174e8f606d61ede1be6eb.jpg)

  - 多道环境 
    - CPU运行时间为40s
    - 两程序总运行时间为45s
    - 利用率为 $40/45=88.9\%$

> attention

- 甘特图说明
  - 定义：又称横道图,以图示方式表示项目活动顺序与持续时间
  - 画法步骤
    - $\textcircled{\scriptsize{1}}$ 横坐标标时间间隔,纵坐标标程序名
    - $\textcircled{2}$ 过时间点作垂直虚线
    - $\textcircled{3}$ 用不同线型表示资源占用
  - 注意事项
    - 处理器、打印设备等资源不能同时使用
    - 一个程序使用时其他程序需排队

02.【解答】

- CPU和I/O设备调度分析
  - 进程运行情况如图所示

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/6cc4455588a9d632f71209c9868bc3db90afcf5bd01225a1896eed72644c94de.jpg)

  - CPU利用率
    - 空闲时间段: $100{\sim}150\mathrm{ms}$
    - 利用率: $250/300=83.3\%$
  - 进程等待分析
    - 进程A: 无等待现象
    - 进程B: 有等待现象
      - 等待时间段1: $0{\sim}50\mathrm{ms}$
      - 等待时间段2: $180{\sim}200\mathrm{ms}$

# 1.3.5 答案与解析  

# 一、单项选择题  

01.B
- 工错误
  - 通用操作系统使用时间片轮转调度算法，用户运行程序并不需要预先预订运行时间
- Ⅱ正确
  - 操作系统执行程序时，必须从起始地址开始执行
- Ⅲ错误
  - 编译器是操作系统的上层软件，不是操作系统需要提供的功能
- IV正确
  - 操作系统是计算机资源的管理者，管理计算机系统资源是操作系统关心的主要问题

02.C
- 批处理系统特点
  - Ⅰ错误
    - 批处理的主要缺点是缺少交互性
  - Ⅱ正确
    - 输入/输出指令属于特权指令，只能由操作系统使用，必须在核心态下执行
  - Ⅲ错误
    - 多道性是为了提高系统利用率和吞吐量而提出的
  - IV正确
    - I/O通道是特殊处理器，具有执行I/O指令能力，通过执行通道程序控制I/O操作

03.C
- 系统调用特点
  - I正确
    - 需要触发陷入指令(如x86的int 0x80或sysenter)
  - Ⅱ错误
    - 程序设计无法形成屏蔽中断指令
  - Ⅲ正确
    - 用户程序通过系统调用进行进程控制
  - IV正确
    - 执行时CPU从用户态转内核态，返回时转回用户态

04.C
- 中断是操作系统必须提供的功能
  - 计算机错误需要中断处理
  - 核心态与用户态切换需要中断处理

05.D
- 特权指令与非法指令
  - 特权指令
    - 只能在核心态运行的指令
    - 如I/O指令、关中断指令
  - 非法指令
    - CPU无法识别或执行的指令
    - 如不存在的操作码

06.D
- 指令执行权限
  - 内核可执行所有指令
  - 用户程序只能执行非特权指令

07.C
- 中断处理状态转换
  - 用户程序被中断时从用户态转管态
  - 低级中断被中断时保持管态
  - 中断处理程序必定是OS程序

08.A
- 用户态到核心态转换
  - 通过硬件中断机制完成
  - 发生中断时由硬件置为核心态

09.C
- 特权指令分类
  - 特权指令
    - 屏蔽中断指令
    - 设置时钟指令
    - 停机指令
  - 非特权指令
    - 修改内存单元值

10.B
- 操作系统内核内容
  - 时钟管理
  - 中断机制
  - 原语
  - 系统控制的数据结构及处理

> attention 
操作系统通过系统调用为应用程序提供接口，使其能调用内核函数完成所需处理

11.A
- 程序执行状态
  - 用户态执行
    - 命令解释程序
  - 内核态执行
    - 磁盘调度程序
    - 中断处理程序
    - 进程调度程序

12.A
- "访管"指令特点
  - 仅在用户态使用
  - 执行后转为核心态

13.C
- 操作系统代码运行状态为核心态

14.C
- 系统调用执行状态
  - 调用可在用户态
  - 执行必在核心态

15.D
- 指令执行状态
  - 核心态执行
    - 输入/输出指令(特权指令)
  - 用户态可执行
    - A、B、C项(可用汇编实现)

16.D
- 访管指令特性
  - 用户态下使用
  - 是"自愿进管"手段
  - 不能执行特权指令

17.B
- 特权指令定义：仅能由操作系统使用的指令

18.A
- 中断类型
  - 外部中断
    - CPU外部事件引起
    - 如I/O设备请求、时钟信号
  - 内部中断(异常)
    - CPU内部事件引起
    - 如访管指令、缺页异常

19.C
- 库函数与系统调用对比
  - 运行状态
    - 库函数运行在用户态
    - 系统调用运行在内核态
  - 调试难度
    - 库函数易调试
    - 系统调用难调试
  - 替换性
    - 库函数可替换
    - 系统调用通常不可替换
  - 开销
    - 库函数开销小
    - 系统调用需切换上下文，开销大
20.B
- 系统调用与一般过程调用的区别
  - 保存内容不同
    - 系统调用需保存PSW和PC
    - 一般过程调用只需保存PC
  - 运行状态不同
    - 系统调用必须在内核态运行
    - 一般过程调用可在同一状态运行

21.A
- 文件I/O操作
  - 需要通过系统调用提供服务
  - 必须在内核态运行

22.A
- 不同程序的执行状态
  - 核心态执行
    - 缺页处理
    - 时钟中断
    - 进程调度
  - 用户态执行
    - 命令解释程序

23.C
- 用户态发生事件分析
  - 可在用户态发生
    - 系统调用
    - 外部中断
    - 缺页中断
  - 只能在核心态发生
    - 进程切换

24.B
- 中断与子程序调用的PSW处理
  - 中断处理
    - 需要保存PSW
    - 返回后可能需要原PSW内容
  - 子程序调用
    - PSW可能改变
    - 返回后不需要原PSW内容

25.B
- 系统执行状态要求
  - 内核态执行
    - 整数除零操作
    - read系统调用
  - 用户态执行
    - sin函数调用

26.D
- 指令执行权限
  - 用户态可执行
    - trap指令
    - 跳转指令
    - 压栈指令
  - 核心态执行
    - 关中断指令

27.B
- 外部中断处理保存机制
  - 中断隐指令自动保存
    - PC值
  - 操作系统保存
    - 通用寄存器内容
  - 硬件机构保存
    - 块表(TLB)
    - Cache内容

28.C
- 指令异常分析
  - 可能出现异常
    - 指令A：除零异常
    - 指令B：软中断
    - 指令D：缺页异常
  - 不会发生异常
    - 指令C

29.A
- 中断与异常的区别
  - 中断
    - 来自CPU外部事件
    - 如I/O设备请求、时钟信号
  - 异常
    - 源自CPU内部事件
    - 也称内中断

30.C
- 系统调用执行过程
  - 传递系统调用参数
  - 通过trap指令转换状态
  - 执行内核态服务程序
  - 返回用户态

31.D
- 时钟中断主要工作
  - 处理时间相关信息
    - 系统时间
    - 进程时间片
    - 延时
    - CPU使用时间
    - 各种定时器
  - 决定是否执行调度程序

32.C
- 系统调用特性
  - 正确特性
    - 用户态调用但内核态执行
    - 设备管理需通过系统调用
    - 是用户程序调用系统子功能
  - 错误特性
    - 不同操作系统接口相同

33.D
- 中断处理流程
  - 硬件自动保存
    - 程序计数器(PC)
    - 程序状态字寄存器(PSW)
  - 中断服务程序执行
    - 保存中断屏蔽字
    - 保存通用寄存器值
    - 提供中断服务

34.B
- 特权指令类型
  - I/O设备操作指令
  - 访问程序状态指令
  - 存取特殊寄存器指令
  - 其他特权指令

35.C
- 系统调用应用场景
  - 需要系统调用
    - 创建新进程
  - 不需要系统调用
    - 页面调度
    - 进程调度
    - 生成随机数

36.C
- CPU执行权限
  - 用户态
    - 只能执行非特权指令
  - 内核态
    - 可执行特权指令
    - 可执行非特权指令

37.B
- 系统调用过程分工
  - 硬件完成
    - 保存断点
    - 保存程序状态字
  - 操作系统完成
    - 保存通用寄存器
    - 执行系统调用服务

38.A
- 中断向量表特点
  - 存储内容
    - 中断处理程序入口地址
  - 访问效率
    - 采用数组结构
    - 时间复杂度 $O(1)$

# 1.6.3 答案与解析  

# 一、单项选择题  

01.A
- 分层式结构特点
  - 系统设计和实现简化
    - 每层只能调用紧邻低层的功能和服务
  - 调试和验证便利性
    - 错误定位容易
    - 低层已经过调试验证

02.C
- 分层式OS特征
  - 优点
    - 单向依赖特性
    - 易于扩充和维护
      - 模块/整层替换不影响其他层(接口不变)
  - 缺点
    - 灵活性不足
      - 层次定义后依赖关系固定
    - 系统效率降低
      - 功能执行需要穿越多层
      - 额外开销增加

03.C
- 层次结构特点
  - 访问限制
    - 只能访问相邻层次
    - 不能跨层访问
  - 主要不足
    - 层次划分和设计复杂
    - 接口一致性和完备性难以保证
  - 其他特性
    - 可提高效率和可靠性
    - 模块数量不受限制

04.B
- 模块化操作系统特点
  - 功能模块位置
    - 全部在内核中
  - 模块间关系
    - 相互调用
    - 相互依赖
  - 可靠性问题
    - 单模块错误可能导致整个内核崩溃
  - 微内核系统对比
    - 内核外模块错误不影响整体系统
    - 可靠性较高
05.C
- 微内核和宏内核对比
  - 主要缺点是性能问题
  - 需要频繁在核心态和用户态切换
  - 切换开销偏大

06.B
- 微内核OS的四个特点
  - 内核足够小
  - 基于客户/服务器模式
  - 应用"机制与策略分离"原理
  - 采用面向对象技术

07.C
- 微内核功能组成
  - 内核必需功能
    - 进程(线程)间通信
    - 低级I/O
    - 低级进程管理和调度
    - 中断和陷入处理
  - 非内核功能
    - 文件系统服务

08.C
- 微内核结构特点
  - 缺点
    - 频繁切换管态和用户态
    - 操作系统执行开销大
  - 优点
    - 服务程序执行相互独立
    - 通过微内核通信

09.C
- Windows系统架构
  - 融合宏内核和微内核
  - 微内核优点
    - 提高系统并发性和可扩展性
    - 方便进程间通信和同步
    - 支持分布式系统开发

10.B
- 微内核性能开销
  - 上下文切换
  - 消息传递
  - 数据拷贝

11.C
- 外核操作系统特点
  - 外核职责
    - 硬件资源分配
    - 资源回收
    - 资源保护
  - 进程管理由内核负责

12.C
- 内存常驻
  - 仅操作系统内核常驻
  - 其他部分按需调入

13.C
- BIOS组成
  - 系统设置程序
  - 基本输入/输出程序
  - 开机自检程序
  - 系统启动自举程序

14.D
- 引导程序类型
  - ROM中的自举程序(BIOS组成部分)
    - 用于启动具体设备
  - 硬盘活动分区引导扇区中的引导程序
    - 用于引导操作系统

15.C
- 系统启动流程
  - CPU从FFFF0H获取首条指令
  - BIOS执行流程
    - 构建中断向量表和服务程序
    - 进行POST自检
    - 搜寻操作系统内核位置

16.A
- 系统引导过程
  - BIOS将控制权交给启动设备
  - CPU加载MBR到内存
  - MBR检查分区表找活动分区
  - 加载PBR到内存执行

17.A
- 虚拟机特点
  - 软件功能可由硬件实现
  - 多台虚拟机并发类似多程序运行

18.B
- VMware Workstation特点
  - 属于第二类虚拟机管理程序
  - 模拟真实硬件环境
  - 可安装多个操作系统
  - 虚拟机文件存储在主机磁盘

19.B
- 虚拟机管理程序(VMM)对比
  - 第一类VMM
    - 直接运行在硬件上
    - 效率更高
    - 运行在内核态
  - 第二类VMM
    - 运行在宿主操作系统上
    - 运行在用户态

20.D
- 系统启动内存加载
  - 操作系统程序加载到RAM系统区

21.A
- 操作系统初始化过程
  - 创建中断向量表实现POST
  - 硬盘分区和格式化流程
    - 创建分区表
    - 逻辑格式化创建文件系统
    - 创建根目录
    - UNIX系统创建索引节点表

22.D
- 微内核架构特点
  - 可靠性和安全性
    - 基本功能在内核
    - 模块错误影响隔离
  - 可扩展性
    - 非核心功能在用户空间
    - 支持插件扩展
  - 性能影响
    - 频繁切换状态
    - 执行开销大


# 4.1.9 答案与解析  

# 一、单项选择题  

01.D
- UNIX操作系统设备访问特点
  - 所有设备视为特殊文件
  - 控制和访问方式与普通文件相同

02.A
- 文件控制块(FCB)特点
  - 一个文件对应一个FCB
  - 文件目录项即FCB

03.A
- 打开文件操作特点
  - FCB存入内存活跃文件目录表
  - 不复制文件内容到主存
  - 找到文件目录是前置操作

04.B
- open系统调用特征
  - 参数包含文件路径名
  - 在进程用户打开文件表增加表目
  - 返回文件描述符
  - 系统打开文件表特点
    - 文件首次打开才增加表目
    - 通过I/O读入索引节点
  - 硬链接文件打开时指向相同文件实体

05.B
- 关闭文件操作特点
  - 控制信息写回磁盘
  - 不包含文件数据写回

06.B
- 读文件操作顺序
  - 查找打开文件表中目录项
  - 检查访问合法性
  - 逻辑记录号转物理块号
  - 发出I/O请求完成数据交换

07.D
- 目录文件内容
  - FCB的集合
  - 包含子目录和数据文件信息

08.A
- 访问计数值特点
  - 内存索引节点特有内容
  - 进程访问时加1
  - 访问结束时减1

09.C
- 文件目录项(FCB)组成
  - 文件基本信息
  - 存取控制信息
  - 使用信息
  - 不包含FCB物理位置

10.C
- 索引节点方法优点
  - 目录项与描述信息分离
  - 减少I/O信息量
  - 盘块可存放更多目录项

11.A
- 文件保护针对访问权限

12.D
- 文件保护方法
  - 口令
  - 存取控制
  - 用户权限表

13.A
- 用户访问控制区分
  - 访问权限:是否可访问
  - 用户优先级:访问顺序
- FCB包含文件访问控制信息

14.A
- 系统级安全管理
  - 注册
  - 登录

15.D
- I/O性能优化方法
  - 异步I/O提高CPU利用率
  - 目录项分解减少读盘次数
  - 文件高速缓存减少I/O次数
  - 磁盘调度减少寻道时间

16.D
- 文件分类
  - 逻辑文件
    - 无结构文件
    - 有结构文件
  - 物理文件
    - 连续文件
    - 链接文件
  - 系统文件

17.D
- 文件结构设计
  - 逻辑结构由用户需求决定
  - 物理结构由系统设计者决定
    - 基于硬件特性
    - 采用合适策略

18.B
- 索引文件特点
  - 包含逻辑文件和索引表
  - 需先查找索引表
  - 索引项内容
    - 记录长度
    - 起始位置
  - 每条记录对应索引项

19.C
- 索引顺序文件查找分析
  - 最佳分组: $\sqrt{10000}=100$ 组
  - 每组100条记录
  - 查找次数
    - 组间查找: $100/2=50$ 次
    - 组内查找: $100/2=50$ 次
    - 总次数: $50+50=100$ 次

20.A
- 磁带存储特性
  - 顺序存储设备
  - 只能采用顺序存储结构
  - 若允许倒带可组织其他形式

21.B
- 文件分配方式特点
  - 连续分配支持随机存取
  - 索引分配支持随机存取
  - 链接分配不支持随机存取

22.A
- 连续分配限制
  - 需要连续存储空间
  - 必须预知文件大小
  - 文件动态增长问题
    - 空间利用率低
    - 存储空间闲置

23.B
- 连续分配目录项记录
  - 文件第一条记录盘块号
  - 文件长度(盘块数)

24.B
- 顺序文件特点
  - 占用连续磁盘空间
  - 易产生外部碎片

25.A
- 两级索引容量计算
  - 每块索引项数: $1\mathrm{KB}/4\mathrm{B} = 256$
  - 最大文件长度: $256 \times 256 \times 1\mathrm{KB} = 64\mathrm{MB}$

26.D
- 文件结构设计
  - 逻辑结构由用户确定
  - 物理结构由系统设计者确定
    - 基于存储器特性
    - 由操作系统管理

27.C
- 文件管理数据结构
  - 打开文件表
    - 仅存放已打开文件信息
    - 属性从外存复制到内存
  - 索引表记录文件盘块地址

28.B
- 链接分配特点
  - 通过链接指针连接盘块
  - 物理块不需连续排列

29.B
- 文件组织形式影响因素
  - 与存储介质特性相关
  - 与逻辑结构无必然关系
  - 与内存管理无关
  - 与设备分配无必然关系

30.A
- 文件分配方式I/O开销比较
  - 连续分配I/O次数最多
    - 中间插入需移动后续盘块
  - 其他方式仅需修改指针/索引

31.D
- 记录访问计算
  - 记录成组分解
    - 逻辑记录100B
    - 盘块512B
    - 每块存5条记录
  - 第22个记录访问
    - 位于第5个物理块
    - 需5次读取+1次写回
    - 共6次磁盘启动

32.B
- 物理块号计算
  - $1569 = 512 \times 3 + 33$
  - 位于第4个磁盘块
  - 物理块号为80

33.C
- 隐式链接操作
  - 读取L1~L5磁盘块
  - 获取L6地址
  - 写入新块Lx并链接L6
  - 修改L5指针指向Lx
  - 共5次读盘2次写盘

34.C
- 文件结构判断
  - 仅支持顺序访问
  - 采用链接分配结构

35.B
- 不同分配方式修改开销
  - 连续分配需移动物理块
  - 索引分配仅修改内存索引
  - 链接分配需修改指针

36.A
- 分配方式I/O比较
  - 连续分配
    - 45次读+46次写
  - 链接分配
    - 45次读+2次写
  - 索引分配
    - 仅修改内存索引表

37.D
- 文件大小计算
  - 直接指针指向10块
  - 一级间接指向1024块
  - 总计1034个磁盘块

38.B
- 三级索引最大文件尺寸
  - 每级可指向256个下级块
  - 最终指向磁盘块
  - 计算: $256 \times 256 \times 256 \times 1024\mathrm{B} = 16\mathrm{GB}$

39.C
- 数据结构实现要求
  - 需随机访问的表用数组
    - 文件分配表
    - 页表
    - 中断向量表
  - 进程调度可用数组或链表
40.A
- 文件控制块
  - 实现"按名存取"的数据结构
  - 包含三类信息
    - 基本信息
    - 存取控制信息
    - 使用信息

41.B
- 文件物理结构特性
  - 连续结构
    - 不易扩展
  - 链式结构
    - 不能随机访问
  - 索引结构
    - 支持随机访问
    - 易于扩展

42.C
- 磁盘块大小计算
  - 基本参数
    - 索引块和数据块均为256B
    - 每个索引块有64个地址项
  - 总大小计算
    - 4个直接地址: $4 \times 256\mathrm{B}$
    - 2个一级间接: $2 \times (256/4) \times 256\mathrm{B}$
    - 1个二级间接: $(256/4) \times (256/4) \times 256\mathrm{B}$
    - 总大小: $1082368\mathrm{B} = 1057\mathrm{KB}$

43.A
- 文件读取过程
  - 缺页中断处理
    - 数据不在内存时产生中断
    - 进程进入阻塞态
    - 数据调入后唤醒进程
  - 系统调用过程
    - read通过陷入切换CPU状态
    - 需要先用open打开文件
  - read系统调用参数
    - 文件描述符fd
    - buf缓冲区首址
    - 传送字节数n

44.A
- 文件删除操作
  - 需要删除
    - 文件关联的目录项
    - 文件控制块
    - 释放内存缓冲区
  - 不需要删除
    - 文件所在目录

45.A
- 索引节点特性
  - 总数与文件总数相关
  - 与单个文件长度无关
  - 文件长度影响因素
    - 间接地址级数
    - 地址项数量
    - 文件块大小

46.A
- 快速随机播放要求
  - 最优选择：连续结构
  - 不适合：链表和索引结构

47.B
- 文件打开过程
  - 首次open操作
    - 调入FCB到内存
    - 不读入文件内容
  - 文件内容读取
    - 仅在需要时读入

48.B
- 索引访问计算
  - 存储容量
    - 直接索引: $10 \times 1\mathrm{KB} = 10\mathrm{KB}$
    - 一级索引: $256 \times 1\mathrm{KB} = 256\mathrm{KB}$
    - 二级索引: $256 \times 256 \times 1\mathrm{KB} = 64\mathrm{MB}$
  - 访问次数
    - 偏移量1234B: 1次访盘
    - 偏移量307400B: 3次访盘

49.D
- 文件访问权限表示
  - 结构特点
    - 4类用户
    - 每类5种权限
    - 总共20位二进制
  - 权限矩阵
    - 4行5列
    - 1表示true
    - 0表示false

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/57335efd257a169dcb7de048f4ad6d031b0fc507b4839bc3bba1069fb47a393d.jpg)

50.D
- 文件存储空间分配
  - 以簇为单位
  - 1026B文件需求
    - 大于1簇小于2簇
    - 分配2簇(2048B)

51.B
- 系统文件数量限制
  - 目录项参数
    - 总长64字节
    - 索引节点占4字节
  - 最大文件数
    - 由索引节点数量决定
    - 上限为$2^{32}$个

52.B
- 文件打开特性
  - 多进程访问
    - 可同时读写
    - 需系统调用加锁
  - 系统打开文件表
    - 全局唯一
    - 通过引用计数管理
  - 用户进程打开文件表
    - 同一文件可有不同属性
  - 文件关闭处理
    - 引用计数减1
    - 计数为0时删除表项

53.A
- 文件分配方式特点
  - 索引分配
    - 支持变长文件
    - 支持随机访问
  - 链接分配
    - 不支持随机访问
  - 连续分配
    - 不适合可变长度

54.B
- 文件关闭过程
  - 内存索引节点处理
    - 链接计数减1
    - 计数为0时释放
  - 不改变内容
    - 目录项
    - 磁盘索引节点

# 二、综合应用题  

01.【解答】
- 连续分配方式
  - 优点
    - 可以随机访问磁盘
    - 访问速度快
  - 缺点
    - 要求连续存储空间
    - 容易产生碎片
    - 降低磁盘空间利用率
    - 不利于文件增长扩充

- 链接分配方式
  - 优点
    - 不要求连续存储空间
    - 能更有效利用磁盘空间
    - 有利于扩充文件
  - 缺点
    - 只适合顺序访问
    - 不适合随机访问
    - 链接指针占用空间
    - 存储效率低
    - 可靠性差

- 索引分配方式
  - 优点
    - 支持顺序和随机访问
    - 查找效率高
    - 便于文件删除
  - 缺点
    - 索引表占用存储空间

02.【解答】
- FCB分解法原理
  - 目录存放在磁盘上,检索速度慢
  - 将FCB部分内容分解存放到其他数据结构
  - 目录只保留基本信息和指针
  - 缩减目录体积,减少磁盘块数
  - 减少检索时读取次数
  - 加快检索速度

- 分解前后对比
  - 分解前
    - 目录块数: $64\times254/512=31.75$ (32块)
    - 前31块每块8个,最后1块6个
    - 平均访问次数: $[8\times(1+2+3+\cdots+31)+6\times32]/254=16.38$
  - 分解后
    - 目录块数: $10\times254/512=4.96$ (5块)
    - 前4块每块51个,最后1块50个
    - 平均访问次数: $[51\times(2+3+4+5)+50\times6]/254=3.99$

- 分解法条件
  - 分解前平均访问次数: $(n+1)/2$
  - 分解后平均访问次数: $(m+3)/2$
  - 减少访问条件: $m<n-2$

> attention

第二问中的每个盘块都正好装满，相当于访问每个盘块的概率是相等的，因此计算起来比第一问方便很多。

03.【解答】
- 硬盘空间分析
  - 总块数: $540\mathrm{MB}/1\mathrm{KB}=540\mathrm{K}$
  - FAT表目大小: 20位 = $20/8=2.5\mathrm{B}$
  - FAT占用空间: $2.5\mathrm{B}\times540\mathrm{K}=1350\mathrm{KB}$

04.【解答】
- 直接块使用条件
  - 数据块大小: 4KB
  - 直接块数: 10个
  - 最大文件大小: $4\mathrm{KB}\times10=40\mathrm{KB}$

- 索引节点寻址空间
  - 直接块: 10块
  - 一级间接块: $4\mathrm{KB}/4\mathrm{B}=1024$块
  - 二级间接块: $(4\mathrm{KB}/4\mathrm{B})^2=1024^2$块
  - 三级间接块: $(4\mathrm{KB}/4\mathrm{B})^3=1024^3$块
  - 总地址空间: $[10+1024+1024^2+1024^3]\times4\mathrm{KB}\approx4.00\mathrm{TB}$

- 文件访问分析
  - 第10000B访问: 在第3个直接块,需1次访问
  - 第10MB访问: 在二级间接块,需3次访问

05.【解答】
- 混合索引结构分析
  - 物理块容量: $4\mathrm{KB}/4\mathrm{B}=1024$地址
  - 最大块数: $10+1024+1024^2+1024^3$
  - 最大文件长度: $4\mathrm{TB}+4\mathrm{GB}+4\mathrm{MB}+40\mathrm{KB}$

- 文件空间占用
  - 文件大小: 2GB
  - 数据块数: $2\mathrm{GB}/4\mathrm{KB}=512\times1024$
  - 间接索引块空间: $(1+512)\times4\mathrm{KB}=2\mathrm{MB}+4\mathrm{KB}$
  - i_node大小: $13\times4\mathrm{B}=52\mathrm{B}$
  - 总占用空间: $2\mathrm{GB}+2\mathrm{MB}+4\mathrm{KB}+52\mathrm{B}$

06.【解答】
- 连续存放分析
  - 磁盘寻道时间更短
  - 文件随机访问效率更高
  - FCB字段添加: |<|起始块号，块数> 或 <起始块号，结束块号>
- FCB存放优化
  - FCB集中存放
  - 文件数据集中存放
  - 优点
    - 随机查找只需访问FCB块
    - 减少磁头移动和I/O次数

07.【解答】
- 系统容量分析
  - 磁盘块总数: $2^{32}$ (4TB/1KB)
  - 索引项块号: 最少4B(32/8)
  - 直接索引结构
    - 512B索引表可容纳128个索引项
    - 最大文件长度: 128KB
- 分配方式分析
  - 预分配连续空间
    - 连续区块数(2B): $2^{16}$ 个磁盘块
    - 空间大小: $2^{26}$B
  - 直接索引区
    - 索引项数: 84(504B/6B)
    - 最大文件长度: $2^{26}$B + 84KB
  - 最优配置
    - 起始块号和块数各占4B
    - 寻址范围: $2^{32}$ 个磁盘块(4TB)

08.【解答】
- 顺序分配方式分析
  - 插入记录需移动其他记录块
  - 访盘次数计算
    - 前29条记录移动: 58次
    - 存回第30条记录: 1次
    - 总访盘次数: 59次
  - FCB变化: 起始块号和文件长度改变
- 链接分配方式分析
  - 插入操作
    - 找到第29块: 29次访盘
    - 新块存回: 1次访盘
    - 修改第29块: 1次访盘
    - 总访盘次数: 31次
  - 系统容量
    - 寻址能力: $2^{32}$ 块
    - 块大小: 1KB(1024B)
    - 数据部分: 1020B
    - 最大文件长度: 4080GB

09.【解答】
- 目录文件内容分析
  - dir和dir1内容如下:

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/572c14cd075985d6372a7763235fcc53da2ac3200b59e8af2eba5bf212081a9f.jpg)

- FAT系统特性
  - 簇号长度: 2字节(16位)
  - 最大表项数: $2^{16}$ (65536)
  - FAT最大长度: 128KB
  - 文件最大长度: 256MB
- FAT表项分析
  - 簇号存放规则
    - 106号存在100号表项
    - 108号存在106号表项
- 访问过程分析
  - 查找步骤
    - 查找dir1簇号
    - 读取48号簇
    - 查找file1首簇号
    - 定位5000字节位置
  - 需访问簇: 48号和106号

10.【解答】
- 系统参数分析
  - 簇大小: 4KB
  - 地址项长度: 4B
  - 每簇地址项数: 1024
  - 最大文件长度计算
    - 物理块数: $8+1024+1024^2+1024^3$
    - 总长度: 32KB+4MB+4GB+4TB
- 存储容量分析
  - 索引节点总数: 64M
  - 文件存储能力
    - 5600B文件占用2簇
    - 最大文件数: 64M
- 访问效率分析
  - F1文件(6KB)
    - 仅需直接地址项
  - F2文件(40KB)
    - 需要一级索引表
  - 结论: 访问时间不同

11.【解答】
- 目录结构分析
  - stu目录内容
    - course(索引节点2)
    - doc(索引节点10)
  - 目录项内容如下:

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/2faab5c3d59d466a546fcb98097826c32c016b663b74142b6acc781e241aa417.jpg)

- 文件共享分析
  - doc和course1共享索引节点10
  - doc块号x = 30
- 访问过程分析
  - 需读取2个磁盘块
    - course1索引节点块
    - course1内容块
  - 访问步骤
    - 读取索引节点
    - 读取内容块
- 存储结构分析
  - course2文件(6MB)
    - 需要1536个磁盘块
    - 使用一级和二级间接地址项
    - 地址项分布
      - 直接地址: 10块
      - 一级间接: 1024块
      - 二级间接: $1024\times1024$块



# 4.2.8 答案与解析  

# 一、单项选择题  

01. C
- FCB分析
  - FCB大小: 64B
  - 盘块大小: 1KB
  - 每盘块FCB数: $1024/64=16$ 个
- 目录项分析  
  - 目录项总数: 3200个
  - 需要盘块数: $3200/16=200$ 个
- 查找分析
  - 平均查找次数: $200/2=100$ 次
  - 即平均访问磁盘次数
  - 注意:平均查找长度描述
    - 操作系统:"总长度/2"
    - 数据结构:"(±总长度)/2"

02. C
- 文件按名存取分析
  - 系统利用文件名形成检索路径
  - 对目录进行检索
  - 路径名分量未找到则停止检索
- 目录查询方式
  - 顺序检索法
    - 常用方式
    - 适用性好
  - 散列法
    - 存在冲突和溢出
    - 解决开销大
- 树形目录优化
  - 可设置当前目录
  - 从当前目录开始查找
- 检索结果
  - 得到文件的逻辑地址

03. A
- 相对路径特点
  - 从当前目录出发
  - 通路上目录名和文件名用分隔符连接
  - 区别于绝对路径

04. C
- 多级目录结构优点
  - 符合多层次管理需要
  - 提高文件查找速度
  - 允许同名文件
  - 解决命名冲突

05. A
- 单级目录限制
  - 新建文件需检索所有目录项
  - 确保文件名唯一
  - 无法解决重名问题

06. D
- 错误分析
  - I:存放方法描述错误
  - II:访问控制描述错误
  - III:树形目录文件名描述错误
  - IV:文件保护方法描述错误

07. A
- 引用计数分析
  - 建立F2:F1和F2计数值为2
  - 建立F3:F1计数值2,F3计数值1
  - 删除F2:F1计数值1,F3计数值1

08. A
- 文件链接分析
  - F2是F1硬链接
    - 共享同一索引节点
    - 首次打开读入内存
  - 进程访问权限可不同
  - F3是F1软链接
    - 删除不影响F1计数
  - 文件读取只需描述符

09. D
- 文件打开机制
  - 系统分配文件描述符
  - 用于标识文件
  - 后续操作使用描述符

10. B
- 目录检索性能因素
  - 目录项数量影响比较次数
  - 目录项大小影响IO时间
  - 目录项位置影响访问路径
  - 文件大小无关

11. D
- 文件重名分析
  - 不同路径可同名
  - 同目录下不可重名
  - 路径名需唯一

12. B
- 文件目录作用
  - 实现按名存取
  - 获取物理地址
  - 获取文件属性

13. B
- 链接文件分析
  - 符号链接
    - 计数值固定为1
    - 删除不影响原文件
  - 硬链接
    - 计数值加1
    - 删除减1
- 具体案例
  - 建F2:F1、F2计数值1
  - 建F3:F1、F3计数值2
  - 删F1:F3计数值1,F2不变

14. C
- 当前目录优势
  - 避免从根目录检索
  - 加快检索速度
  - 非相对目录因素
    - 读写速度依赖磁盘性能

15. B
- 多进程文件访问
  - 读写指针位置独立
  - 硬链接共享索引节点
  - 文件描述符独立

16. A
- 文件删除机制
  - 回收磁盘空间
  - 回收文件控制块
  - 删除目录项
  - 快捷方式(软链接)保留
# 二、综合应用题  

01.【解答】
- 目录结构分析
  - 单级目录结构
    - 目录表包含100个目录项
    - 平均检索目录项数 = 目录项/2 = 50
  - 两级目录结构
    - 主目录有10个目录项
    - 每个子目录有10个目录项 
    - 每级平均检索5个目录项
    - 检索一个文件平均检索10个目录项
  - 比较结果
    - 单级目录结构检索量是两级目录结构的 $50/10=5$ 倍

02.【解答】
- 文件链接分析
  - 链接建立可行性
    - F为目录,R为文件
    - 可建立R到F的符号链接
    - 也可通过硬链接方式
  - R文件删除分析
    - 取决于文件系统共享实现方法
    - 基于索引节点共享:不能删除(指针悬空)
    - 基于符号共享:可以删除
  - N目录删除分析
    - N子目录存在共享文件R
    - R节点不一定能删除
    - N也不一定能删除

03.【解答】
- 文件命名分析
  - 目录D中建立文件A
    - 目录D中无同名文件
    - 可以建立名为A的文件
  - 目录C改名为A
    - 根目录下已有名为A的目录
    - 不能改名为A
- 文件访问优化
  - 用户G访问优化
    - 需要通过K、P目录访问S、T文件
    - 可在G目录下建立链接文件
    - 直接链接到S和T文件
  - 用户E文件保护
    - 修改文件I的存取控制表
    - 只保留E用户访问权限
    - 其他用户无操作权限

04.【解答】
- 索引块分析
  - 容量计算
    - 磁盘块大小512B
    - 磁盘地址大小2B
    - 一级索引表容纳256个地址
    - 二级索引表容纳256个一级表地址
    - 三级索引表容纳256个二级表地址
    - 最大文件页数 $10+256+256\!\times\!256+256\!\times\!256\!\times\!256=16843018$
- 文件访问分析
  - 文件J访问过程
    - 根目录查找目录A(1次)
    - 目录A查找目录D(2次)
    - 目录D查找文件J的FCB(3次)
    - 读取三级索引块(6次)
    - 读取文件J页(7次)
    - 最多启动磁盘7次
  - 文件W访问过程
    - 最优情况分析
      - 目录项在第一个磁盘块
      - 根目录→C→I→P→U→W路径
      - FCB在前10个直接块
      - 最少启动磁盘6次
  - 优化建议
    - 将W文件挂在根目录前面
    - 读取FCB(1次)
    - 读取三级索引块(4次)
    - 读取目标页(5次)
    - 最多启动磁盘5次

05.【解答】
- 链式存储分析
  - 根目录访问
    - 第一块常驻内存
    - 找到文件A需5次读盘
  - 记录读取
    - 每块可存2条记录
    - 598条记录需299次读盘
    - 总计需304次读盘
- 连续存储分析
  - 文件定位
    - 找到文件A需5次读盘
  - 记录读取
    - 第487条记录需1次读盘
    - 总计需6次读盘


# 4.3.8 答案与解析  

# 一、单项选择题  

01.B
- 文件系统职责
  - 系统角度
    - 组织、分配存储空间
    - 文件存储
    - 文件保护
    - 文件检索
  - 用户角度
    - 按格式存放文件
    - 根据文件名查找文件

02.D
- 逻辑文件系统功能
  - 文件按名存取
  - 文件目录组织管理
  - 文件名转换为描述符/句柄
  - 存储保护

03.A
- 文件系统容量特点
  - 不等于磁盘容量
  - 磁盘可分多个分区
  - 文件大小受多重限制
    - 磁盘剩余空间
    - FCB和FAT表结构
  - 可跨多个磁盘存储

04.B
- UNIX文件系统特征
  - 树形目录结构
  - 文件信息存于索引节点
  - 超级块描述文件系统

05.C
- 文件存储空间管理要点
  - 空闲空间管理
  - 创建文件空间分配
  - 空闲盘块查找与管理

06.D
- 文件区特点
  - 占磁盘空间大部分
  - 文件长期驻留外存
  - 访问频率较低
  - 管理目标是提高存储空间利用率

07.B
- 位示图方法
  - 空闲块管理方法
  - 用于磁盘空间管理

08.D
- 成组链接法特点
  - 空闲盘块分组管理
  - 每组首块记录下组信息
  - 首组信息存内存专用栈

09.B
- 硬盘主引导扇区组成
  - 主引导程序(MBR)
  - 分区表
  - 结束标志(AA55)

10.B
- 块号100位置计算
  - 行号计算: $\mathrm{row}=(100-1)\,\mathrm{Div}\,32+1=4$
  - 列号计算: $\mathrm{col}=(100-1)\;\mathrm{MOD}\;32+1=4$
  - 结果: 字号4,位号4

11.A
- 空闲空间管理方法特点
  - 空闲链表法
    - 适用离散分配
    - 难获连续空间
  - 空闲表法
    - 适用连续分配
    - 易获连续空间
  - 位示图法
    - 适用两种分配
    - 易找连续空闲块
  - 成组链接法
    - 结合两种分配
    - 便于找连续空闲块

12.D
- Linux VFS对象类型
  - 超级块对象
  - 索引I节点对象
  - 目录项对象
  - 文件对象

13.A
- 族数计算
  - 总族数: $10\mathrm{GB\dot{-}4K B}=2.5\mathrm{M}$
  - 位标识需求: 2.5Mbit
  - 字节需求: $2.5\mathrm{M}\dot{\cdot}8=320\mathrm{KB}$
  - 族需求: $320\mathrm{KB^{\cdot4}K B}=80$

14.C
- 盘块号计算
  - 公式: 起始块号 + ［盘块号/(1024×8)］
  - 计算: $32+\lfloor409612/(1024\times8)\rfloor=82$
  - 块内字节号: $\lfloor(\text{盘块号}\%(1024\times8))/8\rfloor=1$

15.B
- 文件系统管理方法
  - 传统空闲磁盘管理方法
    - 空闲表法
    - 空闲链表法
    - 位示图法
    - 成组链接法
  - FAT特点
    - 表项与物理块对应
    - 特殊数字标记
    - 记录块链接关系
    - 标记空闲块

16.C
- 物理内存页框计算
  - 总页框数: $16\mathrm{GB\dot{-}4K B}=2^{34}/2^{12}=2^{22}$
  - 位图空间: $2^{22}\mathrm{b}=2^{19}\mathrm{B}=512\mathrm{KB}$

# 二、综合应用题  

01.【解答】
- 位示图位置与盘块序号转换
  - 根据位示图位置(i,j)得出盘块序号
    - $b=i\times16+j$
  - 柱面号、磁头号、扇区号计算
    - $C=b/(20\times8)$
    - $H=(b\%(20\times8))/8$
    - $S=b\%8$

- 分配与回收操作
  - 分配过程
    - 顺序扫描位示图找值为"0"的位
    - 转换为相应序号b
    - 修改位示图,置(i,j)=1
  - 回收过程
    - 盘块号转换公式
      - $b=C\times20\times8+H\times8+S$
      - $i=b/16$
      - $j=b\%16$
    - 位示图相应位置"0"

02.【解答】
- 磁盘空间计算
  - 存储块(扇区)总数
    - $4\times16\times100=6400$ 个

- 位示图构造
  - 总位数为6400位
  - 32位字长单元需要
    - $6400/32=200$ 个字

- 位示图定位
  - 第18个字第16位对应块号
    - $32\times(18-1)+16=560$


# 5.1.7 答案与解析  

# 一、单项选择题  

01.B
- 块设备特征分析
  - 可寻址是块设备基本特征，A错误
  - 共享设备需要可寻址和随机访问保证数据完整性，B正确
  - 共享设备允许多进程同时访问，C错误
  - 分配共享设备不会引起死锁，D错误

02.C
- 虚拟设备概念
  - 采用虚拟技术将独占设备转换为逻辑设备
  - 克服独占设备速度慢、利用率低的特点
  - 非物理共享，仅是逻辑概念

03.D
- DMA应用分析
  - 主要用于块设备
  - 磁盘是典型块设备
  - A、B、C不属于I/O控制方式

04.A
- 设备寄存器分析
  - 中断寄存器位于主机内
  - 不存在I/O地址寄存器
  - 编程空间由体系结构和操作系统决定
  - 控制寄存器和状态寄存器功能
    - 接收上层命令
    - 存放设备状态信号
  - 控制命令由设备控制器提供

05.C
- 接口和I/O逻辑功能
  - 接口用于传输信号
  - I/O逻辑即设备控制器，实现设备控制

06.D
- 设备映射表特性
  - 记录逻辑设备和物理设备对应关系
  - 不能实现具体功能
  - 不能管理物理设备

07.A
- DMA工作模式
  - 不经CPU直接存取数据
  - 在I/O设备和主存间建立直接数据通路
  - 通过总线实现物理连接

08.A
- 通道技术分类
  - 通道属于硬件技术
  - SPOOLing、缓冲池、内存覆盖属于软件实现

09.C
- DMA数据交换特点
  - 设备和内存可成批数据交换
  - 无需CPU干预
  - CPU仅参与预处理和结束过程
10.B
- DMA控制器特性分析
  - 不是处理机而是控制器，A错误
  - CPU只需发出命令和设置DMA控制器寄存器值，C错误
  - 需要CPU指定数据地址与长度，D错误

11.D
- DMA控制器寄存器分析
  - 命令/状态寄存器：控制工作模式和反映状态
  - 地址寄存器：存放源地址和目标地址
  - 数据寄存器：存放要转移的数据
  - 堆栈指针寄存器不需要

12.A
- 设备分配考虑因素分析
  - 设备固有属性决定使用方式
  - 设备独立性提高分配灵活性和利用率
  - 设备安全性保证分配不会永久阻塞
  - 及时性不是主要考虑因素

13.A 系统为每台设备确定一个编号以便区分和识别设备，这个确定的编号称为设备的绝对号。

14.C
- CPU、通道和设备控制器关系
  - 三者控制关系层层递进，C正确
  - 输入/输出命令不存在并行可能，B错误

15.C
- 设备驱动程序配置原则
  - 按设备类型配置
  - 每类设备只需一个驱动程序

16.B
- 系统调用参数处理
  - 由设备无关的操作系统软件完成参数翻译
  - 向上提供系统调用接口
  - 根据设备类型选择驱动程序

17.C
- 设备驱动程序职责
  - 转换抽象I/O要求为具体要求
  - 向设备寄存器写入命令
  - 控制设备工作状态和数据传输

18.A
- 打印机中断分析
  - 每秒打印字符数：$400$个
  - 每字符中断CPU时间：$50\upmu\mathrm{s}$
  - 每秒中断开销：$20\mathrm{ms}$
  - CPU占用率：$2\%$
  - 中断驱动I/O方式可行

19.C
- 中断I/O方式特点
  - 中断服务程序完成数据输入输出，C错误
  - 硬件完成CPU模式转换
  - 保存用户程序断点
  - 可采用硬件识别中断源

20.C
- I/O控制方式比较
  - 程序直接控制：CPU和I/O串行
  - 中断控制：CPU和设备准备并行
  - DMA方式：CPU和数据传送并行

21.C
- 中断处理结束流程
  - 屏蔽中断：返回被中断进程
  - 中断嵌套：根据优先级决定

22.B
- 键盘I/O工作方式
  - 采用中断I/O方式
  - 通过中断处理程序获取输入

23.B
- I/O软件层次结构
  - 用户层
  - 设备无关软件层
  - 设备驱动程序
  - 中断处理程序
- 数据传输流程
  - 用户程序发起系统调用
  - 内核处理调用请求
  - 设备驱动程序处理
  - 数据逆向回传

24.A
- 设备管理软件层次
  - 用户层
  - 系统调用处理层
  - 设备驱动程序
  - 中断处理程序

25.B
- DMA传送过程
  - 预处理：CPU初始化DMA控制器
  - 数据传送：DMA控制
  - 后处理：DMA发送中断请求
  - 执行顺序：②③①④

# 二、综合应用题  

01.【解答】
- 时钟中断分析
  - 中断频率为60Hz
  - 中断周期为1/60s
  - 每周期中断处理时间为2ms 
  - 比率计算: $0.002/(1/60)=12\%$

02.【解答】
- 调制解调器中断分析
  - 一个字符占10位
  - 56kb/s速率下每秒传送字符数: $56000/10=5600$
  - 每次中断需0.1ms
  - CPU占用时间: $5600\!\times\!0.1\mathrm{ms}=560\mathrm{ms}$
  - CPU占用比例: 56%

03.【解析】
- 执行顺序分析
  - 正确顺序: $\circledcirc\!(\underline{{6}})\!(\underline{{4}})\!(3)\!(1)\!(5)$
  - 操作 $^{(\!\astrosun)}$ 的前后操作
    - 前一个: $\textcircled{3}$
    - 后一个: $\circledast$
  - 操作 $^\mathrm{\textregistered}$ 的后一个操作: $\textcircled{4}$

- scanf()函数执行过程分析
  - 用户进程P调用scanf()
  - scanf()调用read()系统调用
  - 通过陷阱指令进入内核
  - 内核调用sys_read服务例程
  - 设备无关层处理
  - 设备驱动层处理
  - 进程调度与阻塞
  - 中断处理过程

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/b815ede37264061a56853a6051fb9c6d3fa2eff415ee9879b71b2dda1e1ca5bd.jpg)

- CPU调度相关分析
  - 操作 $\mathcal{Q}$ 后CPU切换到其他进程
  - 操作 $^{;\odot}$ 后调度程序可选中进程P

- 设备驱动程序职责
  - 驱动I/O设备工作
  - I/O操作初始化
  - 执行具体I/O指令
  - 操作 $^{;(3)}$ 属于键盘驱动程序

- 中断处理状态分析
  - 键盘中断处理时进程P处于阻塞态
  - 内核I/O软件层执行时CPU处于内核态


# 5.2.8 答案与解析  

# 一、单项选择题  

01.C
- 设备独立性
  - 用户使用设备的透明性
  - 使用户程序和实际物理设备无关

02.C
- CPU与I/O设备速度匹配
  - CPU执行速度快
  - I/O设备速度慢
  - 通过高速缓冲技术改善不匹配问题

03.A
- 缓冲池特点
  - 系统共用资源
  - 多进程共享
  - 可用于输入输出
  - 三种缓冲类型
    - 空闲缓冲区
    - 装满输入数据的缓冲区
    - 装满输出数据的缓冲区
  - 相同类型缓冲区可链成队列
  - B、C、D属专用缓冲

04.A
- 缓冲区位置
  - 输入并和输出并在磁盘上
  - 输入/输出缓冲区在内存中
  - 缓冲池在主存中建立
  - 原因是CPU速度比I/O设备高

05.B
- 双向设备缓冲区
  - 应使用双缓冲区
  - 可实现同时双向数据传输
  - 提高设备效率和利用率
  - 单缓冲区只能单向传输
  - 多缓冲区和缓冲池非必需

06.B
- 缓冲区特性
  - 存储区域组成
    - 专门硬件寄存器
    - 内存实现
  - 主要作用
    - 提高CPU和I/O设备速度匹配
    - 避免CPU等待I/O设备
  - 应用设备
    - 输入设备(键盘等)
    - 输出设备(打印机等)
    - 块设备(磁盘等)
    - 字符设备(串口等)

07.C
- 通信进程缓冲区
  - 单缓冲区
    - 同一时刻单向传输
    - 可分时用于收发
  - 双缓冲区
    - 可同时双向传输

08.D
- 设备分配算法
  - 先来先服务
  - 最高优先级优先
  - A、C为动态分区分配算法
  - B为进程调度算法

09.A
- 单缓冲区数据传送
  - 设备与处理机串行操作缓冲区
  - 第i次读磁盘数据与处理第i-1次数据并行
  - 与数据传送到用户区串行
  - 总时间为max(80us,30μs)+40μs=120μs

10.D
- 数据处理总时间分析
  - 初始状态：缓冲区1数据已传送到用户区
  - 两种情况讨论
    - 当 $T_3 > T_1$ (CPU处理慢于数据传送)
      - 磁盘数据传送与CPU处理并行
      - 总时间取决于CPU处理时间 $T_3$
    - 当 $T_3 < T_1$ (CPU处理快于数据传送) 
      - I/O设备可连续输入
      - CPU无需等待I/O设备
      - 数据传送与CPU处理并行
      - 总时间取决于磁盘传送时间 $T_1$

11.B
- 缓冲区设置原则
  - 主要解决I/O速度慢于CPU处理速度的矛盾
  - I/O时间远小于CPU处理时间时无需设置缓冲区

12.C
- 缓冲区使用特点
  - 缓冲区是临界资源
  - 所有缓冲机制都需要考虑申请和释放(互斥)问题

13.D
- 缓冲技术应用场景
  - 鼠标移动时记录活动情况
  - 磁盘驱动器与I/O设备吞吐量不同时
  - 用户作业空间与磁盘间数据传送
  - 多幅图形存取及性能提升

14.A
- 设备管理数据结构
  - DCT(设备控制表)
  - COCT(控制器控制表) 
  - CHCT(通道控制表)
  - PCB不属于设备管理数据结构

15.D
- 设备分配方式
  - 独享分配
  - 共享分配
  - 虚拟分配
  - 选项D为内存分配方式

16.A
- 设备分配步骤
  - 分配设备
  - 分配控制器
  - 分配通道
  - 三者都成功才算分配成功
  - 成功后可启动I/O设备传送数据

17.C
- 共享设备特点
  - 磁盘可被多进程同时访问
  - 打印机同时访问会导致文档混乱
  - 磁带机需要较长定位时间,不适合同时访问

18.D
- 系统效率提升关键
  - 处理器是单机系统最关键资源
  - 多道程序设计提高处理器利用率
  - 其他为设备和内存相关技术

19.C
- SPOOLing技术特点
  - 将独占设备改造为共享设备
  - 处理后的设备称为虚拟设备

20.B
- SPOOLing技术目的
  - 将物理设备虚拟为多台逻辑设备
  - 减少设备闲置时间
  - 提高设备并发度和吞吐量
  - 主要目的是提高独占设备利用率

21.A
- 输入输出井特点
  - 在磁盘上开辟两大存储空间
  - 输入井模拟脱机输入的磁盘设备
  - 输出井模拟脱机输出的磁盘
  - 打印结果先送到磁盘固定区域的输出井

22.D
- SPOOLing技术资源需求
  - 需要磁盘空间(输入井和输出井)
  - 需要内存空间(输入/输出缓冲区)
  - 不需要外围计算机支持

23.A
- SPOOLing系统组成
  - 输入井和输出井
  - 输入缓冲区和输出缓冲区
  - 输入进程和输出进程
  - 由预输入程序、井管理程序和缓输出程序管理

24.B
- SPOOLing技术特征
  - 将物理I/O设备虚拟化
  - 允许多用户共享物理I/O设备
  - 不是真实物理设备分配

25.D
- SPOOLing系统基本条件
  - 需要大容量高速外存作为输入输出井
  - 需要SPOOLing软件
  - 提高系统和I/O设备利用率
  - 进程无需等待I/O操作完成

26.A
- SPOOLing技术效率提升机制
  - 将独占设备虚拟为共享设备
  - 进程效率提升
    - 无需等待打印机空闲
    - 输出数据送到输出井后可继续执行
  - 打印机效率提升
    - 持续从输出井读取数据打印
    - 减少空闲等待
  - 系统性能提升
    - 根据数据量和优先级安排打印顺序
    - 平衡进程等待和响应时间
    - 减少打印机切换次数降低系统开销

27.A
- SPOOLing技术要求
  - 需要高速大容量随机存取外存
  - 通过预输入和缓输出减少CPU等待
  - 将独享设备改造为共享设备

28.C
- 假脱机技术应用
  - 将独享设备改造为共享虚拟设备
  - 作业执行只使用虚拟设备
  - 使用磁盘部分空间作为打印机公共缓冲区
  - 用户对打印机操作转化为磁盘存储操作

29.D
- 设备分配方式
  - 独占设备：静态分配
  - 共享设备：动态分配

30.C
- 打印机文件访问流程
  - 通过文件系统访问磁盘数据
  - 通过设备管理程序控制打印输出
  - 打印机启动程序仅能初始化打印机

31.C
- 设备操作职责划分
  - 设备驱动程序
    - 设备寄存器写命令
  - 设备独立性软件
    - 设备使用权限检查
    - 缓冲区管理
  - I/O库函数(用户层)
    - 二进制整数转ASCII码格式打印

32.B
- 设备驱动程序特点
  - 正确观点
    - 不同厂家设备需不同驱动程序
    - 不同磁盘型号调度方式可能不同
  - 错误观点
    - 全部需用汇编语言编写
    - 驱动程序接口与操作系统无关

33.D
- 设备驱动程序功能范围
  - 负责管理I/O设备
  - 不负责数据分析和缓冲

34.B
- 驱动程序工作流程
  - 转换抽象命令为具体要求
  - 检查服务请求合法性
  - 检查设备状态
  - 传送I/O参数并启动设备

35.A
- 设备名称转换
  - 用户程序使用逻辑设备名
  - 实际执行使用物理设备名
  - 转换由设备无关软件完成

36.B
- 缓冲区性能分析
  - 单缓冲区总时间
    - 磁盘块读入时间：$150 \times 10 = 1500\upmu\mathrm{s}$
    - 最后块处理时间：$50\upmu\mathrm{s}$
    - 总计：$1550\upmu\mathrm{s}$
  - 双缓冲区总时间
    - 连续读入时间：$100 \times 10\upmu\mathrm{s}$
    - 最后传输时间：$50\upmu\mathrm{s}$
    - 处理时间：$50\upmu\mathrm{s}$
    - 总计：$1100\upmu\mathrm{s}$

37.C
- 数据块处理时间分析
  - 数据块1处理
    - 外设到用户区：105
  - 数据块2处理
    - 并行传输时间：105
    - 处理时间：90
    - 总时间：300

38.C
- 设备驱动程序职责
  - 计算柱面号、磁头号、扇区号
  - 实现与硬件相关的功能

39.A
- 磁盘缓冲区优势
  - 解决速度差异问题
  - 提高访问效率

40.D
- SPOOLing技术特点
  - 利用高速磁盘作为外存
  - 基于多道程序设计
  - 实现独占设备共享
  - 系统负责数据传送

41.D
- 设备访问机制
  - 设备视为特殊文件
  - 使用逻辑设备名访问
  - 建立逻辑物理设备映射
  - 更换物理设备只需更换驱动

42.A
- 驱动程序功能特性
  - 设备初始化
  - I/O控制方式实现
  - 数据传输控制
  - 不同控制方式需不同实现

43.D
- 设备分配考虑因素
  - 设备类型
    - 决定固有属性
    - 影响分配方式
  - 访问权限
    - 控制进程访问
    - 保证系统安全
  - 占用状态
    - 决定分配可能性
    - 影响等待处理
  - 逻辑物理设备映射
    - 提高系统灵活性
    - 增强可扩展性# 二、综合应用题  

01.【解答】

- 功能分析与实现主体选择
  - 操作系统特性分析
    - 代码相对稳定
    - 很少发生代码变化
  
  - 功能1和2的实现主体
    - 不适合由操作系统完成的原因
      - 需记录逻辑块和磁盘细节映射
      - 操作系统代码会急剧膨胀
      - 新型介质支持需要代码变动
      - 需记录不同厂商数据
      - 新厂商和产品难以支持
    - 最佳实现方案
      - 由厂商编写的设备驱动程序完成
      - 原因：与具体磁盘类型相关
      - 目的：支持更多不同型号设备

  - 功能3的实现主体
    - 由操作系统完成
    - 原因：涉及安全与权限问题
    - 特点：与设备无关

  - 功能4的实现主体
    - 由用户层完成
    - 原因：用户掌握二进制整数转ASCII码的具体格式要求
      - 进制选择（二进制/十进制）
      - 分隔符使用等
02.【解答】

- 数据块处理分析
  - 总体处理情况
    - 4个数据块总耗时 $390\upmu\mathrm{s}$
    - 每块平均处理时间 $390\upmu\mathrm{s}/4=97.5\upmu\mathrm{s}$

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/c7cec2f6da86710e1dd1c9a4803dabc40f855420917367f5fd5a258274cb37bd.jpg)  

- 通用处理时间分析
  - 处理 $n$ 个数据块
    - 总耗时 $(80n+20+50)\upmu\mathrm{s}=(80n+70)\upmu\mathrm{s}$
    - 每块平均时间 $(80n+70)/n\,\upmu\mathrm{s}$
  - 极限情况
    - 当 $n$ 较大时
    - 平均时间近似为 $\operatorname*{max}(C,T)=80\upmu\mathrm{s}$


# 5.3.7 答案与解析  

# 一、单项选择题  

01.B
- 文件系统与磁盘关系分析
  - 存储介质多样性
    - 不仅依赖磁盘
    - 可存在于光盘、闪存、网络等
  - 空间占用特点
    - 可只占用磁盘部分空间
    - 一个磁盘可有多个文件系统
    - 可存在无文件系统空间
  - 相互依赖关系
    - 文件系统需要磁盘存储数据
    - 磁盘需要文件系统组织数据

02.D
- 磁盘共享特性
  - 可分时共享设备
    - 多用户可在不同时间访问
    - 单一时刻仅允许一个作业访问

03.B
- 存储设备访问方式
  - 顺序访问
    - 按从前到后顺序读写
    - 典型设备如磁带
  - 直接/随机访问
    - 可任意次序读写
    - 适用于光盘、磁盘、U盘等

04.A
- 磁盘调度重要性
  - 影响寻找时间
  - 缺乏合适调度会增加寻道时间

05.D
- 磁盘调度算法辨识
  - 正确算法
    - 电梯调度
    - FCFS算法
    - CLOCK算法
  - 错误算法
    - 银行家算法(死锁避免)

06.A
- 文件存储特点
  - 以块为单位存放
  - 读写操作基于块

07.D
- 磁盘性能影响因素
  - 寻找时间影响最大
    - 涉及机械运动
    - 耗时较长

08.D
- 磁盘初始化过程
  - 引导程序位置
    - 位于活动分区引导扇区
    - 在分区后产生
  - 分区操作
    - 划分柱面组成分区
    - 记录于主引导记录分区表
  - 高级格式化
    - 创建文件系统
    - 初始化文件系统数据结构

09.D
- 磁盘性能优化分析
  - 调度算法目的
    - 减少寻找时间
  - 影响因素
    - 扇区数据处理影响传输时间
    - 文件物理结构影响旋转延迟
    - 不同分配方式影响访问效率

10.A
- 磁盘存取时间构成
  - 主要组成部分
    - 寻道时间(占比最大)
    - 旋转延迟时间
    - 传输时间
  - 优化重点
    - 主要优化寻道时间
    - 其他时间难以系统层面优化

11.C
- 算法类型辨识
  - 进程调度算法：A和D
  - 页面淘汰算法：B
  - 磁盘调度算法：C

12.B
- 最短寻找时间优先算法问题
  - 饥饿现象
    - 近距离请求优先满足
    - 远距离请求可能无限延迟

13.B
- 磁盘调度算法特点比较
  - FCFS算法
    - 按请求时间顺序
    - 磁头方向可随时改变
  - 其他算法
    - 电梯调度限制方向
    - 循环扫描限制方向

14.B
- 连续存放文件存储分析
  - 地址结构
    - 柱面号、磁头号、扇区号
  - 存储规则
    - 同一柱面优先
    - 扇区满后转下一磁头
    - 数据连续存储于同心圆

15.B
- 磁盘逻辑记录计算
  - 基本参数
    - 每柱面8个磁道
    - 每磁道8个扇区
    - 每柱面64个扇区
  - 计算公式
    - 逻辑记录号 = $78\times64+6\times8+6=5046$
16.A
- 磁道簇组织分析
  - 每道扇区组成一个簇的优点
    - 有利于提高存储速度
  - 读写时间计算
    - 单个磁道时间: $T+r$ 秒
      - T为寻道时间
      - r为读写时间
    - 总数据量: $b$ 字节
    - 占用磁道数: $b/N$ 个
    - 总平均读写时间: $(r+T)b/N$ 秒

17.C
- 磁道访问时间计算
  - 单圈时间: $60/3000\mathrm{s}=0.02\mathrm{s}=20\mathrm{ms}$
  - 每个扇区时间: $20\mathrm{ms}/10=2\mathrm{ms}$

18.C
- 磁盘数据传输率计算
  - 基本参数
    - 转速: 7200转/分 = 120转/秒
    - 每圈扇区数: 160个
    - 每扇区大小: 512B
  - 传输率计算: $120{\times}160{\times}512/1024\mathrm{KB/s}=9600\mathrm{KB/s}$

19.D
- SSTF算法寻道分析
  - 寻道序列: 100,90,58,55,39,38,18,150,160,184
  - 移动距离计算
    - 方法一: 10+32+3+16+1+20+132+10+24=248
    - 方法二: 82(100到18) + 166(18到184) = 248

20.C
- 不同调度算法分析
  - 循环扫描: 下一个是77号磁道
  - 最短寻道时间优先: 下一个是77号磁道
  - 电梯调度: 下一个是55号磁道(正确)
  - 先来先服务: 下一个是33号磁道

21.C
- 磁盘调度算法比较
  - SCAN算法
    - 访问序列: 788,845,911,999,700,432,396,165,164,25
    - 移动距离: $(999-734)+(999-25)=1239$
  - SSTF算法
    - 访问序列: 700,788,845,911,432,396,165,164,25
    - 移动距离: $(734-700)+(911-700)+(911-25)=1131$

22.C
- 磁带存储分析
  - 单条记录长度: $80/400=0.2$ 英寸
  - 总长度: $(0.2+0.4){\times}3000=1800$ 英寸
  - 利用率: $0.2/(0.2+0.4)=33.3\%$

23.D
- SSD特性分析
  - 优点
    - 无机械部件
    - 随机读写速度快
  - 缺点
    - 容易磨损

24.C
- SSD性能特点
  - 读写速度比较
    - 写速度慢于读速度但快于机械硬盘
  - 静态磨损算法优势
    - 自动数据分配
    - 性能更优

25.D
- 磨损均衡机制目的
  - 延长固态硬盘寿命
  - 非提高读写速度

26.A
- SCAN算法分析
  - 向序号增加方向
    - 服务110,170,180,195
  - 向序号减少方向
    - 服务68,45,35,12

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/719a794aae3458a2769d871552667700cce41adaba0ae64e60da79df81167b02.jpg)

27.B
- I/O性能改善方法分析
  - 有效方法
    - 重排I/O请求次序
    - 使用缓冲区技术
    - 优化文件物理块分布
  - 无效方法
    - 设置多个分区

28.C
- SCAN算法计算
  - 访问顺序: 130,180,199,42,15
  - 移动磁道数: $(199-58)+(199-15)=325$

29.B
- 磁盘格式化步骤
  - 低级格式化
    - 分成扇区
  - 分区
    - 划分柱面组
  - 逻辑格式化
    - 创建文件系统
    - 存储数据结构

30.D
- 文件访问速度提升方法
  - 提前读
    - 预读下一盘块
  - 延迟写
    - 先写入缓冲区
  - 其他优化措施

31.A
- 调度算法公平性分析
  - 不公平算法
    - 最短寻道时间优先
    - 扫描算法
    - 循环扫描算法
  - 公平算法
    - 先来先服务

32.C
- 最短寻道时间优先算法分析
  - 访问序列: 184,182,187,176,199
  - 移动距离: $0+2+5+11+23=41$

# 二、综合应用题  

01.【解答】
- 磁盘物理地址计算
  - 磁盘结构
    - 8个盘面
    - 一个柱面大小: $8{\times}8=64$ 个扇区(64条逻辑记录)
    - 存储顺序:扇区→磁道→柱面
  - 3468号逻辑记录位置
    - 柱面号: $3468/64\,{=}\,54$
    - 磁道号: (3468MOD64)DIV $8=1$
    - 扇区号: (3468MOD64)MOD $8=4$

02.【解答】
- 磁盘读取时间分析
  - 基本参数
    - 转速: 27毫秒/转
    - 每磁道9条记录
    - 每条记录读取时间: $27/9=3\mathrm{ms}$
  - 连续读取分析
    - 总时间计算: $8{\times}(27+3)+(3+2)=245\mathrm{ms}$
    - 另解:9圈读取 $243\mathrm{ms}$ + $2\mathrm{ms}$ 处理 = $245\mathrm{ms}$
  - 优化存储布局
    ![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/2109e6ea3d25d735f0217cce901e28c0e30feef1950700aba280410508d1ad42.jpg)
    - 优化后总时间: $6{\times}8+(3+2)=53\mathrm{ms}$

03.【解答】
- 磁盘调度算法分析
  - FCFS算法
    - 访问顺序:345,123,874,692,475,105,376
    - 移动磁道数:$222+751+182+217+370+271=2013$
  - SSTF算法  
    - 访问顺序:345,376,475,692,874,123,105
    - 移动磁道数:$(874-345)+(874-105)=1298$
  - SCAN算法
    - 访问顺序:345,123,105,0,376,475,692,874
    - 移动磁道数:$222+18+105+376+99+217+182=1219$
  - LOOK算法
    - 访问顺序:345,123,105,376,475,692,874
    - 移动磁道数:$222+18+271+99+217+182=1009$
  - C-SCAN算法
    - 访问顺序:345,123,105,0,999,874,692,475,376
    - 移动磁道数:$222+18+105+999+125+182+217+99=1967$
  - C-LOOK算法
    - 访问顺序:345,123,105,874,692,475,376
    - 移动磁道数:$222+18+769+182+217+99=1507$
04.【解答】
- 磁盘整理前后读取数据块时间比较
  - 整理前
    - 逻辑上相邻数据块平均距离为13磁道
    - 读一块数据时间: $13\!\times\!6+100+25=203\mathrm{ms}$
    - 读取100块文件总时间: $203\!\times\!100=20300{\mathrm{ms}}$
  - 整理后  
    - 逻辑上相邻数据块平均距离为2磁道
    - 读一块数据时间: $2{\times}6+100+25=137\mathrm{ms}$
    - 读取100块文件总时间: $137{\times}100=13700{\mathrm{ms}}$

05.【解答】
- 磁盘读取性能分析
  - 磁盘旋转特性
    - 逆时针旋转按扇区顺序为 $0,3,6$
    - 相邻扇区间隔2个扇区,用于数据传输
  - 时间计算
    - 旋转速度: 3000转/分 = 50转/秒 = $20\mathrm{ms}$/转
    - 读一个扇区时间: $20/8=2.5\mathrm{ms}$
    - 读扇区并传输时间: $2.5{\times}3=7.5\mathrm{ms}$
    - 读全部扇区总时间: $20/2+8{\times}7.5=70\mathrm{ms}=0.07\mathrm{s}$
  - 数据传输速率
    - 每磁道数据量: $8{\times}512=4\mathrm{KB}$
    - 传输速率: $\mathrm{4KB/0.07s}=4{\times}1024\mathrm{kB/(1000\times0.07s)}=58.5\mathrm{kB/s}$

# 注意
- 存储容量、文件大小: K=1024(大写K)
- 传输速率: k=1000(小写k)

06.【解答】
- 磁盘空闲管理与调度分析
  - 位图表示
    - 每位表示一个磁盘块
    - 总需内存: $16384/32=512$个字 = $512{\times}4\mathrm{B}=2\mathrm{KB}$
  - C-SCAN调度分析
    ![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/4737a0bb680b7ace7ba67edc2d4fef06a1c89f36365b80fe994cddf202236c1c.jpg)
    - 移动磁道数: $20+90+20+40=170$
    - 总移动时间: $170\mathrm{ms}$
    - 平均旋转延迟: 5ms
    - 总旋转延迟: $20\mathrm{ms}$
    - 读取扇区时间: $0.4\mathrm{ms}$
    - 总时间: $190.4\mathrm{ms}$
  - Flash存储器分析
    - FCFS策略更高效
    - 原因:无需考虑寻道时间和旋转延迟

07.【解答】
- 磁盘物理地址计算
  - 磁盘容量计算
    - 公式: 柱面数×每柱面磁道数×每磁道扇区数×每扇区大小
    - 结果: $(300{\times}10{\times}200{\times}512/1024)\,\mathrm{KB}=3{\times}10^{5}\mathrm{KB}$
  - SSTF算法访问顺序
    - 起始位置: 85号柱面
    - 访问顺序: 100260,101660,110560,60005
  - 簇号物理地址转换
    - 柱面号: $\lfloor100530/(10{\times}200/2)\rfloor=100$
    - 磁头号: $\lfloor530/(200/2)\rfloor=5$
    - 扇区号: $(530{\times}2)\%200=60$

08.【解答】
- 系统启动与磁盘格式化
  - 系统启动顺序
    - ROM引导程序
    - 磁盘引导程序
    - 分区引导程序
    - 操作系统初始化程序
  - 磁盘操作顺序
    - 物理格式化
    - 磁盘分区
    - 逻辑格式化
    - 操作系统安装
  - 操作功能说明
    - 物理格式化: 划分扇区、排列顺序、标记坏道
    - 磁盘分区: 划分独立存储空间
    - 逻辑格式化: 建立引导记录、文件表等
    - 系统安装: 最后执行


