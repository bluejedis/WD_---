#  $\mathbf{\ast7.1.5}$  答案与解析  

# 一、单项选择题  

01.B  

I/O设备不可能直接与主板总线相连，它总是通过设备控制器来相连的。  

02.B 每个汉字占用 $16\!\times\!16/8=32\mathrm{B}$ ，则汉字库容量 $\mathbf{\Sigma}=7500{\times}32\mathbf{B}=240000\mathbf{B}\approx240\mathbf{K}\mathbf{B}.$  

03.B  

刷新存储器中存储单元的字长取决于显示的颜色数，颜色数为 $m$ ，字长为 $n$ ，二者的关系为 $2^{n}\!=\!m$ 。本题中的颜色数为 $256=2^{8}$ ，因此刷新存储器单元字长为8位。刷新存储器的容量是每个像素点的位数和像素点个数的乘积，因此刷新存储器的容量为 $1024{\times}1024{\times}8\mathrm{bit}=1\mathrm{MB}$  

04.D  

刷新所需带宽 $=$ 分辨率 $\times$ 色深 $\times$ 顺频 $=1600{\times}1200{\times}24{\mathrm{bit}}{\times}85{\mathrm{Hz}}=3916.8{\mathrm{M}}{\mathrm{b}}/{\mathrm{s}}$ ，显存总带宽的 $50\%$ 用来刷新屏幕，于是需要的显存总带宽至少为 $3916.8/0.5=7833.6\mathrm{M}\mathrm{b}/\mathrm{s}\approx7834\mathrm{M}\mathrm{b}/\mathrm{s}.$  



# 7.2.6 答案与解析  

单项选择题  

01.A  

在统一编址的情况下，没有专门的I/O指令，因此用访存指令来实现I/O操作，区分存储单元和/0设备是靠它们各自不同的地址码。  

02.D  

I/O接口的功能有： $\textcircled{\scriptsize{1}}$ 选址功能、 $\circledcirc$ 传送命令功能、 $\textcircled{3}$ 传送数据功能、 $\textcircled{4}$ 反映I/O设备工作状态的功能。选项工可参考唐朔飞老师的《计算机组成原理》教材，为设置接口的原因之一，也是接口应具有的功能；选项Ⅱ属于 $^{(4)}$ ：选项IⅢ属于 $\mathcal{Q}$ ：选项IV属于 $\circledast$  

03.D  

D显然正确。按照不同的数据传送格式，可将接口分为并行接口和串行接口，A错误；在统一编址方式下，存储单元和I/O设备是靠不同的地址码而非地址线来区分的，B错误；在独立编址方式下，存储单元和IO设备是靠不同的指令来区分的，C错误。  

04.C IO接口中的寄存器主要有数据缓冲寄存器、控制寄存器和状态寄存器。  

05.B 统一编址时，直接使用指令系统中的访存指令来完成输入/输出操作；独立编址时，则需要使用专门的输入/输出指令来完成输入/输出操作。  

06.D  

I/O指令是指令系统的一部分，是机器指令的一类，但其为了反映与I/O设备交互的特点格式和其他通用指令相比有所不同。  

07.D  

在统一编址的情况下，访存指令也可访问I/O设备，A、B、C错误。在独立编址的方式下，访问I/O地址空间必须通过专门的I/O指令，D正确。  

08.C  

统一编址方式把I/O端口当作存储器的单元进行地址分配，CPU不需要设置专门的I/O指令（即输入/输出类指令），用统一的访存指令就可以访问1/O端口。  

09.D  

在统一编址方式下，指令靠地址码区分内存和I/O设备，若随意在地址的任何地方编址，将给编程造成极大的混乱，D错误。选项A、B、C的做法都是可取的。  

10.B 磁盘驱动器向盘片磁道记录数据时采用串行方式写入。  

11.A 物理地址是外部连接使用的，且是唯一的，它与“地址总线相对应”；而逻辑地址是内部和编程使用的，并不唯一。在内存中的实际地址就是所谓的“物理地址”，而逻辑地址就是用于逻辑段管理内存的，因此程序员使用逻辑地址访问设备。  
12.D  

对打印机的中断控制过程通常是：CPU先将需要打印的字符编码送到打印控制接口（也称打印适配器）中，打印控制接口再将字符编码转换为点阵信息，然后通过电缆传送到打印机，以控制打印针头在何处进行打印。同时，打印控制接口需要将“初始化”“选通”“自动走纸”等控制信息通过电缆传送到打印机，并通过电缆把打印机的“联机”“忙”“缺纸”等状态信号取到打印控制接口，以供CPU读取。中断请求信号是打印控制接口通过中断控制器发送给CPU的，因此不在打印控制接口和打印机之间进行交换，D错误。  

13.B  

CPU和主存通过I/O总线和I/O接口连接，I/O接口通过通信总线和外设相连。  

14.A  

I/O接口中主机侧通过1/O总线与主机相连，设备侧通过通信总线（电缆）与外设相连。显然，1/O总线中的数据线宽度和连接设备的电缆中的数据线宽度不一定相同。  

15. D  

1/O总线分为三类：数据线、控制线和地址线。数据缓冲寄存器和命令/状态寄存器的内容都是通过数据线来传送的：地址线用以传送与CPU交换数据的端口地址；而控制线用于给I/O端口发送读/写信号，仅用于对端口进行读/写控制。中断类型号用于指出中断向量的地址，CPU响应某一外部中断后，就从数据总线上获取该中断源的中断类型号，然后据此计算对应中断向量在中断向量表（存放在内存中）的位置。因此1、Ⅱ和Ⅲ均正确。  

16.D  

采用统一编址时，CPU访存和访问I/O端口用的是一样的指令，所以访存指令可访问I/O端口，D错误。其他三个选项均为正确陈述。  

17.D  

I/O端口是指I/O接口中用于缓冲信息的寄存器，由于主机和I/O设备的工作方式和工作速度有很大差异，I/O端口应运而生。在执行一条指令时，CPU使用地址总线选择所请求的I/O端口，使用数据总线在CPU寄存器和端口之间传输数据。  

18.A  

1/O接口即1/O控制器，其功能是接收主机发送的1/O控制信号，并实现主机和外部设备之间的信息交换。磁盘驱动器是由磁头、磁盘和读/写电路等组成的，也就是我们平常所说的磁盘本身，A错误。选项B、C和D均为I/O控制器。  



# 7.3.5 答案与解析  

# 一、单项选择题  

01.B  

当有多个中断请求同时出现时，中断服务系统必须能从中选出当前最需要给予响应的且最重要的中断请求，这就需要预先对所有的中断进行优先级排队，这个工作可由中断判优逻辑来完成排队的规则可由软件通过对中断屏蔽寄存器进行设置来确定。  

02.C  

中断服务程序是处理器处理的紧急事件，可理解为一种服务，是事先编好的某些特定的程序，一般属于操作系统的模块，以供调用执行，A正确。中断向量由向量地址形成部件，即由硬件产生，并且不同的中断源对应不同的中断服务程序，因此通过该方法，可以较快速地识别中断源，B正确。中断向量是中断服务程序的入口地址，中断向量地址是内存中存放中断向量的地址，即中断服务程序入口地址的地址，C错误。重叠处理中断的现象称为中断嵌套，D正确。  

03.D  

外部事件如按Esc键以退出运行的程序等，属于外中断，I正确。Cache完全是由硬件实现的，不会涉及中断层面，Ⅱ错误。虚拟存储器失效如缺页等，会发出缺页中断，属于内中断，Ⅲ正确。浮点数运算下溢，直接当作机器零处理，而不会引发中断，IV错误。浮点数上溢，表示超过了浮点数的表示范围，属于内中断，√正确。  

04.C  

DMA方式不需要CPU干预传送操作，仅在开始和结尾借用CPU一点时间，其余不占用CPU任何资源：中断方式是程序切换，每次操作需要保护和恢复现场，所以DMA优先级高于中断请求，从而可以加快处理效率，I正确。从I的分析可知，程序中断需要中断现行程序，因此需保扩现场，以便中断执行完后还能回到原来的点去继续没有完成的工作；DMA方式不需要中断现行程序，CPU仅仅做一些辅助性工作，因为主存和DMA接口之间有一条数据通路，所以无须使用CPU内部寄存器，也就无须保护现场，ⅡI正确。IⅡI的说法正好相反。  
> attention  

程序中断的保护现场是由中断服务子程序完成的，不同中断源对应的中断子程序是不同的，可以理解为因DMA方式无须使用CPU内部寄存器，所以其对应的中断服务子程序也无须保存CPU现场。此外，“DMA方式无须保护现场”是唐朔飞老师所撰教材中的原话。  

05.B  

程序中断过程是由硬件（称中断隐指令）和中断服务程序共同完成的，I正确。在每条指令执行结束时（而不是执行过程中），CPU统一扫描各个中断源，检查有无中断请求，ⅡI错误。CPU会在每个存储周期（总线周期）结束后检查是否有DMA请求，而不是在一条指令执行过程的末尾，Ⅲ错误。中断服务程序的最后指令通常是中断返回指令，与无条件转移指令不同的是，它不仅要修改PC值，而且要将CPU中的所有寄存器都恢复到中断前的状态，IV错误。  

06.B  

只有具有DMA接口的设备才能产生DMA请求，即使当前设备是高速设备或需要与主机批量交换数据，若没有DMA接口的话，也不能产生DMA请求。  

07. C  

中断向量地址是中断向量表的地址，因为中断向量表保存着中断服务程序的入口地址，所以中断向量地址是中断服务程序入口地址的地址。  

08.C  

CPU响应中断必须满足下列3个条件：  $\textcircled{\scriptsize{1}}$  CPU接收到中断请求信号。首先中断源要发出中 断请求，同时CPU还要收到这个中断请求信号。 $\circledcirc$ CPU允许中断，即开中断。 $\circledast$ 一条指令执行完毕。因此中断响应是在指令执行末尾，C正确。  

09.B  

DMA操作结束、机器出现故障、执行“软中断”指令时都会产生中断请求。一条指令执行 完毕可能响应中断请求，但它本身不会引起中断请求。  

10.A  

用户程序需要输入/输出时，需要调用操作系统提供的接口（请求操作系统服务），此时会使得访管中断，系统由用户态转为核心态。  

11.B  

屏蔽字“1”表示不可被中断，“0”表示可被中断。由3级中断的屏蔽字可知，它屏蔽所有中断，优先级最高；再由1级中断的屏蔽字可知，它屏蔽除3外的所有中断，优先级次之；以此类推，可知选B。  

【另解】“1”越多表示优先级越高，因此屏蔽其他中断源就越多。  

12. C  

中断隐指令并不是一条由程序员安排的真正的指令，因此不可能把它预先编入程序中，只能在响应中断时由硬件直接控制执行。中断隐指令不在指令系统中，因此不属于程序控制指令。  

13.A 在中断响应周期，CPU主要完成关中断、保护断点、发中断响应信号并形成中断向量地址的工作，即执行中断隐指令。  
14.D  

CPU总是在一条指令结束时检查外中断请求，因此对外中断的响应只可能发生在一条指令结束时。中断I/O方式下，CPU执行中断服务程序时会执行相应的I/O指令，实现CPU的通用寄存器和外设接口中的寄存器之间的直接数据交换。中断请求就是要求CPU执行程序来处理发生的相关事件。选项D在下列两种情况下错误： $\textcircled{\scriptsize{1}}$ 关中断时，CPU检测不到中断请求，因此不会进入中断响应周期； $\circledcirc$ 当有中断请求的请求源被中断屏蔽字屏蔽时，也不会进入中断响应周期。  

15.A  

在中断响应周期中，采用硬件方法保护并更新PC内容，而不由软件完成，这样可以避免因为软件保存和恢复PC内容而造成的时间开销和错误风险，提高中断处理的效率和正确性。  

16.C  

因为CPU无法对发生的中断请求立即进行处理，因此需要在I/O接口中设置中断触发器，以保存是哪些外设发出了中断请求，等CPU当前的指令周期结束后，响应中断并进行处理。  

17.B  

允许中断触发器置0表示关中断，在中断响应周期由硬件自动完成，即中断隐指令完成。虽然关中断指令也能实现关中断的功能，但在中断响应周期，关中断是由中断隐指令完成的。在恢复现场和屏蔽字的时候，也需要关中断的操作，此时是由关中断指令来完成的。  

18. C  

只有先关中断，才可以保护断点。若先不保护断点，则可能会丢失当前程序的断点。同理，在恢复现场前也要关中断。这个过程和操作系统中的信号量PV操作类似，都是将内部过程变为不可打断的原子操作。  

19.D  

中断优先级包括响应优先级和处理优先级，中断屏蔽标志改变的是处理优先级。中断响应优先级是由中断查询程序或中断判优电路决定的，它反映的是多个审断同时请求时哪个先被响应，即审断服务程序开始执行的顺序。在多重中断系统中，中断处理优先级决定了本中断是否能打断正在执行的中断服务程序，决定了多个中断服务程序执行完的次序。  

20.B  

PC的内容是被中断程序尚未执行的第一条指令地址，PSW寄存器保存各种状态信息。CPU响应中断后，需要保护中断的CPU现场，将PC和PSW压人堆栈，这样等到中断结束后，就可以将压入堆栈的原PC和PSW的内容恢复到相应的寄存器，原程序从断点开始继续执行。  

21.B、D  

在程序查询方式中，CPU与外设串行工作，传送与主程序串行工作。在中断方式中，CPU与外设并行工作，当数据准备好时仍需中断主程序以执行数据传送，因此传送与主程序仍是串行的。在DMA方式中，CPU与外设、传送与主程序都是并行的。  

22. C  

按启动查询方式的不同，程序查询方式可分为定时查询方式和独占查询方式。在程序查询方式中，由CPU负责数据的传送。每完成一次数据传送后，将主存地址加1，计数值减1。  

23. C  

在DMA方式中，由外部设备向DMA控制器发出DMA请求信号，然后由DMA控制器向CPU发出总线请求信号。DMA控制器在传送期间有总线控制权，此时CPU不能响应I/O中断。  
24.C  

程序中断方式在数据传输时，首先要发出中断请求，此时CPU中断正在进行的操作，转而进行数据传输，直到数据传送结束，CPU才返回中断前执行的操作。DMA方式只是在后处理阶段需要用中断方式请求CPU做结束处理，但在整个数据传送过程，并不需要中断请求，A错误。DMA方式和程序中断方式都有中断请求，但自的不同，程序中断方式的中断请求是为了进行数据传送，而DMA方式的中断请求是在DMA传送结束后请求CPU做DMA结束处理，B错误、C正确。CPU对DMA的响应可在指令执行过程中的任何两个存取周期之间，D错误。  

25.A  

一个完整的DMA过程主要由DMA控制器控制，但也需要CPU参与控制，只是CPU干预比较少，只需在数据传输开始和结束时干预，从而提高了CPU的效率。  

26.A  

每个机器周期结束后，CPU就可以响应DMA请求。注意区别：DMA在与主存交互数据时通过周期窃取方式，窃取的是存取周期。  

27.B  

DMA请求的是总线的使用权，因此CPU对DMA请求的响应时机是一个总线周期结束时。在流水线CPU中，流水段的长度以最复杂的操作所花的时间为准，总线周期（访存时间）通常是耗时最长的，因此通常可认为总线周期、存取周期、机器周期和流水段长度是等价的。  

28.A  

DMA连接的是高速设备，其优先级高于中断请求，以防止高速设备数据丢失，A正确。DMA请求的响应时间可以发生在每个机器周期结束时，只要CPU不占用总线：审断请求的响应时间只能发生在每条指令执行完毕，B错误。DMA的优先级要比外中断（非屏蔽中断、可屏蔽中断）高，C错误。若不开中断，则内中断和非屏蔽中断仍可响应，D错误。  

29.B  

DMA方式只能用于数据传输，它不具有对异常事件的处理能力，不能中断现行程序，而键盘和鼠标均要求CPU立即响应，因此无法采用DMA方式。  

30.C  

只有DMA方式是靠硬件电路实现的，三种基本的程序控制方式即直接程序传送、程序中断、通道控制都需要程序的干预。  

31.A 中断发生时，程序计数器内容的保护和更新是由硬件自动完成的，即由中断隐指令完成。  

32.B DMA传送数据时，挪用周期不会改变CPU现场，因此无须占用CPU的PC和寄存器。  

33.B  

DMA方式的数据传送不经过CPU，但需要经过DMA控制器中的数据缓冲寄存器。输入时，数据由外设（如磁盘）先送往DMA的数据缓冲寄存器，再通过数据总线送到主存。反之，输出时，数据由主存通过数据总线送到DMA的数据缓冲寄存器，然后送到外设。  

34.D  

当采用周期挪用进行DMA数据传送时，每当CPU收到DMAC的总线申请，就将下一个总线周期的总线控制权交给DMAC。DMAC利用这个总线周期完成一个数据字的传送后，立即将总线控制权交回给CPU，因此这里的总线周期也等于存取周期的长度。  

35.D  

DIMA方式主要用于磁盘等高速设备的成批数据传送，这类高速设备的记录方式多采用数据块组织方式，因此每启动一次DMA传送，外设和主机之间就完成一个数据块的数据传送。  
36.C  

传送信息所在的通用寄存器编号不包含在初始化信息中，因为数据不是通过CPU中的通用寄存器来传输的，而是直接通过DMA控制器进行数据传输的。  

37.A  

外部中断是指CPU执行指令以外的事件产生的中断，通常指来自CPU与内存以外的中断。选项A中键盘输入属于外部事件，每次键盘输入CPU都需要执行中断以读入输入数据，所以能引起外部中断。选项B中除数为O属于异常，也就是内中断，发生在CPU内部。选项C中浮点运算下溢将按机器零处理，不会产生中断。而选项D中访存缺页属于CPU执行指令时产生的中断，也不属于外部中断。所以能产生外部中断的只能是输入设备键盘。  

38.A  

在单级（或单重）中断系统中，不允许中断嵌套。中断处理过程为： $\textcircled{\scriptsize{1}}$ 关中断； $\circledcirc$ 保存断点；

 $\textcircled{3}$ 识别中断源： $\textcircled{4}$ 保存现场； $\circledast$ 中断事件处理； $^\mathrm{\textregistered}$ 恢复现场； $\circleddash$ 开中断； $^\mathrm{\textregistered}$ 中断返回。其中 $\textcircled{\scriptsize{1}}$  $\textcircled{3}$ 由硬件完成， $\scriptstyle(4)\sim\left(8\right)$ 由中断服务程序完成。  

39. D  

中断响应优先级是由硬件线路（或查询程序）决定的，不便改动，而中断处理优先级可以利用屏蔽字技术来动态调整。1表示屏蔽该中断源的请求，0表示可以被该中断源中断。从中断处理优先级来看， $\mathrm{L}_{1}$ 只能屏蔽 $\mathrm{L}_{3}$ 和其自身，因此中断屏蔽字 $\mathrm{M}_{4}\mathrm{M}_{3}\mathrm{M}_{2}\mathrm{M}_{1}\mathrm{M}_{0}\,{=}\,01010$  

40.C  

每秒至少查询200次，每次查询至少500个时钟周期，则每秒最少占用  $200{\times}500=100000$  个 时钟周期，因此占CPU时间的百分比为 $100000/50\mathbf{M}=0.20\%$  

41.B  

在响应外部中断的过程中，中断隐指令完成的操作包括： $\textcircled{\scriptsize{1}}$ 关中断： $\circledcirc$ 保存断点； $\textcircled{3}$ 引出中断服务程序（形成中断服务程序入口地址并送PC），所以只有I、IⅢI正确。ⅡI中保存通用寄存器的内容是在进入中断服务程序后首先进行的操作。  

42.D  

中断I/O方式：在I/O设备输入每个数据的过程中，由于无须CPU干预，因此可使CPU与I/O设备并行工作。仅当输完一个数据时，才需CPU花费极短的时间去做一些中断处理。因此中断申请使用的是CPU处理时间，发生的时间是在一条指令执行结束之后，数据在软件的控制下完成传送。而DMA方式与之不同。DMA方式：数据传输的基本单位是数据块，即在CPU与I/O设备之间，每次传送至少一个数据块；DMA方式每次申请的是总线的使用权，所传送的数据是从设备直接送入内存的，或者相反；仅在传送一个或多个数据块的开始和结束时，才需要CPU干预，整块数据的传送是在控制器的控制下完成的。中断I/O方式不适合高速外设；多路型DMA控制器也适合同时为多个慢速外设服务，D错误。  

43.B  

每 $400\mathrm{ns}$ 发出一次中断请求，而响应和处理时间为 $100\mathrm{ns}$ ，其中允许的延迟为干扰信息，因为在50ns内，无论怎么延迟，每 $400\mathrm{ns}$ 仍要花费 $100\mathrm{ns}$ 处理中断，所以该设备的1/O时间占整个CPU时间的百分比为 $100\mathrm{ns}/400\mathrm{ns}=25\%$  

44.B  

在程序中断I/O方式中，CPU和打印机直接交换，打印字符直接传输到打印机的I/O端口，不会涉及主存地址。而CPU和打印机通过I/O端口中的状态口和控制口来实现交互。  
45.B  

多重中断在保护被中断进程现场时关中断，执行中断处理程序时开中断，B错误。CPU一般在一条指令执行结束的阶段采样中断请求信号，查看是否存在中断请求，然后决定是否响应中断，A、D正确。中断是指来自CPU执行指令以外的事件，C正确。  

46.C  

中断优先级分为响应优先级和处理优先级，响应优先级由硬件排队器（或中断查询程序）决定，处理优先级由屏蔽字决定，而非请求的先后次序决定。中断隐指令完成的工作有： $\textcircled{\scriptsize{1}}$ 关中断： $\textcircled{2}$ 保存断点： $\textcircled{3}$ 引出中断服务程序，通用寄存器的保护由中断服务程序完成。中断充许状态（即开中断后），才能响应外部设备的中断请求，外部设备通常不能发出不可屏蔽中断，外部设备的中断请求通常是为了输入/输出，这些事件并不是系统级的紧急事件，可以被屏蔽或延迟处理，若充许外部设备发出不可屏蔽中断，则可能影响系统的稳定性和安全性。有中断请求时，若是关中断的状态，或新中断请求的优先级较低，则不能响应新的中断请求。  

47.A  

设备接口中的数据缓冲寄存器为32位，即一次中断可以传输4B数据，设备数据传输速率为50kB/s，共需要12.5k次中断，每次中断开销为1000个时钟周期，CPU主频为1GHz，则CPU用于该设备输入/输出的时间占整个CPU时间的百分比最多是（ $12.5\mathrm{k}{\times}1000){\div}1\mathrm{G}=1.25\%.$  

48.D  

每类设备都配置一个设备驱动程序，设备驱动程序向上层用户程序提供一组标准接口，负责实现对设备发出各种具体操作指令，用户程序不能直接和DMA打交道。DMA的数据传送过程分为预处理、数据传送和后处理3个阶段。预处理阶段由CPU完成必要的准备工作，数据传送前由DMA控制器请求总线使用权；数据传送由DMA控制器直接控制总线完成；传送结束后，DMA控制器向CPU发送中断请求，CPU执行中断服务程序做DMA结束处理。  

49.C  

访存时缺页属于内部异常，I错误；定时器到时描述的是时钟中断，属于外部中断，Ⅱ正确；网络数据包到达描述的是CPU执行指令以外的事件，属于外部中断，IⅢI正确。  

50.B  

由CPU内部产生的异常称为内中断，内中断是不可屏蔽中断。通过中断请求线INTR和NMI，从CPU外部发出的中断请求称为外中断，通过INTR信号线发出的外中断是可屏蔽中断，而通过下M信号线发出的是不可屏蔽中断。不可屏蔽中断即使在关中断！ $(\mathrm{IF}=0$ ）情况下也被响应，A正确。不可屏蔽中断的优先级最高，任何时候只要发生不可屏蔽中断，都要中正现行程序的执行，转到不可屏蔽中断处理程序执行，C正确。CPU响应中断需要满足3个条件： $\textcircled{\scriptsize{1}}$ 中断源有中断请求： $\circledcirc$ CPU允许中断及开中断： $\textcircled{3}$ 一条指令执行完毕，且没有更紧道的任务。所以B错误。  

51.C  

周期挪用法由DMA控制器挪用一个或几个主存周期来访问主存，传送完一个数据字后立即释放总线，是一种单字传送方式，每个字传送完后CPU可以访问主存，C错误。停止CPU访存法则是指在整个数据块的传送过程中，使CPU脱离总线，停止访问主存。  

52.A  

中断服务程序在内核态下执行，若只能在用户态下检测和响应中断，则显然无法实现多重中断（中断嵌套），A错误。在多重中断中，CPU只有在检测到中断请求信号后（中断处理优先级更低的中断请求信号是检测不到的），才会进入中断响应周期。进入中断响应周期时，说明此时CPU一定处于中断允许状态，否则无法响应该中断。若所有中断源都被屏蔽（说明该中断的处理优先级最高），则CPU不会检测到任何中断请求信号。  
53.C  

中断1/O方式适用于字符型设备，此类设备的特点是数据传输速率慢，以字符或字为单位进行传输，A正确。若采用中断I/O方式，当外设准备好数据后，向CPU发出中断请求，CPU暂时中止现行程序，转去运行中断服务程序，由中断服务程序完成数据传送，B正确。若外设准备数据的时间小于中断处理时间，则可能导致数据丢失，以输入设备为例，设备为进程准备的数据会先写入设备控制器的缓冲区（缓冲区大小有限），缓冲区每写满一次，就向CPU发出一次中断请求，CPU响应并处理中断的过程，就是将缓冲区中的数据“取走”的过程，因此若外设准备数据的时间小于中断处理时间，则可能导致外设往缓冲区写入数据的速度快于CPU从缓冲区取走数据的速度，从而导致缓冲区的数据被覆盖，进而导致数据丢失，C错误。若采用中断1/O方式，则外设为某进程准备数据时，可令该进程阻塞，CPU运行其他进程，D正确。  

54.D  

A和B显然正确。开中断时，CPU在执行完一条指令时检测中断请求信号，若检测到中断请 求信号，就立即响应；即便是多重中断，CPU正在处理某个中断的过程中，由于中断屏蔽字的存在，因此CPU检测不到处理优先级更低的中断请求信号，若检测到中断请求信号，则说明其处理优先级更高，同样也立即响应，C正确。外设通过中断控制器向CPU发中断请求信号，CPU响应中断请求后开始执行中断服务程序，中断服务程序执行结束后CPUJ自行返回（中断服务程序的最后一条指令是返回指令），无须外设发中断结束信号，D错误。  

55.C  

DMA在预处理和后处理阶段需要CPU来处理，而数据传输阶段由DMA控制器完成。  

# 二、综合应用题  

01.【解答】  

没有。通常所说的DMA方式在主存和I/O设备之间建立一条“直接的数据通路”，使得数据在主存和1/O设备之间直接进行传送，其含义并不是在主存和1/O之间建立一条物理直接通路，而是主存和1/O设备通过1/O设备接口、系统总线及总线桥接部件等相连，建立一个信息可以相互通达的通路，这在逻辑上可视为直接相连的。其“直接”是相对于要通过CPU才能和主存相连这种方式而言的。  

02.【解答】  

I/O设备传送一个数据的时间为 $1\!\cdot\!(4\!\times\!10^{4})\mathrm{s}\,=\,25\upmu\mathrm{s}$ ，所以请求中断的周期为 $25\upmu\mathrm{s}$ ，而相应中断处理程序的执行时间为 $40\upmu\mathrm{s}$ ，大于请求中断的周期，会丢失数据（单位时间内I/O请求数量比中断处理的多，自然会丢失数据），所以不能采用中断方式。  

03.【解答】  

1）CPU每秒对鼠标进行30次查询，所需的时钟周期数为  $100\!\times\!30=3000$  。CPU的时钟频 率为 $50\mathrm{MHz}$ ，即每秒 $50\!\times\!10^{6}$ 个时钟周期，因此对鼠标的查询占用CPU的时间比率为 $[3000\div(50\times10^{6})]\times100\%=0.006\%$  可见，对鼠标的查询基本不影响CPU的性能。  

2）对于硬盘，每32位（4B）被CPU查询一次，因此每秒查询次数为 $2{\times}2^{20}\mathrm{B}{\div}4\mathrm{B}=512\mathrm{K}$ 则每秒查询的时钟周期数为  
因此对硬盘的查询占用CPU的时间比率为  

$$
[52.4{\times}10^{6}{\div}(50{\times}10^{6})]{\times}100\%=105\%
$$  

可见，即使CPU将全部时间都用于对硬盘的查询，也不能满足磁盘传输的要求，因此CPU一般不采用程序查询方式与磁盘交换信息。  

04.【解答】  

1）中断屏蔽字“1”表示不可被中断，“0”表示可被中断。根据表中“1”的个数的降序排列可知，4个中断源的处理次序是 $3{\rightarrow}1{\rightarrow}4{\rightarrow}2$  

2）当4个中断源同时有中断请求时，由于硬件排队的优先次序是 $1{\rightarrow}2{\rightarrow}3{\rightarrow}4$ ，因此CPU先响应1的请求，执行1的服务程序。该程序中设置了屏蔽字1101，因此开中断指令后转去执行3服务程序，且3服务程序执行结束后文回到了1服务程序。1服务程序结束后，CPU还有2、4两个中断源请求未响应。由于2的响应优先级高于4，因此CPU先响应2的请求，执行2服务程序。在2服务程序中由于设置了屏蔽字0100，意味着1、3、4可中断2服务程序。而1、3的请求已经结束，因此在开中断指令后转去执行4服务程序，4服务程序执行结束后又回到2服务程序的断点处，继续执行2服务程序，直至该程序执行结束。CPU执行程序的轨迹如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/9a199a4504ab4a6368665d690ca8f3a11784f3bb23a4586c960f5b40abcbf3c6.jpg)  

05.【解答】  

根据字符设备的传输速率为 $9600{\mathrm{b/s}}$ ，得每秒能传输 $9600/8=1200\mathrm{B}$ ，即1200个字符（本题中字符、字节不加以区分）  

1）若采用DMA方式，传输1200个字符共需1200个存取周期，考虑到每传400个字符需中断处理一次，因此DMA方式每秒因数据传输占用处理器的时间是  

$$
5\upmu\mathrm{s}\times(1200/400)=15\upmu\mathrm{s}
$$  

2）若采用中断方式，每秒因数据传输占用处理器的时间是  

$$
5\upmu\mathrm{s}{\times}1200=6000\upmu\mathrm{s}
$$  

06.【解答】  

1）采用程序查询方式，硬盘传输速率为1MB/s，一个字为 $32\mathrm{{bit}\ensuremath{\mathbf{=4}}\mathrm{{B}}}$ ，每秒查询的次数为 $1\mathrm{MB}/4\mathrm{B}=2.5{\times}10^{5}$ ，每秒查询所需的总时钟周期数为 $2.5{\times}10^{5}{\times}100=2.5{\times}10^{7}$  

CPU的时钟频率为 $50\mathrm{MHz}$ 因此，I/O查询所花费的时间比率为 $2.5{\times}10^{7}{\div}50\mathbf{M}=2.5{\times}10^{7}{\div}(5{\times}10^{7})=50\%$  

2）采用中断方式时，每传输一个字便进行一次中断处理。  

每秒产生的中断次数为 $1\,\mathrm{MB}/4\mathrm{B}=2.5{\times}10^{5}$ 次。每秒用于传输的开销为 $2.5{\times}10^{5}{\times}80=2{\times}10^{7}$ 个时钟周期。因此花费的时间比率为 $(2{\times}10^{7})\div(5{\times}10^{7})=40\%$  

3）采用DMA方式时，CPU所花时间仅为启动时间和后处理时间。每传输一次数据CPU所花的时间为 $1000+500=1500$ 个时钟周期。  
DMA平均传送长度为4000B，每秒产生的DMA次数为 $1\mathrm{MB/s}\!\cdot\!(4\!\times\!10^{3}{\bf B})=250$ 因此，CPU为DMA所花费时间的比率为（ $(1500{\times}250){\div}50\mathrm{M}=0.75\%$  

07.【解答】  

1）按题意，外设每秒传送 $0.5\mathrm{MB}$ ，中断时每次传送 $32\mathrm{bit}=4\mathrm{B}$ 。由于CPI为5，在中断方式下，CPU每次用于数据传送的时钟周期为 $5{\times}18+5{\times}2=100$ （中断服务程序 $^+$ 其他开销）。为达到外设 $0.5\mathrm{MB/s}$ 的数据传输速率，外设每秒申请的中断次数为 $0.5\mathrm{MB}/4\mathrm{B}=125000$ 。1秒内用于中断的开销为 $100{\times}125000=12500000=12.5\mathrm{M}$ 个时钟周期。CPU用于外设I/O的时间占整个CPU时间的百分比为 $12.5\mathrm{M}/500\mathrm{M}=2.5\%\,.$  

2）当外设数据传输速率提高到5MB/s时改用DMA方式传送，每次DMA传送一个数据块，大小为5000B，则1秒内需产生的DMA次数为 $5\mathrm{MB}/5000\mathrm{B}=1000$ CPU用于DMA处理的总开销为 $1000\!\times\!500=500000=0.5{\bf M}$ 个时钟周期。CPU用于外设I/O的时间占整个CPU时间的百分比为 $0.5\mathbf{M}/500\mathbf{M}=0.1\%\,_{\circ}$  

08.【解答】  

本题涉及多个考点：计算机的性能指标、存储器的性能指标、DMA的性能分析、DMA方式的特点及多体交叉存储器的性能分析。1）平均每秒CPU执行的指令数为 $80\mathbf{M}/4=20\mathbf{M}$ ，因此MIPS数为20。平均每条指令访存1.5次，因此平均每秒Cache缺失的次数 $=20\mathrm{M}{\times}1.5{\times}(1-99\%)=300\mathrm{K}$ 。当Cache缺失时，CPU访问主存，主存与Cache之间以块为传送单位，此时主存带宽为 $16\mathrm{B}{\times}300\mathrm{k/s}\,{=}\,4.8\mathrm{MB/s}.$ 在不考虑DMA传送的情况下，主存带宽至少达到4.8MB/s才能满足CPU的访存要求。2）题中假定在Cache缺失的情况下访问主存，平均每秒产生缺页中断 $300000{\times}0.0005\%=1.5$ 次。因为存储器总线宽度为32位，所以每传送32位数据，磁盘控制器发出一次DMA请求，因此平均每秒磁盘DMA请求的次数至少为 $1.5{\times}4\mathrm{KB}/4\mathrm{B}=1.5\mathrm{K}=1536.$ 3）CPU和DMA控制器同时要求使用存储器总线时，DMA请求的优先级更高。因为，若DMA请求得不到及时响应，I/O传输数据可能会丢失。4）4体交叉存储模式能提供的最大带宽为 $\scriptstyle4\times4\mathrm{B}/50\mathrm{ns}\,=\,320\mathrm{MB}/\mathrm{s}\,.$  

09.【解答】  

1）每传送一个ASCII码字符，需要传输的位数有1位起始位、7位数据位（ASCII码字符占7位）、1位奇校验位和1位停止位，因此总位数为 $1+7+1+1=10.3$ ?I/O端口每秒最多可接收 $1000/0.5=2000$ 个字符。  

2）一个字符传送时间包括：设备D将字符送1/O端口的时间、中断响应时间和中断服务程序前15条指令的执行时间。时钟周期为 $1\dot{-}50\mathrm{MHz}=20\mathrm{ns}$ ，设备D将字符送I/O端口的时间为 $0.5\mathrm{ms}/20\mathrm{ns}\,{=}\,2.5{\times}10^{4}$ 个时钟周期。一个字符的传送时间约为 $2.5{\times}10^{4}+10+15{\times}4=25070$ 个时钟周期。完成1000个字符传送所需的时间约为 $1000{\times}25070=25070000$ 个时钟周期。CPU用于该任务的时间约为 $1000{\times}(10+20{\times}4)=9{\times}10^{4}$ 个时钟周期。在中断响应阶段，CPU主要进行以下操作：关中断、保护断点和程序状态、识别中断源。  

10.【解答】  

1）程序定时向缓存端口查询数据，由于缓存端口大小有限，必须在传输完端口大小的数据时访问端口，以防正部分数据未被及时读取而丢失。设备A准备32位数据所用的时间为 $\begin{array}{r}{4\mathbf{B}/2\mathbf{MB}=2\upmu\mathrm{s},}\end{array}$ ，所以最多每隔 $2\upmu\mathrm{s}$ 必须查询一次，每秒的查询次数至少是 $1\mathrm{s}/2\upmu\mathrm{s}=5{\times}10^{5}$ 每秒CPU用于设备A输入/输出的时间至少为 $5{\times}10^{5}{\times}10{\times}4\,=\,2{\times}10^{7}$ 个时钟周期，占整个CPU时间的百分比至少是 $2{\times}10^{7}{\div}500\mathbf{M}=4\%.$  
2）中断响应和中断处理的时间为 $400{\times}(1/500\mathrm{M})=0.8\upmu\mathrm{s}$ ，这时只需判断设备B准备32位数据要多久，若准备数据的时间小于中断响应和中断处理的时间，则数据被刷新，造成丢失。经过计算，设备B准备32位数据所用的时间为 $4{\bf B}/40\,\mathrm{MB}=0.1\upmu\mathrm{s}$ ，因此设备B不适合采用中断1/0方式。  

3）在DMA方式中，只有预处理和后处理需要CPU处理。设备B每秒的DMA次数最多为 $40\mathbf{MB}/\mathrm{s}{\div}1000\mathbf{B}=40000$ ，CPU用于设备B输入/输出的时间最多为 $40000{\times}500=2{\times}10^{7}$ 个时钟周期，占CPU总时间的百分比最多为 $(2\!\times\!10^{7})/500\mathbf{M}=4\%$  

11.【解析】  

1）3个字段的名称为柱面号（或磁道号）、磁头号（或盘面号）、扇区号。由于每个盘面有20000个磁道，因此该磁盘共有20000个柱面，柱面号字段至少占 $\left\lceil\log_{2}20000\right\rceil\!=\!15$ 位：由于该磁盘共有4个盘片，每个盘片有2个盘面，因此磁头号字段至少占 $\log_{2}(4{\times}2)=3$ 位；由于每个磁道有500个扇区，因此扇区号字段至少占 $\left\lceil\log_{2}500\right\rceil\!=\!9$ 位。  

2）一个扇区的访问时间由寻道时间、延迟时间、传输时间三部分组成。平均寻道时间为5ms，平均延迟时间等于磁盘转半圈所需要的时间，平均传输时间等于一个扇区划过磁头下方所需要的时间。而该磁盘转一圈的时间为 $(60\!\times\!10^{3})/7200\!\approx\!8.33\mathrm{ms}$ ，因此一个扇区的平均访问时间约为 $5+8.33/2+8.33/500\,{\approx}\,9.18\mathrm{ms}\,.$  

3）磁盘控制器中的数据缓冲区每充满一次，DMA控制器就需要发出一次总线请求，将这64bit数据通过总线传送到主存，因此，在一个扇区的读/写过程中，DMA控制器向CPU发送了 $512\mathrm{B}/64\mathrm{bit}=64\$ 次总线请求。由于采用周期挪用DMA方式，因此当CPU和DMA控制器都需要访问主存时，DMA控制器可以优先获得总线使用权。因为一旦磁盘开始读/写，就必须按时完成数据传送，否则数据缓冲区中的数据会发生丢失。  
