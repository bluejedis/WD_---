# 5.1.5 答案与解析  

# 一、单项选择题  

01.C  

控制器由程序计数器PC、指令寄存器IR、存储器地址寄存器MAR、存储器数据寄存器MDR、指令译码器、时序电路和微操作信号发生器等组成。程序状态字寄存器（PSW）属于运算器的组成部分，PSW包括两个部分：一是状态标志，如进位标志（CF）、结果为零标志（ZF）等，大多数指令的执行将会影响到这些标志位；二是控制标志，如中断标志、陷阱标志等。  
02.D  

存放指令的寄存器是指令寄存器，A错误。存放程序状态字的寄存器是程序状态字寄存器，B错误。通用寄存器本身并不一定具有计数逻辑和移位逻辑功能，C错误。  

03.A  

指令寄存器用于存放当前正在执行的指令。  

04.B  

程序计数器用于存放下一条指令在主存储器中的地址，具有自增功能。  

05.B  

指令寄存器用于存放当前正在执行的指令：程序计数器用于存放下一条指令的地址；地址寄存器用于暂存指令或数据的地址；程序状态字寄存器用于保存系统的运行状态。条件转移指令执行时，需要对标志寄存器的内容进行测试，判断是否满足转移条件。  

06.B 数据总线的位数与处理器的位数相同，它表示CPU一次能处理的数据的位数，即CPU的位数。  

07. C  

指令寄存器中存放当前正在执行的指令，不需要用户的任何干预，所以对用户是透明的。其他三种寄存器的内容可由程序员指定。  

08.A  

CPU根据程序计数器PC中的内容从主存储器中取指令。读者可能会想到无条件转移指令或中断返回指令，认为不一定总是根据PC读出。实际上，当前指令正在执行时，PC已经是下一条指令的地址。若遇到无条件转移指令，则只需简单地用跳转地址覆盖原PC的内容即可，最终的结果还是根据PC从主存储器中读出。地址寄存器用来指出所取数据在主存储器中的地址。  

09.B  

控制器是计算机中处理指令的部件，包含程序计数器。  

10.C  

PC中存放下一条要执行的指令的地址，A正确。PC的值会根据CPU在执行指令的过程中修改（确切地说是在取指周期），或自增，或转移到程序的某处，B正确。转移指令时，需要判别转移是否成功，若成功则PC修改为转移指令的目标地址，否则下一条指令的地址仍然为PC自增后的地址，C错误。PC的位数通常和MAR的位数一样，D正确。  

11.B  

程序计数器（PC）用于指出下一条指令在主存储器中的地址。可以用字节地址表示指令地址，此时PC的位数与存储器地址的位数相等，而存储器地址的位数取决于存储器的容量；也可以用字地址表示指令地址，这种情况下指令必须采用按边界对齐的方式存放，此时PC的位数 $=$ 存储器地址的位数-log（指令字长的字节数)。可知，PC的位数取决于存储器的容量和指令字长。  

12.B  

机器指令中不能显式地使用PC，PC的值是自增的，或者是由转移类指令设置的。指令顺序执行时，PC自动加1，这里的“1”是指一条指令的长度，PC的值不一定总是自动加1，而是根据指令长度来确定的，具体取决于指令长度占几个编址单位。其余说法均正确。  

13.C  
指令寄存器中保存当前正在执行的指令，所以其位数取决于指令字长。  

14. C 通用寄存器用于存放操作数和各种地址信息等，其位数与机器字长相等，因此便于操作控制。  

15.B  

通用寄存器供用户自由编程，可以存放数据和地址。而指令寄存器是专门用于存放指令的专用寄存器，不能由通用寄存器代替。  

16.D  

程序状态字寄存器用于存放程序状态字，而程序状态字的各位表征程序和机器的运行状态，如含有进位标志（CF）、结果为零标志（ZF）等。  

17.D 程序状态字寄存器用于保留算术、逻辑运算及测试指令的结果状态。  

18.C  

标志寄存器是专用寄存器，不需要编号，也不能在指令中直接指定编号来访问；标志寄存器中的内容是执行指令的过程中，CPU根据指令执行的结果生成的各种标志信息，用户不能直接修改它的值。标志寄存器中的标志位主要用于条件转移或条件设置类指令的条件判断。  

19.C 控制器的功能是取指令、分析指令和执行指令，执行指令就是发出有关操作控制信号。  

指令包括操作码字段和地址码字段，但指令译码器仅对操作码字段进行译码，借以确定指令的操作功能。  

21.C  

地址译码器是主存等存储器的组成部分，其作用是根据输入的地址码唯一选定一个存储单元，它不是CPU的组成部分。而MAR、IR、PC都是CPU的组成部分。  

22.A  

地址译码器位于存储器，I正确；程序计数器中存放的是欲执行指令的地址，ⅡI错误；程序计数器决定程序的执行顺序，IⅢI正确；程序状态字寄存器对用户不透明，IV错误。  

23.B  

间址周期的作用是取操作数的有效地址，因此，间址周期结束后，MDR中的内容为操作数地址。  

24.B  

计算机按字节编址，指令字长为32位，占4字节，指令按字边界对齐方式存放，则指令存放的起始地址必须是4字节的整数倍， $4\mathrm{GB}/4\mathrm{B}=2^{30}$ ，故PC的宽度至少是30位。  

25.B  

汇编语言程序员可见的是程序计数器（PC），即汇编语言程序员通过汇编程序可以对某个寄存器进行访问。汇编程序员可以通过指定待执行指令的地址来设置PC的值，如转移指令、子程序调用指令等。而IR、MAR、MDR是CPU的内部工作寄存器，对程序员不可见。  

26.B  

程序计数器（PC）用于指出下一条指令在内存中的地址，虽然可以用32位的地址来表示指令地址，但实际上内存中最多只能存放4GB/32位 $=2^{30}$ 条指令，故可以用30位的字地址来表示指令地址，这种情况下指令必须采用按边界对齐的方式存放，故PC的位数至少是30位，即PC给出的地址是学地址。题干已说明指令按字边界对齐的方式存放，也就是说，指令地址都是4字节的整数倍，因此为了让PC的位数最少，可以采用字地址，取指令时将PC值左移2位到主存中取指令。指令寄存器（IR）用于存放从内存中取出的指令，它取决于指令字长，敌IR的位数至少是32位。  
# 二、综合应用题  

01.【解答】  

CPU中的专用寄存器有程序计数器（PC）、指令寄存器（IR）、存储器数据寄存器（MDR）、存储器地址寄存器（MAR）和程序状态字寄存器（PSW）。  


# 5.2.5 答案与解析  

单项选择题  

01.A  

时钟周期是计算机操作的最小时间单位，为主频的倒数。指令周期则可由多个CPU周期（即机器周期）组成。总线周期是指一次总线操作所需的时间，通常为一个或多个时钟周期。  

02.D  

CPU从主存中每取出并执行一条指令所需的全部时间称为指令周期：时钟周期通常称为节拍或 $T$ 周期，它是CPU操作的最基本单位；指令周期可分为若干机器周期：存取周期是指存储器进行两次独立的存储操作（连续两次读或写操作）所需的最小间隔时间。  

03.C  

指令周期是指CPU从主存取出一条指令加上执行这条指令的时间，间址周期不是必需的。  

04.B  

首先在取指周期结束后，PC值自动加1：在执行周期中，PC值修改为要跳转到的地址。综上，在一条无条件跳转指令的指令周期内，程序计数器（PC）的值被修改了2次。  

05.D 在取指操作后，程序计数器中的内容将被修改为下一条指令的地址，而不是当前指令的地址。  

06.B 取指操作是自动进行的，控制器不需要得到相应的指令。  

07.B  

不同长度的指令，其取指操作可能是不同的。例如，双字指令、三字指令与单字指令的取指操作是不同的。  

08.A 指令周期的第一个机器周期是取指周期，即从主存中取出指令字的时间。  

09.B  

存储器进行一次读或写操作所需的时间称为存储器的读/写时间，而连续启动两次独立的读或写操作（如连续两次读操作）所需的最短时间称为存取周期。机器周期通常由存取周期确定。  

10.D  

在指令的执行周期完成后，处理器会判断是否出现中断请求，只有在出现中断请求时才会进入中断周期。  

11.D  

机器周期是指令执行中每步操作（如取指令、存储器读、存储器写等）所需要的时间，每个机器周期的长度可变。各种指令的功能不同，因此各指令执行所需的机器周期数是可变的。  

12.C  

指令的间址分为一次间址、两次间址和多次间址，因此它们的操作是不同的，A、B错误。存储器间址通过形式地址访存，寄存器间址通过寄存器内容访存，C正确。  

13.A  

存储器本身无法区分存储单元中存放的是指令还是数据。而在控制器的控制下，计算机在不同的阶段对存储器进行读/写操作时，取出的代码也就有不同的用处。而在取指阶段读出的二进制代码为指令，在执行阶段读出的二进制代码则可能为数据；运算器和数据通路显然不能区分。  
14.A  

指令字长一般都取存储字长的整数倍，若指令字长等于存储字长的2倍，则需要两次访存，取指周期等于机器周期的2倍：若指令字长等于存储字长，则取指周期等于机器周期，因此I错。根据1的分析可知，Ⅱ正确。指令字长取决于操作码的长度、操作数地址的长度和操作数地址的个数，与机器字长没有必然的联系。但为了硬件设计方便，指令字长一般取字节或存储字长的整数倍，因此ⅢI正确。根据IⅢI的分析可知，指令字长一般取字节或存储字长的整数倍，而不一定都和存储字长一样大，因此IV错误。综上所述，IⅡI、IⅢI正确。  

15.A  

单周期CPU执行任何指令的时间不一定都会小于多周期CPU，这取决于单周期CPU和多周期CPU的时钟周期的长短，以及该指令在多周期CPU下所需的时钟周期数，故A错误。  

16.C  

虽然指令和数据都以二进制形式存放在存储器中，但CPU可以根据指令周期的不同阶段来区分是指令还是数据，通常在取指阶段取出的是指令，在执行阶段取出的是数据。本题容易误选选项A，需要清楚的是，CPU只有在确定取出的是指令后，才会将其操作码送去译码，因此不可能依据译码的结果来区分指令和数据。  

17. C  

由于不采用指令预取技术，每个指令周期都需要取指令，而不采用Cache技术，因此每次取指令都至少要访存一次（当指令字长与存储字长相等且按边界对齐时），A正确。时钟周期是CPU的最小时间单位，每个指令周期一定大于或等于一个CPU时钟周期，B正确。即使是空操作指令，在取指操作结束后，PC也会自动加1，C错误。由于机器处于“开中断”状态，在每条指令执行结束时都可能被外部中断打断。  


# 5.3.6 答案与解析  

# 一、单项选择题  

01.C  

对CPU而言，数据通路的基本结构分为总线结构和专用数据通路结构，其中总线结构又分为单总线结构、双总线结构、多总线结构。  

02.D  

数据通路中的部件包括组合逻辑元件和时序逻辑元件。数据通路的功能由控制部件送出的控制信号决定。数据通路中一个重要的组合逻辑元件为ALU，用于执行各类算术和逻辑运算：另一个重要的元件为通用寄存器，属于时序逻辑元件。  

03.D  

由于ALU是一个组合逻辑电路，因此其运算过程中必须保持两个输入端的内容不变。又由于CPU内部采用单总线结构，因此为了得到两个不同的操作数，ALU的一个输入端与总线相连，另一个输入端需通过一个寄存器与总线相连。此外，ALU的输出端也不能直接与内部总线相连，否则其输出又会通过总线反馈到输入端，影响运算结果，因此输出端需通过一个暂存器（用来暂存结果的寄存器）与总线相连。  

04.C  

三态门可视为一种控制开关，由控制端决定信号线的通断，能输出到内部总线的部件均通过一个三态门与内部总线相连，用于控制该部件与内部总线之间数据通路的连接与断开。  

05.B  

当CPU内部电路采用总线连接方式时，总线上信号流动的原则如下：每个时刻只有一个器件发出信息（否则会导致总线冲突），每个时刻可以有一个或多个器件接收信息。  

06.C  

多周期CPU中的指令通常需要多个时钟周期才能完成， $\mathrm{CPI}>1$ ：单周期CPU的每条指令在一个时钟周期内完成， ${\mathrm{CPI}}=1$ 。单周期CPU的时钟周期取决于最复杂指令的执行时间，通常比多周期CPU的时钟周期长。在一条指令的执行过程中，单周期CPU的每个控制信号保持不变，每个部件只能使用一次；多周期CPU的控制信号可能会发生改变，同一个部件可使用多次。  

07.D  

采用CPU内部总线方式的数据通路的特点：结构简单，实现容易，性能较低，存在较多的冲突现象：不采用CPU内部总线方式的数据通路的特点：结构复杂，硬件量大，不易实现，性能高，基本不存在数据冲突现象。  

08. D  

读/写控制信号线决定了是从存储器读还是向存储器写，显然A、B、C都正确。  

09.A  

单周期处理器中所有指令的指令周期为一个时钟周期，D正确。因为每条指令的CPI为1，要考虑比较慢的指令，所以处理器的时钟频率较低，B正确。单总线数据通路将所有寄存器的输入输出端都连接在一条公共通路上，一个时钟内只充许一次操作，无法完成指令的所有操作，A错误。控制信号是CUJ根据指令操作码发出的信号，对于单周期处理器来说，每条指令的执行只有一个时钟周期，而在一个时钟周期内控制信号并不会变化；若是多周期处理器，则指令的执行需要多个时钟周期，在每个时钟周期控制器会发出不同信号，C正确。  
10.C  

指令执行过程中数据所经过的路径，包括路径上的部件，称为数据通路。ALU、通用寄存器、状态寄存器、Cache、MMU、浮点运算逻辑、异常和中断处理逻辑等，都是指令执行过程中数据流经的部件，都属于数据通路的一部分。数据通路中的数据流动路径由控制部件控制，控制部件根据每条指令功能的不同，生成对数据通路的控制信号。C错误。  

11.B  

组合逻辑元件（操作元件）不含存储信号的记忆单元，任荷时刻产生的输出仅取决于当前的输入，加法器、算术逻辑单元（ALU）、译码器、多路选择器、三态门等都属于操作元件。时序逻辑元件（状态元件）包含存储信号的记忆单元，各类寄存器和存储器，如通用寄存器组、程序计数器、状态/移位/暂存/锁存寄存器等，都属于状态元件。  

# 二、综合应用题  

01.【解答】  

实现ADDR1，（R2）的微操作序列如下：  

微操作(PC）→MAR M→MDR (PC）+1→PC (MDR)→IR (R1)→LA (R2)→MAR M→MDR (MDR)→LB (LA)+(LB)→R1  

02.【解答】  

两条指令的微操作序列和控制信号如下。  

（1）ADDB，C指令。  

微操作控制信号(PC)→→MAR PCout，MARin （PC）+1-PC+1M（MAR)→MDR→IRMDRout,IRin(B）→Y Bout, Yin (Y)+（C）→2 Cout, ALUin,  $^+$  （Z）→B Zout,Bin  

（2）SUBACC，H指令。  

微操作控制信号(PC)→MAR PCout,MARin （PC）+1→PC+1M（MAR)→MDR→IRMDRout,IRin(ACC)→Y ACCout,Yin （Y)-（H）→ZHout,ALUin，(Z)→ACC Zout, Accin  

注：Y是与ALU的一个输入端相连接的暂存器。  

03.【解答】  

指令ADD（R0），R1的功能是把R0的内容作为地址送到主存中取得一个操作数，再与R1中的内容相加，最后将结果送回主存，即实现 $((\mathrm{R0}))+(\mathrm{R1}){\rightarrow}(\mathrm{R0})$ 。其流程和控制信号如下。  
1）取指周期：公共操作。
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/f84dcc120dcbcfbb34c20c3c0e2d3b161154967efc1a7f373c7aad2a8b361004.jpg)  

2）取数周期：完成取数操作，被加数在主存中，加数已经放在寄存器R1中。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/c1689d23e868609146eb52b0b8b1aedad58f47993bdcf50c2c623e9874652d62.jpg)  

3）执行周期：完成加法运算，并将结果返回主存。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/2540636a89137a158d85bb6d41d0bf7c59cd9273fdfeb3629886f3ab92ea9388.jpg)  

04.【解答】  

1）b单向连接微控制器，由微控制器的作用可以推出b是IR；a和c直接连接主存，只可能是MDR和MAR，c到主存是单向连接，a和主存双向连接，根据指令执行的特点，MAR只单向给主存传送地址，而MIDR既存放从主存中取出的数据，又存放将要写入主存的数据，因此c为MAR，a为MDR。d具有自动加1的功能，且单向连接MAR，为PC。因此，a为MDR，b为IR，c为MAR，d为PC。  

2）将指令地址从PC送入MAR，在相关的控制下从主存中取出指令送至MDR，然后将 MIDR中的指令送至IR，最后流向微控制器。取指令的数据通路为  

3）根据MAR中的地址从主存取数据，将取出的数据送至MDR，然后将MIDR中的数据送至ALU进行运算，运算的结果送至ACC。存储器读的数据通路为  

将ACC中的结果送至MDR，再将MDR中的数据写入主存。存储器写的数据通路为MAR（先置数据地址），ACC一MDR→主存M  

4）指令LDAX的数据通路为  

5）指令ADDY的数据通路为  

Y→MAR→主存→MDR ALU-ACC ACC  
6）指令STAZ的数据通路为（ACC中的数据需放在主存中）  

05.【解答】  

1）各功能部件的连接关系及数据通路如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/661f3bd2a04fb0d03925070f3545a20e3ada5d050a8767e107c91dfee82e5fee.jpg)  

2）分析过程如下：  

取指令地址送到IR并译码。  

取源操作数和目的操作数。  

·将源操作数和自的操作数相加送到MAR，随之送到以前目的操作数所在内存的地址  

·将寄存器R2的内容加1。  

取指周期流程如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/5e642dab1517448c221e2f35932a2d3e4cc15b395ee72b510e1bea53e8fd904c.jpg)  

06.【解答】  

ADDX，D指令周期信息流程和相应的控制信号见下表。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/00894e01e9f848466f0d413b5b0e69aac60af02ee9f98c3242d2099f24d175cb.jpg)  
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/020b8c5c3f3fe53ff8e37feda0fad8fdf539f6981833563b7305a4354a63c1b4.jpg)  
注：题目中的D即为Ad（IR）。  

07.【解答】  

题干已给出取值和译码阶段每个节拍的功能和有效控制信号，我们应以了解取指阶段中数据通路的信息流动为突破口，读懂每个节拍的功能和有效控制信号，然后应用到解题思路中，包括划分执行步骤、确定完成的功能、需要的控制信号。  

先分析题干中提供的示例（本部分解题时不做要求）  

取指令的功能是根据PC的内容所指的主存地址，取出指令代码，经过MIDR，最终送至IR。这部分和后面的指令执行阶段的取操作数、存运算结果的方法是相通的。  

C1:（PC)→MAR  

在读/写存储器前，必须先将地址（这里为（PC））送至MAR。  

C2:  $\mathrm{M(MAR){\rightarrow}M D R,(PC)+1{\rightarrow}P C}$  

读/写的数据必须经过MDR，指令取出后PC自增1。  

C3:（MDR)→IR  

然后将读到的MDR中的指令代码送至IR进行后续操作。  

指令“ADD（RI），RO”的操作数一个在主存中，一个在寄存器中，运算结果在主存中。根据指令功能，要读出R1的内容所指的主存单元，必须先将RI的内容送至MAR，即（R1）→MAR。而读出的数据必须经过MDR，即 $\mathrm{M(MAR)}{\rightarrow}\mathrm{MDR}.$  

因此，将R1的内容所指的主存单元的数据读出到MDR的节拍安排如下：  

C5:(R1)→MAR  

C6:  $\mathrm{M(MAR){\rightarrow}M D R}$  

ALU一端是寄存器A，MDR或RO中必须有一个先写入A中，如MDR。  

C7:（MDR)→A  

然后执行加法操作，并将结果送入寄存器AC。  

C8:  $(\mathrm{A})+(\mathrm{R0}){\rightarrow}\mathrm{AC}$  

之后将加法结果写回到R1的内容所指的主存单元，注意MAR中的内容没有改变。  

C9:(AC)-→MDR  

C10:(MDR)→M(MAR)  

有效控制信号的安排并不难，只需看数据是流入还是流出，如流入寄存器X就是Xin，流出寄存器X就是Xout。还需注意其他特殊控制信号，如 $\mathrm{PC}+1$ 、Add等。  

于是得到参考答案如下表所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/cb4b5ddf9bd5083ae3ddadfec8991f8731b5c91376408050705d1020631f6e88.jpg)  
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/bcefe925038a14ac746560481899c5f7a468b6b712162df1beece18df4e0e2ce.jpg)  

本题答案不唯一，若在C6执行 $\mathrm{M(MAR){\rightarrow}M D R}$ 的同时，完成 $(\mathrm{R0}){\rightarrow}\mathrm{A}$ （即选择将(R0）写入A），并不会发生总线冲突，这种方案可节省1个节拍，见下表。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/0dd137c83beecb2b28a61c379ac984e23d0e38bce599b8df60bfd1bfd409483b.jpg)  

08.【解答】  

1）程序员可见寄存器为通用寄存器（ $\mathrm{R}0\!\sim\!\mathrm{R}3$ ）和PC。因为采用了单总线结构，因此若无暂存器T，则ALU的A、B端口会同时获得两个相同的数据，使数据通路不能正常工作。  

2）ALU共有7种操作，其操作控制信号ALUop至少需要3位；移位寄存器有3种操作，其操作控制信号SRop至少需要2位。  

3）信号SRout所控制的部件是一个三态门，用于控制移位器与总线之间数据通路的连接与断开。  

4）端口 $\textcircled{\scriptsize{1}}$ 、 $\circledcirc$ 、 $\textcircled{3}$ 、 $\circledast$ 、 $\circledast$ 须连接到控制部件输出端。  

5）连线1， $(\!(6)\!\!\to\!\!(9)$ ：连线2， $\textcircled{v}{\rightarrow}\textcircled{4}$  

6）因为每条指令的长度为16位，按字节编址，所以每条指令占用2个内存单元，顺序执行时，下条指令地址为 $(\mathrm{PC})+2$ 。MUX的一个输入端为2，可便于执行 $(\mathrm{PC})+2$ 操作。  

09.【解析】  

1）符号标志SF表示运算结果的正负性，因此 $\mathrm{SF}=\mathrm{F}_{15}$ 对于加法运算 $\mathrm{A}+\mathrm{B}{\rightarrow}\mathrm{F}$ ，若A、B为负，且F为正，则说明发生溢出：或者，若A、B为正，且F为负，也说明发生溢出。因此，加运算时，溢出标志 $\mathrm{OF}\!=\!\overline{{\mathbf{A}_{15}}}\cdot\overline{{\mathbf{B}_{15}}}\cdot\!\mathrm{F}_{15}\!+\!\mathbf{A}_{15}\!\cdot\!\mathbf{B}_{15}\!\cdot\!\overline{{\mathbf{F}_{15}}}$ 对于减法运算 $\mathrm{A-B\!\to\!F}$ ，若A为负、B为正，且F为正，则说明发生溢出；或者，若A为正、B为负，且F为负，也说明发生溢出。因此，减运算时，溢出标志 $\mathrm{OF}\!=\!\overline{{\mathbf{A}_{15}}}\cdot\!\mathbf{B}_{15}\!\cdot\!\mathrm{F}_{15}+$  $\mathrm{A}_{15}\cdot\overline{{\mathrm{B}_{15}}}\cdot\overline{{\mathrm{F}_{15}}}$ 。  

2）因为在单总线结构中，每一时刻总线上只有一个数据有效，而ALU有两个输入端和一个输出端。因此，当ALU运算时，需要先用暂存器Y缓存其中一个输入端的数据，再通过总线传送另一个输入端的数据。与此同时，ALU的输出端产生运算结果，但由于总线正被占用，因此需要暂存器Z，以缓存ALU的输出端数据。  

3）由图可知，rs和rd都是4bit，因此GPRs中最多有 $2^{4}=16$ 个通用寄存器；rs和rd来自指令寄存器IR；rd表示寄存器编号，应连接地址译码器。  

4）取指阶段需要根据程序计数器PC取出主存中的指令，并将指令写入指令寄存器IR中。控制信号序列如下：  
$\textcircled{\scriptsize{1}}$ PCout,MARin/将指令的地址写入MAR $\circledcirc$ Read//读主存，并将读出的数据写入MDR $\circledast$  MDRout,IRin //将MDR的内容写入指令寄存器IR 步骤 $\circledcirc$ 需要1个时钟周期，步骤 $\circledcirc$ 需要5个时钟周期，步骤 $\textcircled{3}$ 需要1个时钟周期，因此取指  

5）图中控制信号由控制部件（CU）产生。指令寄存器IR和标志寄存器FR的输出信号会连 到控制部件的输入端。  



# 5.4.5 答案与解析  

# 一、单项选择题  

01.D  

取指令阶段完成的任务是将现行指令从主存中取出并送至指令寄存器，这个操作是公共的操 作，是每条指令都要进行的，与具体的指令无关，所以不需要操作码的控制。  

02.B  

CU的输入信号来源如下： $\textcircled{\scriptsize{1}}$ 经指令译码器译码产生的指令信息： $\circledcirc$ 时序系统产生的机器周期信号和节拍信号： $\textcircled{3}$ 来自执行单元的反馈信息即标志。前两者是主要因素。  

03.C  

执行公用的取指微程序从主存中取出机器指令后，由机器指令的操作码字段指出各个微程序 的入口地址（初始微地址）。  

04.D  

微指令的设计目标和指令结构的设计目标类似，都是基于执行速度、灵活性和指令长度这三个主要方面考虑的。而控制存储器容量的大小与微指令的设计自标无关。  

05.D  

在微程序控制中，控制存储器中存放有微指令，在执行时需要从中读出相应的微指令，从而增加了时间消耗。  

06.C  

字段直接编码方式为了缩短微指令字长而牺牲了速度，当微命令个数为4时需要3位，2位会导致每个编码都输出一个微命令，而不能表示不输出，1错误。Ⅱ正确。垂直型微指令的缺点是微程序长、执行速度慢、工作效率低，Ⅲ错误。在字段间接编码方式中，一个字段的某些微命令要由另一个字段的某些微命令来解释，即依赖另一个字段的译码输出，IV正确。  

07.C  
微程序控制存储器用来存放微程序，是微程序控制器的核心部件，属于CPU的一部分，而不属于主存。  

08.D  

硬布线控制器采用硬件电路，速度较快，但设计难度大、成本高。微程序控制器的速度较慢但灵活性高。通常控制存储器采用ROM组成。微指令计数器决定了微指令执行的顺序。  

09.B  

硬布线控制器需要结合各个微操作的节拍安排，综合分析，写出逻辑表达式，再设计成逻辑电路图，因此时序系统比较复杂；而微程序只需按照节拍的安排，顺序执行微指令，因此比较简单。  

10.D  

在微程序控制器中，控制部件向执行部件发出的控制信号称为微命令，微命令执行的操作称为微操作。微指令则是若干微命令的集合，若干微指令的有序集合称为微程序。  

11.B  

在一个CPU周期中，一组实现一定功能的微命令的组合构成一条微指令，有序的微指令序列构成一段微程序，微程序的作用是实现一条对应的机器指令。  

12. B  

一条水平型微指令能定义并执行几种并行的基本操作；一条垂直型微指令只能定义并执行一种基本操作。  

13. C  

垂直型微指令是一种微指令格式，相比于水平型微指令而言的，并不是指令格式垂直表示，在微指令中设置了微操作码字段，结构类似于机器指令格式。控制信号经过编码产生是一种控制字段的编码方法，属于水平型微指令，强调并行控制功能是一种控制字段的设计目标，适合水平型微指令而不适合垂直型微指令。  

14.A  

在同一个CPU周期中，可以同时出现的微命令叫相容性微命令，不允许同时出现的微命令叫互斥性微命令。不充许同时出现的原因有可能是会引起总线冲突，也有可能是其他原因。  

15.B  

微处理器是相对于一些大型处理器而言的，与微程序控制器没有必然联系。不管是采用微程序控制器，还是采用硬布线控制器，微机的CPU都是微处理器，I错误。微程序的设计思想就是将每条机器指令编写成一个微程序，每个微程序包含若干微指令，每条微指令对应一个或几个微操作命令，ⅡI正确。直接编码方式中每位代表一个微命令，不需要译码，因此执行效率最高，只是这种方式会使得微指令的位数大大增加，ⅢI错误。一条水平型微指令能定义并执行几种并行的基本操作，因此能够更充分利用数据通路的并行结构，IV正确。  

16. C  

微程序控制方式采用编程方式来执行指令，而硬布线方式则采用硬件方式来执行指令，因此硬布线方式速度较快，I错误。 $\upmu\mathrm{PC}$ 无法取代PC，因为它只在微程序中指向下一条微指令地址的寄存器。因此它也必然不可能知道这段微程序执行完毕后下一条是什么指令，Ⅱ错误。由于每条微指令执行时所发出的控制信号是事先设计好的，不需要改变，因此存放所有控制信号的存储器应为ROM，ⅢI正确。指令周期是从一条指令启动到下一条指令启动的间隔时间，而CPU周期是 机器周期，是指令执行中每步操作所需的时间，IV错误。  

17.A  

一条指令对应一个微程序，所以一个微程序的周期对应一个指令周期。  
18.B  

CPU控制器主要由三个部件组成：指令寄存器、程序计数器和操作控制器。状态条件寄存器通常属于运算器的部件，保存由算术指令和逻辑指令运行或测试的结果建立的各种条件码内容，如运算结果进位标志（CF）、运算结果溢出标志（VF）等。  

19.C  

断定法是指在微指令（后继地址字段）中直接明确指出下一条微指令的地址，这样相当于每 条都是转移微指令，此外，还有一些其他如条件测试和转移控制字段，也用于控制微指令的寻址。因此，后继微指令地址可由微程序设计者指定，或者根据微指令所规定的转移控制字段控制产生。  

20.D  

微程序控制器采用了“存储程序”的原理，每条机器指令对应一个微程序，因此修改和扩充容易，灵活性好，但每条指令的执行都要访问控制存储器，所以速度慢。硬布线控制器采用专门的逻辑电路实现，其速度主要取决于逻辑电路的延迟，因此速度快，但修改和扩展困难，灵活性差。  

21. C  

字段直接编码法将微命令字段分成若干小字段，互厅性微命令组合在同一字段中，相容性微命令分在不同字段中，每个字段还要留出一个状态，表示本字段不发出任何微命令。5个互斥类，分别包含7、3、12、5和6个微命令，需要3、2、4、3和3位，共15位。  

22.C  

计算机共有32条指令，各个指令对应的微程序平均为4条，则指令对应的微指令为 $32\!\times\!4=128$ 条，而公共微指令还有2条，整个系统中微指令的条数共为  $128+2=130$  条，所以需要  $\lceil\log_{2}\!130\rceil=$  8位才能寻址到130条微指令。  

23.B  

主存储器（MM）在CPU外，用于存储指令和数据，由RAM和ROM实现（主要是RAM）。控制存储器（CS）用来存放构成指令系统的所有微指令，是一种只读型存储器，机器运行时只读不写，在CPU的控制器内。控制存储器按照微指令的地址访问。  

24.D  

时钟脉冲信号的宽度称为时钟周期，时钟周期的倒数为机器主频。时钟脉冲信号由机器脉冲 源发出的脉冲信号经整形和分频后形成，时钟周期以相邻状态单元间组合逻辑电路的最大延迟为基准确定。对于单周期CPU，一个指令周期就是一个时钟周期，每个时钟周期执行一条新指令；对于多周期CPU，每个指令周期（包含若干时钟周期）执行一条新指令；对于流水线CPU，只有在理想情况下才能实现每个时钟周期执行一条新指令，选项D的描述有误。  

25.B  

该指令的两个源操作数分别采用寄存器、寄存器间接寻址方式，因此在取数阶段需要用到通用寄存器组（GPRs）和存储器（Memory）；在执行阶段，两个源操作数相加需要用到算术逻辑单元（ALU）。而指令译码器（ID）用于对操作码字段进行译码，向控制器提供特定的操作信号，在取数及执行阶段用不到。  

26.D  

汇编程序员可见的寄存器有基址寄存器（用于实现多道程序设计或者编制浮动程序）和状态/标志寄存器、程序计数器PC及通用寄存器组；而MAR、MDR、IR是CPU的内部工作寄存器，对汇编程序员不可见。微指令寄存器属于微程序控制器的组成部分，它是硬件设计者的任务，对汇编程序员是透明的（不可见的）。  
# 二、综合应用题  

01.【解答】  

${200}\mathrm{MHz}$   $=1/200\mathrm{MHz}=0.005\upmu\mathrm{s}.$  每个指令周期平均为2.5个CPU周期，每个CPU周期平均包括2个主频周期，所以一条指令的执行时间 $=2{\times}2.5{\times}0.005{\upmu}{\mathrm{s}}=0.025{\upmu}{\mathrm{s}}.$ 该机平均指令执行速度 $=1/0.025=40\mathrm{MIPS}.$ 2）每条指令平均包括5个CPU周期，每个CPU周期又包含4个主频周期，所以一条指令的执行时间 $=4{\times}5{\times}0.005{\upmu\mathrm{s}}=0.1{\upmu\mathrm{s}}.$ 该机平均指令执行速度 $=1/0.1=10\mathrm{MIPS}$ 3）由此可见，指令的复杂程度会影响平均指令执行速度。  

02.【解答】  

总的微指令条数 $=(4–1){\times}80+1=241$ 条，每条微指令占一个控制存储器单元，控制存储器CM的容量为2的 $n$ 次幂，而241刚好小于256，所以CM的容量 $=256{\times}32$ 位 $=1\mathrm{KB}$  

03.【解答】  

水平型微指令由操作控制字段、判别测试字段和后继地址字段三部分构成。因为微指令采用直接控制（编码）方式，所以其操作控制字段的位数等于微命令数，为28位。又由于后继微指令地址由后继地址字段给出，因此其后继地址字段的位数可根据控制存储器的容量（ $.512{\times}40$ 位）确定为9位 $(512=2^{9}$ )。当微程序出现分支时，后续微指令地址的形成取决于状态条件一一6个互斥的可判定外部条件，因此状态位应编码成3位。非分支时的后续微指令地址由微指令的后继地址字段直接给出。微指令的格式如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/450e1a38e2a3c6592dd4a91dc685a68125be5160303a09ea2bb15b847f6fa540.jpg)  

04.【解答】  

1）根据5个互斥类的微命令组，各组分别包含5、8、2、15、22个微命令，考虑到每组必须增加一种不发送命令的情况，条件测试字段应包含一种不转移的情况，则5个控制字段分别需给出6、9、3、16、23种状态，对应3、4、2、4、5位（共18位），条件测试字段取2位。根据微指令字长为28位，后继地址字段取  $28-18-2=8$  位，则其微指令 格式如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/93db4cd5f499d3cb210536da792fa6d7431dd289ab42c71d7c336a927c763bf3.jpg)  

2）根据后继地址字段为8位，微指令字长为28位，得出控制存储器的容量为 $2^{8}{\times}28$ 位。  

05.【解答】  

1）含有ACC的立即寻址，一个操作数隐藏在ACC中，立即寻址的加法指令执行周期的微操作命令及节拍安排如下：  

$T_{0}$  Ad（IR)→R1  $T_{1}$  (R1)  $^+$  (ACC)→R2  $T_{2}$  (R2)→ACC  

立即数→R1ACC ALU结果→ACC  

2）由于 $(\mathrm{PC})\,+\,1\!\to\!\mathrm{PC}$ 需由ALU完成，因此PC的值可作为ALU的一个源操作数，在ALU  
做加1运算得到 $(\mathrm{PC})+1$ 后，结果送至与ALU输出端相连的R2，然后送至PC。此题的关键是要考虑总线冲突的问题，因此，取指周期的微操作命令及节拍安排如下：  

$T_{0}$ (PC）→MAR，1→RPC通过总线送MAR $T_{1}$ M（MAR)→MDR，（PC) $^+$ 1→R2PC通过总线送ALU完成加1 $T_{2}$  $(\mathrm{{MDR}})\rightarrow\mathrm{{LR}}$ ，OP（IR）→微操作命令形成部件MDR通过总线送IR $T_{3}$ （R2）→PCR2通过总线送PC  


# 5.5.5 答案与解析  

# 单项选择题  

01.C  

自陷是人为设定的特殊中断机制，不是出现某些异常情况而产生的，C错误。  

02. C  

异常是CPU执行指令过程中发生的与当前指令执行有关的意外事件，而中断请求则是CPU外部的I/O部件或时钟等向CPU发出的与当前指令执行无关的意外事件。指令执行结果出现异常与当前指令执行有关，如运算溢出等，属于内中断中的故障。  

03.C  

如果在执行指令的过程中发生严重错误，如控制器出错、存储器校验错等，则程序将无法继续执行，只能终止。严重情况下，甚至要调出中断服务程序来重启系统。  

04. C  

CPU对于异常和中断的响应处理大体是一致的，都需要保存断点和程序状态字并转到相应的处理程序去执行，但有些细节并不一样。例如，检测到中断请求后，CPU必须通过“中断回答”信号启动中断控制器进行中断查询，以确定当前发出的优先级最高的中断请求，并通过数据线获取相应的中断类型号；而对于异常，CPU无须进行中断回答。  

05.B  

缺页、地址越界和除数为0都是执行某条指令时可能发生的故障，需要调出操作系统内核中相应的异常处理程序来处理，而Cachne缺失则由CPU硬件实现，无须调出异常处理程序进行处理。  

06.A  

中断周期用于响应中断，若有中断，则在指令的执行周期后进入中断周期。  

07.B  

无效操作码是由CPU在对某条指令译码时发现的，因而是内部异常。采样定时时间到、打印机缺纸、键盘缓冲满都与当前指令的执行无关，是由CPU外部的中断源发出的中断请求。  

08.D  

在硬件层，CPU中有检测异常和中断事件并将控制转移到操作系统内核执行的机制；在操作系统层，内核能通过进程的上下文切换将一个进程的执行转移到另一个进程的执行，它们都会产生异常控制流。响应异常/中断请求后，CPU执行的是异常/中断服务程序，是操作系统的内核程序。进程上下文切换由操作系统的内核程序实现，而异常/中断的响应则由硬件实现。  

补充知识：CPU所执行指令的地址序列称为CPU的控制流。在程序正常执行时，通过顺序执行指令或转移指令得到的控制流称为正常控制流。在正常执行过程中，因遇到异常或中断事件而引起用户程序的正常执行被打断所形成的意外控制流，称为异常控制流，  

09.C  

外部中断请求信号的检测总是在一条指令执行完之后，取下一条指令之前。因此，如果检测到有外部中断请求，那么响应中断请求并转到中断服务程序执行后，应返回到原来被中断的程序中已经执行完成的指令的下一条指令执行，而不返回到刚执行完的指令执行。  

10.D  

内部异常是指来自CPU内部产生的中断，如非法指令、地址非法、校验错、页面失效、运算溢出和除数为零等，以上都是在指令的执行过程中产生的，A正确。内部异常的检测是由CPU自身完成的，不必通过外部的某个信号通知CPU，B正确。内部异常不能被屏蔽，一旦出现应立即处理，C正确。对于非法指令、除数为零等异常，无法通过异常处理程序恢复故障，因此不能回到原断点执行，必须终止进程的执行，D错误。  
11. A  

中断是指来自CPU执行指令以外的事件，如设备发出的I/O结束中断，表示设备输入/输出已完成，希望处理机能向设备发出下一个输入/输出请求，同时让完成输入/输出后的程序继续运行。异常也称内中断，指源自CPU执行指令内部的事件。  

12.A  

自陷是一种内部异常，A错误。在×86中，用于程序调试的“断点设置”功能是通过自陷机制实现的，B正确。执行到自陷指令时，无条件或有条件地自动调出操作系统内核程序进行执行，C正确。CPU执行陷阱指令后，会自动地根据不同陷阶类型进行相应的处理，然后返回到陷阱指令的下一条指令执行，D正确。  

13.B  

系统调用属于自陷，“断点”为自陷指令的下一条指令地址。DMA传送结束后，DMA控制器需要向CPU发送中断请求，属于外中断，外中断的“断点”为下一条指令地址。打印机缺纸同样属于外部中断。页缺失属于内部异常中的故障，“断点”为发生敌障的指令地址，执行完缺页异常处理程序之后必须返回发生敌障的指令重新热行。  


# 5.6.7 答案与解析  

# 一、单项选择题  

01.D  

空间并行即资源重复，主要指多个功能部件共同执行同一任务的不同部分，典型的如多处理机系统。时间并行即时间重叠，让多个功能部件在时间上相互错开，轮流重叠执行不同任务的相同部分，因此流水CPU利用的是时间并行性，A错误。RISC都采用流水线技术，以提高资源利用率。但反过来并不成立，因为大部分CISC同样采用了流水线技术，B错误。流水CPU和多媒体CPU无必然联系，多媒体CPU是指能够处理多种媒体数据（如图像、音频、视频等）的CPU，它通常具有特殊的指令集和功能部件，与流水CPU的概念不同，C错误。  

02. A  

吞吐能力是指单位时间内完成的指令数。 $m$ 段流水线在第 $m$ 个时钟周期后，每个时钟周期都可以完成一条指令；而 $m$ 个并行部件在 $m$ 个时钟周期后能完成全部的 $m$ 条指令，等价于平均每个时钟周期完成一条指令。因此两者的吞吐能力等同。  

03.B 单流水线处理机执行12条指令的时间为 $3+(12-1))\Delta t=14\Delta t_{\odot}$  

04.C 这个超标量流水线处理机可以发送4条指令，所以执行指令的时间为 $3+(20-4)/4)\Delta t=7\Delta t$  

05.D 每个功能段的时间设定为取指、分析和执行部分的最长时间2ns，第一条指令在第5ns时执行完毕，其余的99条指令每隔2ns执行完一条，所以100条指令全部执行完毕所需的时间为 $(5+99{\times}2)\mathrm{ns}=203\mathrm{ns}$  
06.D  

指令执行过程中的各个子功能都需要包含在某个流水段中，每条指令都会依次进入所有流水段进行处理。不同指令的复杂度不同，所需的功能段不同，但为了保证指令流水线正常运行，流水段个数以最复杂指令所用的功能段个数为准，流水段长度以最复杂的操作所花的时间为准。因此，其他指令可以通过加入“空操作”功能段向最复杂的指令靠齐，  

07.A  

在某个时钟周期内，不同的流水段受不同指令的控制信号控制，执行不同指令的不同功能段，在指令译码阶段由控制器产生指令各流水段的所有控制信号，分别在随后的各个时钟周期内被使用，因此随后各流水段寄存器都要保存相应的控制信号，并通过流水段寄存器传递到下一个流水段，A正确。不同流水段寄存器存放的信息不同，因此流水段寄存器位数不一定相同，流水段寄存器对用户程序是透明的，用户程序不能通过指令指定访问哪个流水段寄存器。  

08.B  

在流水线数据通路中，时钟信号不仅作用在流水段寄存器上，还要作用在PC、各类寄存器、存储器等状态元件上。每条指令的取指令阶段和指令译码阶段的功能都相同，是公共流水段，且控制信号是指令译码之后才产生的，因此这两个阶段不需要控制信号。  

09.D  

解决结构冒险的策略有两个方面（袁春风老师所撰教材中的结论）： $\textcircled{\scriptsize{1}}$ 一个部件每条指令只能使用一次，且只能在特定阶段使用，可以避免一部分结构冒险； $\circledcirc$ 通过设置多个独立的部件来避免硬件资源冲突，例如可将寄存器的读口和写口分开，以及将指令Cache和数据Cache分离等。因此，四个说法都正确。  

10.B  

处理数据相关问题有两种方法：一种是暂停相关指令的执行，即暂停流水线，直到能够正确读出寄存器操作数为止；另一种是采用专门的数据通路，直接把结果送到ALU的输入端，这种方法称为旁路技术。  

11.A  

部分数据冒险可以通过转发技术解决，但有些数据冒险不行，例如load-uise类型的数据冒险（当下一条指令需要用到本条指令的访存结果时）。load-use类型的数据冒险会引起一个或多个时钟周期的阻塞，需要添加空操作指令解决。若ALU运算指令的某个操作数是分支指令转移后的执行结果，就会发生数据冒险。例如，分支指令“sltrl,r2,r3”，其含义是如果(r2) $\mathrm{<}(\mathrm{r}3)$ ，则 $r1=1$ ；否则 $\mathrm{r}\mathrm{l}=0$ 。如果紧挨着一条ALU运算指令要用到 $_{\mathrm{r1}}$ 的值，就会发生数据冒险。  

12.D  

插入空操作指令，使相关指令延迟执行，可以避免数据冒险。采用转发技术，将数据通路中生成的中间数据直接转发到ALU的输入端，可以解决部分数据冒险，但不能解决load-use类型的数据冒险。通过编译器调整相关指令的顺序，也可以解决部分数据冒险。  

13.D  

转发技术可以解决部分数据冒险，但不能解决load-uise类型的数据冒险。分析上述指令序列，指令I1在EX段结束时已得到r1的新值，采用转发技术后，指令I3在ALU中用到的r1值可以直接从EX/MEM流水段寄存器中取，可以解决指令I1和I3的数据冒险。指令I2和I3是load-use类型的数据冒险，load指令只在MEM段结束时才能取到主存中的数据，然后送MEM/WB流水段寄存器，在WB段的前半个周期才能将新值写入r3，但随后的add指令在EX阶段就要取r3的值，因此会发生数据冒险。需要在add指令之前插入一条空操作指令，这样在add指令的EX段就可从MEM/WB流水段寄存器中取出load指令的最新结果。  
14.D  

直接转移指令的转移目标地址在执行阶段才确定，会发生控制冒险，I错误。插入空操作可使条件转移指令的结果在取下一条有效指令之前确定，从而避免控制冒险，Ⅱ正确。采用转发技术，可以解决的是数据相关，IⅢ错误。流水段的数量越多，意味着在转移结果确定之前，可能取出更多的错误指令，从而需要更多的时间和资源来处理这些错误指令，V错误。  

1.  C  

分支预测技术用于处理控制冒险。静态预测技术假定分支总是不发生或者总是发生，每次预测结果是一样的。动态预测技术根据之前条件跳转的比较结果来预测，根据局部性原理，其预测成功率通常比静态预测技术高。预测错误时，已被错误放入流水线执行的指令必须被舍弃。  

16.B  

适当增加流水段的个数，会使得每个流水段内的操作更简单，流水段的延迟更小，缩短了时钟周期，从而可以提高时钟频率。但是，流水段之间的流水段寄存器也随之增多，增加了流水段之间的额外缓存开销，因此加倍增加流水段个数不能成倍提高指令执行效率，且流水段个数也不能无限制地增加。此外，随着流水段个数的增加，也将导致流水段的控制逻辑更复杂。  

17.D  

采用流水线时，第一条指令完成的时间是31，以后每经过7都有一条指令完成，因此共需要的时间为 $3t+(8-1)t=10t$ ：而不采用流水线时，完成8条指令总共需要的时间为 $8{\times}3t=24t$ ，所以流水线的加速比 $=24t\div10t=2.4$  

18.D  

超标量流水线不仅指运算操作并行，还包括取指、译码、访存、写回等其他操作，超标量技术使CPU在同一时间内执行多条指令，从而发挥更大的效率，D错误。  

19.B  

要实现超标量技术，要求CPU中配置多个功能部件和指令译码电路，以及多个寄存器和总线，以便实现同时执行多个操作，A正确。超长指令字技术不仅对优化编译器要求更高，还需要更多的硬件资源，如寄存器、功能部件、指令译码电路等，B错误。流水线按序流动，肯定不会出现先读后写（WAR）相关和写后写（WAW）相关：只可能出现没等到上一条指令写入而当前指令就读寄存器的错误，C正确。由超流水线技术的定义可知D正确。  

20.A  

时钟周期应以各功能段的最长执行时间为准，否则用时长的流水段将不能正确完成。  

21.A  

采用流水线方式，相邻或相近的两条指令可能会因为存在某种关联，后一条指令不能按照原指定的时钟周期运行，从而使流水线断流。有三种相关可能引起指令流水线阻塞： $\textcircled{\scriptsize{1}}$ 结构相关，也称资源相关： $\circledcirc$ 数据相关： $\textcircled{3}$ 控制相关，主要由转移指令引起。  

数据旁路技术的主要思想是，不必等某条指令的执行结果送回到寄存器，再从寄存器中取出该结果，而是直接将执行结果送到其他指令所需的地方，这样可以使流水线不发生停顿。  

22.D  

指令长度一致、按边界对齐存放、仅LOAD/STORE指令访存，这些都是RISC的特征，它 们使取指令、取操作数的操作简化且时间长度固定，能够有效地简化流水线的复杂度。  
23.C  

采用4级流水执行100条指令，在执行过程中共使用 $4+(100-1)=103$ 个时钟周期，如下图所示。CPU的主频是1.03GHz，即每秒有1.03G个时钟周期。流水线的吞吐率为 $1.03\mathrm{G}{\times}100/103\ =$  $1.0\!\times\!10^{9}$ 条指令/秒。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/5f7d23fc43f50b4523b95ffba5c416fc29cebea594dfc08c6977dc35b4c88d25.jpg)  

24.D  

把指令Cache与数据Cache分离后，取指和取数分别到不同的Cache中寻找，则指令流水线中取指部分和取数部分就可以很好地避免冲突，即减少了指令流水线的冲突。  

25.  B  

数据冒险即数据相关，指在一个程序中存在必须等前一条指令执行完才能执行后一条指令的情况，此时这两条指令即为数据相关。当多条指令重叠处理时就会发生冲突。首先这两条指令发生写后读相关，且两条指令在流水线中的执行情况（发生数据冒险）如下表所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/a815d58e35bb3ee654053284fc56c112322228f415a7d6aa0399a7bd7acd6b4b.jpg)  

指令I2在时钟5时将结果写入寄存器R5，但指令13在时钟3时读R5。本来指令I2应先写入R5，指令I3后读R5，结果变成指令I3先读R5，指令I2后写入R5，因而发生数据冲突。  

26.C  

超标量是指在CPU中有一条以上的流水线，并且每个时钟周期内可以完成一条以上的指令，其实质是以空间换时间。I错误，它不影响流水线功能段的处理时间；ⅡI、ⅢI正确。  

27.A  

数据在功能部件之间传送的路径称为数据通路，包括数据通路上流经的部件，如程序计数器、ALU、通用寄存器、状态寄存器、异常和中断处理逻辑等。数据通路由控制部件控制，控制部件根据每条指令功能的不同生成对数据通路的控制信号。因此，不包括控制部件。  

28.D  

指令流水线中每个流水段的时间单位为一个时钟周期，题中指令流水线的指令需要用到 $\mathbf{A}\!\sim$ E五个部件，所以每个流水段时间应取最大部件时间 $80\mathrm{ps}$ ，此外还有流水段寄存器延时 $20\mathrm{ps}$ ，龙因此CPU时钟周期至少是 $100\mathrm{ps}$  

29. C  

画出这四条指令在流水线中执行的过程如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/5038ada6677f2f712eb15c275af65f5d4e8cab52f5ecedfd4e67b4a6433d8318.jpg)  
数据冒险即数据相关，指在程序中存在必须等前一条指令执行完才能执行后一条指令的情况，此时这两条指令即为数据相关。其中11和13、I2和13、13和14均发生了写后读相关，因此必须等相关的前一条指令执行完才能执行后一条指令。只有12和14不存在数据冒险。  

30.B  

CPI表示执行指令所需的时钟周期数。对于一个程序或一台机器来说，其CPI是指执行该程序或机器指令集中的所有指令所需的平均时钟周期数。对于单周期CPU，令指令周期 $=$ 时钟周期， ${\mathrm{CPI}}=1$ ，I正确。对于多周期CPU，CPU的执行过程分成几个阶段，每个阶段用一个时钟完成，每种指令所用的时钟数可以不同， $\mathrm{CPI}>1$ ，ⅡI错误。对于基本流水线CPU，让每个时钟周期流出一条指令，  $\mathrm{CPI}=1$  ，IⅢI正确。超标量流水线CPU在每个时钟周期内并发执行多条独立的指 令，每个时钟周期流出多条指令， $\mathrm{CPI}<1$ ，IV错误。  

31.C  

I2和I1之间存在数据冒险，I1在WB段才将新值写回寄存器R[s2]，但I2的Ex段就要读R[s2]以计算访存的有效地址，I1在EX段结束时就已生成R[s2]的新值，被存放在Ex/Mem流水段寄存器中，采用转发技术后，可直接从该寄存器中取出数据送到ALU的输入端，这样12执行时ALU用的是R[s2]的新值，解决了I2和I1之间的数据冒险。I3和I2之间存在数据冒险，属于load-use数据冒险，用转发电路无法解决I3和12的数据相关问题，原因在于I2的功能是从内存中取数，只有在Mem段结束时才能从主存中得到R[s3]的新值，但I3的EX段就要用到R[s3]，因此无法用转发技术解决，I3仍需阻塞一个时钟周期，等到I2的Mem段结束后，从I12的 $\mathrm{{Mem/Wb}}$ 流水段寄存器中取到R[s3]的新值。I4和I3之间存在控制冒险，beq指令在Ex段设置条件码，在Mem段控制是否将转移地址送到PC，这之后才能开始根据PC内容取指令，因此I4需要进行硬件阻塞。综上所述，13和14的执行需要被阻塞，指令的执行过程如下表所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/e3bde2f46c09a966aaa57a60228ed8b12f94ff74d3be9e18c85c15541a7fe7a0.jpg)  

# 二、综合应用题  

01.【解答】  

1）流水线操作的时钟周期 $T$ 应按四步操作中的最长时间来考虑，所以 $T\,{=}\,100\,\mathrm{ns}$  

2）分析如下：  

首先该两条指令发生写后读相关，且两条指令在流水线中的执行情况如下表所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/ebda786ba7456b49dbba6537db19fff46ef29baecfa0b9d6befa9cfef718cbdb.jpg)  

ADD指令在时钟4时将结果写入寄存器堆（R1），但SUB指令在时钟3时读寄存器堆（R1）。本来ADD指令应先写入R1，SUB指令后读R1，结果变成SUB指令先读R1，ADD指令后写入R1，因而发生数据冲突。若硬件上不采取措施，第二条指令SUB至少应推迟两个时钟周期 $(2\!\times\!100{\mathrm{ns}})$ ，即SUB指令中的指令译码并取数周期应在ADD指令的写回周期之后才能保证不会出错，如下表所示。  
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/486ed00cd5ca8749447c319f82cc6ebde5c6a027a32997c18e0548efeb436d4f.jpg)  

3）若在硬件上加以改进，可以不用任何延迟。因为在ADD指令中，运算周期已得到结果。可以通过数据旁路技术得到运算结果后，就将结果送入ALU的一端，而不需要等到写回周期完成。流水线中的执行情况如下表所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/0d82b825ad3018858209add2e9e827c4518ac5791176835b562bcde89d5e1070.jpg)  

02.【解答】  

1）因为指令周期包括F、ID、EX、WB四个子过程，因此其指令周期流程图如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/05fd87316bcf2197dc53408d55c68e6b0c0d4eff0735c18cdecc155298f72df5.jpg)  

2）假设一个时间单位为一个时钟周期，则每隔4个周期才有一个输出结果。非流水线的时空图如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/76898bbfd9acf45755451f6d9bd47930edd2285fff20e8298586ef0b8f98368c.jpg)  

3）第一条指令出结果需要4条指令周期。流水线满载时，以后每个时钟周期都可输出一个结果，即执行完一条指令，如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/4d59c86a7cb620089ab9da623509701244a8247c8d31f76a3120d3d584b5f0ff.jpg)  

4）由上图可知，在13个时钟周期结束时，CPU执行完10条指令，因此实际吞吐率（T）为  

$$
T=\frac{10}{100\mathrm{ns}\times13}\approx7700000
$$  

03.【解答】  

1）x的机器码为 $[\mathrm{x}]_{\#}=1111\ 1101\ 1111\ 1111\mathrm{B}$ ，即指令执行前 $\left(\mathrm{R1}\right)=$ FDFFH，右移1位后为1111111011111111B，即指令执行后 $\left(\mathrm{R1}\right)=$ FEFFH。  

2）每个时钟周期只能有一条指令进入流水线，从第5个时钟周期开始，每个时钟周期都会有一条指令执行完毕，因此至少需要 $4+(5-1)=8$ 个时钟周期。  

1) $\mathrm{I}_{3}$ 的ID段被阻塞的原因：因为 $\mathrm{I}_{3}$ 与 $\mathrm{I}_{1}$ 和 $\mathrm{I}_{2}$ 都存在数据相关，需等到 $\mathrm{I}_{1}$ 和 $\mathrm{I}_{2}$ 将结果写回寄  
存器后， $\mathrm{I}_{3}$ 才能读寄存器内容，所以 $\mathrm{I}_{3}$ 的ID段被阻塞。 $\mathrm{I}_{4}$ 的IF段被阻塞的原因：因为 $\mathrm{I}_{4}$ 的前一条指令 $\mathrm{I}_{3}$ 在ID段被阻塞，所以 $\mathrm{I}_{4}$ 的IF段被阻塞。若 $\mathrm{I}_{4}$ 的IF段不被阻塞，则会覆盖指令寄存器的内容，导致 $\mathrm{I}_{3}$ 段的译码结果出错。  

注意：要求“按序发射，按序完成”，因此，第二问中下一条指令的IF可以和上一条指令的ID并行，以免因上一条指令发生冲突而导致下一条指令先执行完。  

4）因 $2^{*}\mathbf{x}$ 操作有左移和加法两种实现方法，因此 $\mathrm{{x}=\mathrm{{x}^{*}2+\mathrm{{a}}}}$ 对应的指令序列为  

I1 LOAD R1，[x] I2 LOAD R2，[a] I3 SHL R1 //或者 ADD R1,R1 I4 ADD R1，R2 I5 STORE R2,[x]  

这5条指令在流水线中执行过程如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/79f6b80cf8403ade469778ee2fbdb49cb53081ee0a6bc6cd74344e0f133c65ba.jpg)  

因此执行 $\mathrm{x}=\mathrm{x}^{*}2+\mathrm{a}$ 语句最少需要17个时钟周期。  

04.【解答】  

该题为计算机组成原理的综合题型，涉及指令系统、存储管理和CPU三部分内容，特别是五段式流水线应引起考生的高度重视。整个指令执行过程中各流水段的时间是相同的，由统一的时钟控制。各流水段在5.6.1节中介绍过，这里讨论流水段发生阻塞的情况：  

$\textcircled{\scriptsize{1}}$ 若本条指令的源寄存器是上一条指令的目的寄存器，如果不采取任何措施，本条指令取到的将是寄存器的I旧值，这就是RAW数据冒险。这时有3个时钟周期的阻塞，使本指令ID应在上一条指令WB后。本题中，I1在WB段结束才将结果写回R4，而I2在ID段就需要取R4的值，如下图所示。  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/e0b6b63c9ba8cbf07cee251a009c49742745fbb9711b3819e75c20dc7e1f2579.jpg)  

第三条指令阻塞了3个时钟周期。  

$\circledcirc$ 跳转指令（JMP）（bra）：由于流水线默认直接取下一条指令，若指令为JMP或JC（条件转移），在没有分支预测的情况下，默认有3个时钟周期的阻塞使下一条指令IF在分支指令M后（分支指令在M段才会确定是否更新PC）。本题中，I6是分支指令，其后一条指令被阻塞3个时钟周期，若跳移条件成立，则转到IⅡ1执行，反之顺序执行17。本题最后一问是分析为什么11的执行不会因为与15的数据相关而阻塞，可以从两个角度来分析：第一，16与15存在数据冒险，从而16的ID段被阻塞3个时钟周期，不论16是不是分支指令，I1的IF段都会被阻塞，从而ID段也会相应地推迟。第二，因为I6是分支指令，后续指令会阻塞3个时钟周期，从而也能消除11和15的数据冒险。  
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/1d7a4a6197a58da7cbd4a0f530fedbc68b1e3e180de8d34f4250a26d029a5696.jpg)  

在了解上面的基础知识后，我们再看这道大题。  

1）已知计算机M采用32位定长指令字，即一条指令占4B，观察表中各指令的地址可知，每条指令的地址差为4个地址单位，即4个地址单位代表4B，一个地址单位就代表了1B，所以该计算机是按字节编址的。  

2）在二进制中某数左移两位相当于乘以4，由该条件可知，数组间的数据间隔为4个地址单位，而计算机按字节编址，所以数组A中的每个元素占4B。  

3）由表可知，bne指令的机器代码为1446FFFAH，根据题目给出的指令格式，后2B的内容为OFFSET字段，所以该指令的OFFSET字段为FFFAH，用补码表示，值为-6。系统执行到bne指令时，PC自动加4，PC的内容为08048118H，而跳转的目标是08048100H，两者相差了18H，即24个单位的地址间隔，所以偏移地址的一位即是真实跳转地址的 $-24/{-6}=4$ 位。可知bne指令的转移目标地址计算公式为（PC) $^{+4+}$ OFFSET×4。  

4）由于数据相关而发生阻塞的指令为第2、3、4、6条，因为第2、3、4、6条指令都与各自前一条指令发生数据相关。第6条指令会发生控制冒险。当前循环的第5条指令与下次循环的第1条指令虽然有数据相关，但由于第6条指令后有3个时钟周期的阻塞，因而消除了该数据相关（或者解释如下：第6条指令因为与第5条指令存在数据冒险，导致后续Ⅱ1的执行也相应地推迟，因此消除了该数据冒险）。  

05.【解答】  

该题继承了上题中的相关信息，统考中首次引入此种设置，具体考查程序的运行结果、Cache的大小和命中率的计算，以及磁盘和TLB的相关计算，是一道比较综合的题型。2015年同样出现了23分大题的设定，希望读者对其足够重视。  

1）R2中装的是i的值，循环条件是 $\mathrm{i}<\!\mathrm{N}(1000)$ ，即当i自增到不满足这个条件时跳出循环，程序结束，所以此时R2的值为1000。  

2）Cache共有16行，每块32字节，所以Cache数据区的容量为 $16{\times}32\mathrm{B}=512\mathrm{B}$  

P共有6条指令，占24B，小于主存块大小32B，其起始地址为 $0804\ \ 8100\mathrm{H}$ ，对应一块的开始位置，由此可知所有指令都在一个主存块内。读取第一条指令时会发生Cache缺失，因此将P所在的主存块调入Cache的某一行，以后每次读取指令时，都能在指令Cache中命中。因此在1000次循环中，只会发生1次指令访问缺失，所以指令Cache的命中率为 $(1000\times6-1)\div(1000\times6)=99.98\%.$  

3）指令4为加法指令，即对应 $\mathrm{{sum+}=A[i]}$ ，当数组A中元素的值过大时，会导致这条加法指令发生溢出异常；而指令2、5虽然都是加法指令，但它们分别为数组地址的计算指令和存储变量i的寄存器进行自增的指令，而i最大到达1000，所以它们都不会产生溢出异常。  

只有访存指令可能产生缺页异常，即指令3可能产生缺页异常。因为数组A在磁盘的一页上，而一开始数组并不在主存中，第一次访问数组时会导致访盘，把A调入内存，而以后数组A的元素都在内存中，不会导致访盘，所以该程序共访盘一次。  

每访问一次内存数据，就查一次TLB，共访问数组1000次，所以此时又访问1000次TLB还要考虑到第一次访问数组A，即访问A[O]时，会多访问一次TLB（第一次访问A[O]时会先查一次TLB，然后产生缺页，处理完缺页中断后，会重新访问A[O]，此时又查TLB)，所以访问TLB的次数一共是1001次。  


# 5.7.6 答案与解析  

# 一、单项选择题  

01.D  

Flynn分类法将计算机体系结构分为SISD、SIMD、MISD和MIMD四类。常规的单处理器属于SISD，常规的多处理机属于MIMD。  

02.B  

阵列处理机包含一个计算阵列，此阵列由多个处理单元组成。它使用单一的控制部件控制多个处理单元，使每个处理单元对各自的数据进行同样的操作，属于SIIMID结构。  

03.D  

A、B和C通常可理解为同一种概念，是SIMD结构。标量流水线处理机是SISD结构。  

04.B  

单指令流多数据流（SIIMID）结构的计算机通常由一个指令控制部件、多个处理单元组成，不同处理单元执行的同一条指令所处理的数据可以不同。  

05.C  

超线程技术是在一个CPU中，提供两套线程处理单元，让单个处理器实现线程级并行。虽然采用超线程技术能够同时执行两个线程，但是当两个线程同时需要某个资源时，其中一个线程必须暂时挂起，直到这些资源空闲后才能继续运行。因此，超线程的性能并不等于两个CPU的性能。而且，超线程技术的CPU需要芯片组、操作系统（如Windows98不支持超线程技术）和应用软件的支持，才能发挥该项技术的优势。双核技术是指将两个一样的CPU集成到一个封装内（或者直接将两个CPU做成一个芯片），而超线程技术在CPU内部仅复制必要的线程资源来让两个线程同时运行，能并行执行两个线程，模拟实体双核。仅C正确。  

06.B  

超线程技术在CPU内部仅复制必要的线程资源，共享CPU的高速缓存和功能部件，让两个线程可以并行执行，模拟双核CPU。当两个线程同时需要某个共享资源时，其中一个线程必须暂时挂起，直到这些资源空闲后才能继续运行。仅B正确。  
07.C  

双核是指将两个CPU核心集成到一个封装中，核心也称内核，是CPU最重要的组成部分，C正确。主板上有两个CPU属于多处理器。超线程技术是模拟实体双核，不能算作真正意义上的双核。时间并行是指流水线技术，空间并行则是指硬件资源的重复，空间并行导致了两类并行机的产生，按Flynn分类法分为SIMD和MIMD。  

08.D  

多核CPU的核心通常都是对称的，因此2.4GHz双核CPU中两个核的主频也是 $2.4\mathrm{GHz}$ 。早期CPU性能提升主要靠提高主频，导致功耗增大，发热量大，而且当主频提高到一定程度后，CPU性能的提升不再明显，后来转到增加CPU核心的方向，将2个核心集成到一个芯片内，提供等同双CPU的性能，这显然也降低了CPU的体积。C显然正确。在多核CPU上运行一个不支持多线程的程序，显然不能发挥多核CPU的优势，D错误。  

09.C  

多核CPU的各核心既可以有独自的Cache，又可以共享同一个Cache。只有支持多线程的并行处理程序才能同时在多个核心上运行，发挥多核的优势。C正确。多任务系统也称多道程序系统，可以运行在单核CPU上，宏观上并行，微观上串行。  

10.D  

SMP也称对称多处理器，一般采用偶数路CPU，I正确。UMA构架由于所有CPU共享相同的内存，增加CPU路数会加大访存冲突，通常2或4路的性能最好，而NUMA理论上支持无限扩展，ⅡI正确。UMA构架中所有CPU共享同一内存空间，每个CPU的Cache中都是共享内存中的一部分副本，因此各CPU的Cache一致性是需要解决的重要问题，IⅢl正确。  

11.C  

单线程程序只有一个执行流，因此多核处理器并不能使其执行速度加快。多核处理器属于Flymn分类法的MIIMD系统。多核处理器是在一颗CPU上集成了多个执行内核而非控制核心的处理器，C错误。多核处理器可在一个时钟周期内处理多个并行任务，因此能耗通常更高。  

12.C  

MIMID结构分为多计算机系统和多处理器系统。向量处理器是SIIMD的变体，属于SIIMID结构。硬件多线程技术在一个核中处理多个线程，可用于单核处理器，C错误。共享内存多处理器（SMIP）具有共享的单一物理地址空间，所有核都可通过存取指令来访问同一片主存地址空间。  

# 6.1.7 答案与解析  

# 一、单项选择题  

01.B  

为了使总线上的数据不发生“冲突”，挂在总线上的多个设备只能分时地向总线发送数据，即某个时刻只能有一个设备向总线传送数据，而从总线接收数据的设备可以有多个，因为接收数据的设备不会对总线产生“干扰”。  

02.A  

只有主设备才能获得总线控制权，总线上的信息传输由主设备启动，一条总线上可以有多个设备作为主设备，但在同一时刻只能有一个主设备控制总线的传输操作。  

03.C 总线包括数据线、地址线和控制线，传送的信息分别为数据信息、地址信息和控制信息。  

04.C 系统总线用于连接计算机中的各个功能部件（如CPU、主存和I/O设备）。  

05.C  

计算机使用总线结构便于增减外设，同时减少信息传输线的条数。但相对于专线结构，其实际上也降低了信息传输的并行性及信息的传输速度。  

06.A  

间址寻址首次访问内存所得到的信息是操作数的有效地址，该地址作为数据通过数据总线传送至CPU，地址总线是用于CPU选择主存单元地址和I/O端口地址的单向总线，不能回传。地址总线由单向的多根信号线组成，可用于CPU向主存、外设传送地址信息：数据总线由双向的多根信号线组成，CPU既可以沿着这些线从主存或外设读入数据，又可以发送数据；控制总线上传输控制信息，包括控制命令和反馈信号等。  

07.D 地址总线上的代码用来指明CPU要访问的存储单元或I/O端口的地址。  

08.C 系统总线中控制线的主要功能是提供定时信号、操作命令和各种请求/回答信号等。  

09.C  

选项A是总线按功能层次的划分，单机系统可不需要通信总线。选项B都属于系统总线。选项D则是三种不同的总线标准。只有选项C组成了三总线结构系统。  

10.A  

事行传输是指数据的传输在一条线路上按位进行，并行传输是指每个数据位有一条单独的传输线，所有数据位同时传输。不同信号在同一条信号线上分时传输的方式，称为总线复用。  

11.A  
地址和数据在不同的总线上传输，根据总线传输信息的内容进行区分，地址在地址总线上传输，数据在数据总线上传输。  

12.B  

总线带宽 $=$ 总线宽度 $\times_{c}$ 总线频率，本题中的总线宽度为32位，即4B，总线频率为 $500\mathrm{MHz}/5=$ 100MHz，因此总线的数据传输速率为 $\mathrm{4B\!\times\!(500MHz/5)}=\mathrm{400MHz/s}.$  

13.D  

$65536=2^{16}$ 色，因此颜色深度为16位，占据的存储空间为 $640{\times}480{\times}16=4915200$ 位。有效传输时间 $=4915200^{\div}(56{\times}10^{3})\mathrm{s}{\approx}87.77\mathrm{s}$  

14.C  

数据总线32根，因此每次传输32位，即4B数据，总线工作频率为 $33\mathrm{MHz}$ ，因此理论最大传输速率为 $33{\times}4=132\mathrm{MB}/\mathrm{s}$  

15.B  

时钟频率为 $100\mathrm{MHz}$ ，因此时钟周期 $=\,1/100\mathrm{{MHz}\,=\,0.01\upmu s}$ ，总线周期 $\l=\,5$ 个时钟周期 $=$  $5{\times}0.01\upmu\mathrm{s}=0.05\upmu\mathrm{s}$ ，总线工作频率 $=1/0.05=20\mathrm{MHz},$ ，因总线是16位的，即2B，因此总线带宽 $=$  $20\!\times\!(16/8)=40\mathrm{MB/s}$  

16.B CPU的控制总线提供的控制信号包括时序信号、I/O设备和存储器的响应信号等。  

17.B  

控制总线主要用来传输计算机内各种控制信号，控制信号包括存储器和I/O设备的时序信号和响应信号，IⅡI、ⅢI正确。存储器和I/O设备的地址信息通过地址总线传输，I错误。存储器中存放的数据通过数据总线传输，IV错误。  

18.B  

总线中，数据总线是双向传输的，数据信息既可由CPU传送至内存或外设，又可由内存、外设传送至CPU，A错误。地址总线是单向传输的，地址信息只能由CPU发送至内存或外设，B正确。控制信息和状态信息也是单向传输的，它们的传输方向正好相反，控制信息通过控制总线由CPU发送至内存或外设，而状态信息则通过状态总线由内存或外设发送至CPU。  

19.C  

按连接部件不同，总线通常可分为片内总线、系统总线和通信总线，计算机系统的三总线结构通常是指I/O总线、主存总线和DMA总线。  

20.B  

总线带宽是指单位时间内总线上传输数据的位数，通常用每秒传送信息的字节数来衡量，单位为B/s。由题意可知，在1个总线周期 $(=2$ 个时钟周期）内传输了4字节信息，时钟周期 $=$  $1/10\mathrm{MHz}=0.1\upmu\mathrm{s}$ ，因此总线带宽为 $4{\bf B}{\bf\cdot}(2\times0.1\upmu s)=4{\bf B}{\bf\cdot}(0.2\times10^{-6}{\bf s})=20{\bf M}{\bf B}/{\bf s}\,.$  

21.D  

IS A、EISA、VESA、PCI、PCI-ExpreSS、AGP、USB、RS-232C等。选项A中的CRT是纯平显示器；选项B中的CPI是每条指令的时钟周期数；选项C中的RAM是半导体随机存储器、MIPS是每秒执行多少百万条指令数。  

22.C  

取指令时，指令便是在数据线上传输的。操作数显然在数据线上传输。中断类型号用于指出中断向量（中断服务程序的入口地址）的地址，CPU响应某一外部中断后，就会从数据总线上获取该中断源的中断类型号，然后据此计算对应中断向量在中断向量表（存放在内存中）的位置。而握手（应答）信号属于总线定时的控制信号，应在控制总线上传输。  
23.D  

USB（通用串行总线）的特点有： $\textcircled{\scriptsize{1}}$ 即插即用； $\textcircled{2}$ 热插拔； $\textcircled{3}$ 有很强的连接能力，采用菊花链形式将众多外设连接起来； $\textcircled{4}$ 有很好的可扩充性，一个USB控制器可扩充高达127个外部USB设备； $\circledast$ 高速传输，速率可达 $480\mathrm{M}\mathrm{b}/\mathrm{s}$ 。对于D，USB是串行总线，不能同时传输2位数据。  

24.B  

USB是一种连接外部设备的I/O总线标准，属于设备总线，是设备和设备控制器之间的接口。而PCI、AGP、PCI-E作为计算机系统的局部总线标准，通常用来连接主存、网卡、视频卡等。  

25. C  

数据线有32根，也就是一次可以传送 $32\mathrm{b}/8=4\mathrm{B}$ 的数据，66MHz意味着有66M个时钟周期，而每个时钟周期传送两次数据，可知总线每秒传送的最大数据量为 $66\mathbf{M}\times2\times4\mathrm{B}=528\mathrm{MB}$ ，所以总线的最大数据传输速率为 $528\mathrm{MB/s}$  

26.B  

由题目可知，计算机采用3通道存储器总线，存储器总线的工作频率为 $1333\mathrm{MHz}$ ，即1秒内传送1333M次数据，总线宽度为64位即单条总线工作一次可传输8字节（Byte），因此存储器总线的总带宽为 $3{\times}8{\times}1333\mathrm{MB/s}$ ，约为32GB/s。  

27. C  

每个时钟周期传送2次，所以每秒传送的次数  $=$  时钟频率  $\times2=2.4\mathrm{G}{\times}2/\mathrm{s}$  

总线带宽 $=$ 每秒传送次数 $\times2\mathrm{B}{\times}2=2.4\mathrm{G}{\times}2{\times}2\mathrm{B}{\times}2/\mathrm{s}=19.2\mathrm{GB}/\mathrm{s}\,.$ 题中已给出总线带宽公式，降低了难度。公式中的“ $\times2\mathrm{B}$ ”是因为每次传输16位数据。  

# 二、综合应用题  

01.【解答】  

1）总线周期为7个时钟周期，总线频率为 $66/7\mathrm{MHz}$ 总线在一个完整的操作周期中传输了一个数据块，总线在一个周期内传输的数据量为 $64\mathrm{bit}/8{\times}6=48\mathrm{B}$ ，所以总线的宽度为48B，传输速率为 $48\mathrm{B}{\times}66/7\mathrm{MHz}=452.6\mathrm{MB}/\mathrm{s}.$ 2）时钟频率减半时的总线频率为(66/7)/2MHz，因数据块大小不变，因此总线宽度仍为48B，传输速率为 $\begin{array}{r}{48\mathrm{B}{\times}33/7\mathrm{MHz}=226.3\mathrm{MB/s}.}\end{array}$ 注意总线周期和时钟周期的联系与区别，总线周期通常由多个时钟周期组成。  

02.【解答】  

1）读操作的时钟周期数： $1+2+4=7$ 对应的频率：100MHz/7总线宽度： $6{\times}4\mathrm{B}=24\mathrm{B}$ 所以数据传输速率 $=$ 总线宽度/读取时间 $=\!24\!\times\!(100\mathrm{MHz}/7)=343\mathrm{MB}/\mathrm{s}\,.$  

2）写操作的时钟周期数： $1+1+4=6$ 对应的频率： $100\mathrm{MHz}/6$ 总线宽度： $6{\times}4\mathrm{B}=24\mathrm{B}$ 所以数据传输速率 $=$ 总线宽度/写操作时间 $=24{\times}(100{\mathrm{MHz}}/6)=400{\mathrm{MB}}/{\mathrm{s}}$  

3）平均传输速率 $=343{\times}70\%+400{\times}30\%=360.1\mathrm{MB/s}.$  

# 6.2.4 答案与解析  

# 一、单项选择题  

01. C  

在不同速度的设备之间传送数据时，既可采用同步方式，又可采用异步方式。异步方式主要用于在不同的设备间进行通信，两种速度不同的设备使用同一时钟进行控制时，采用同步控制方式同样可以进行数据的传送，但不能发挥快速设备的高速性能。  

02.D 一个字符占用 $1+7+1+1=10$ 位，因此数据传输速率为 $10{\times}480=4800$ 位/秒。  

03.C  

一次总线事务传输的数据量为 ${\bf8}{\times}4{\bf B}=32{\bf B}$ ，所需时钟周期数为 $1+3+8=12$ ，每个时钟周期为1/50MHz，总时间为 $12\!\times\!(1/50\mathrm{MHz})\!=\!0.24\mathrm{s},$ 。数据传输速率为 $32\mathrm{B}{\cdot}[(12{\times}(1/50\mathrm{MHz}))\mathrm{s}]=133.3\mathrm{MB/s}{\cdot}$  

04.C  

同步控制是指由统一时序控制的通信方式，同步通信采用公共时钟，有统一的时钟周期。同步控制既可用于CPU控制，又可用于高速的外部设备控制。  

05.D  

同步通信采用统一的时钟，每个部件发送或接收信息都在固定的总线传送周期中，一个总线传送周期结束，开始下一个总线传送周期。它适用于总线长度较短且各部件的存取时间较接近的情况，因此具有较高的传输速率。选项A、B、C都是正确原因。  

06. B 各部件的存取时间比较接近时，最适合采用同步传输，以发挥其优势。  

07.D  

异步总线即采用异步通信方式的总线。在异步方式下，没有公用的时钟，完全依靠传送双方相互制约的“握手”信号来实现定时控制。传送操作是由双方按需求分配时间的。  

08.C 异步通信方式也称应答方式，没有公用的时钟信号，也没有固定的时间间隔，完全依靠传送双方相互制约的“握手”信号来实现定时控制。  

09.C 在全互锁、半互锁和不互锁三种“握手”方式中，只有不互锁方式的请求信号和回答信号没有相互的制约关系，主设备发出请求信号后，不必等待回答信号的到来，便自己撤销了请求信号，所以速度最快。  
10.A  

异步通信方式依靠“握手”信号来实现定时控制，能保证两个工作速度相差很大的部件或设备之间可靠地进行信息交换。1/O接口与打印机的速度差异较大，应采用异步传输方式。  

11.B  

由题意可知，医生是主模块，护士是从模块。医生伸出手后（即主模块发出请求信号），等待护士将手术刀递上（主模块等待来自从模块的回答信号），护士也必须等待医生握紧后才松开手（从模块等待主模块的回答信号），以上整个流程就是异步通信的全互锁方式。  

12.B  

总线的传输周期分为寻址阶段、申请分配阶段、传输阶段。  

13.C  

由于总线频率为 $100\mathrm{MHz}$ ，因此时钟周期为 $10\mathrm{ns}$ 。总线位宽与存储字长都是32位，因此每个时钟周期可传送一个32位存储字。发式发送可以连续传送地址连续的数据，因此总传送时间为：传送地址 $10\mathrm{ns}$ ，传送128位数据 $40\mathrm{ns}$ ，共需50nS。  

14.C  

猝发（突发）传输是在一个总线周期中，可以传输多个存储地址连续的数据，即一次传输一个地址和一批地址连续的数据，并行传输是在传输中有多个数据位同时在设备之间进行的传输，串行传输是指数据的二进制代码在一条物理信道上以位为单位按时间顺序逐位传输的方式，同步传输是指传输过程由统一的时钟控制。  

15.C  

在同步通信方式中，系统采用一个统一的时钟信号，而不由各设备提供，否则无法实现统一的时钟。  

16.A  

初看起来会觉得A正确，并行总线通常比串行总线传输速率快，但这不是绝对的。在时钟频率较低的情况下，并行总线因为可以同时传输若干比特，速率确实比串行总线快。但是，随着技术的发展，时钟频率越来越高，并行总线之间的相互干扰越来越严重，当时钟频率提高到一定程度时，传输的数据已无法恢复。而事行总线因为导线少，线间干扰容易控制，反而可通过不断提高时钟频率来提高传输速率，A错误。总线复用是指一种信号线在不同的时间传输不同的信息，它可使用较少的线路传输更多的信息，从而节省空间和成本，B正确。突发传输是指在一个总线周期中，可以传输多个存储地址连续的数据，即一次传输一个地址和一批地址连续的数据，C正确。分离事务通信是总线复用的一种，相比单一的传输线路可以提高总线的利用率，D正确。  

17.D  

多总线结构用速率高的总线连接高速设备，用速率低的总线连接低速设备。一般来说，CPU是计算机的核心，是计算机中速度最快的设备之一，A正确。突发传送方式把多个数据单元作为一个独立传输处理，从而最大化设备的吞吐量。现实中一般用支持突发传送方式的总线来提高存储器的读/写效率，B正确。各总线通过桥接器相连，后者起流量交换作用。PCI-Express总线都采用串行数据包传输数据。  

18.B  

总线数据传输速率 $=$ 总线工作频率 $\times($ 总线宽度/8），所以工和ⅡI会影响总线数据传输速率。采用突发（猝发）传输方式，可在一个总线周期内传输存储地址连续的多个数据字，因此能提高传输效率。采用地址/数据线复用只是减少了线的数量，节省了成本，并不能提高传输速率。  
19.C  

总线是在两个或多个设备之间进行通信的传输介质，A正确。同步总线是指总线通信的双方采用同一个时钟信号，但是一次总线事务不一定在一个时钟周期内完成，即时钟频率不一定等于工作频率，B正确。异步总线采用握手的方式进行通信，每次握手的过程完成一次通信，但是一次通信往往会交换多位而非一位数据，C错误。突发传送总线事务是指发送方在传输完地址后，连续进行若干次数据的发送，D正确。  

20.D  

每次传输需经过传输地址、准备数据和传输数据三个过程，分别需要1ns（时钟频率为1GHz，因此时钟周期为1ns）、6ns和1ns，共8ns。总线宽度为64位，所以每次传输的数据为64位，主存块大小为32B，所以读取一个主存块需要传输4次，即 ${\tt8n s}{\times}4=32{\tt n s}$  

# 二、综合应用题  

01.【解答】  

在这样的一个数据帧中，有效数据位是7位，传输过程中发送的代码位共有 $1+7+1+1=10$ 位，所以有效数据传输速率为 $1200\!\times\!7\!\div\!(1+7+1+1)=840{\tt b}/{\tt s}\,\circ$  
