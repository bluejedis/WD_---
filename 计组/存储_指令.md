# 3.1.5 答案与解析  

# 一、单项选择题  

01.D
- 磁盘存储特性
  - 属于直接存取存储器
  - 速度介于随机存储器和顺序存取存储器之间

02.C
- 存储器访问时间概念
  - 存取时间 $T_{\mathrm{a}}$
    - 读出或写入一次信息所需的平均时间
  - 存取周期 $T_{\mathrm{m}}$
    - 连续两次访问的最短时间间隔
    - $T_{\mathrm{m}}=T_{\mathrm{a}}+T_{\mathrm{r}}$
    - $T_{\mathrm{r}}$ 为复原时间
      - SRAM: 信息稳定时间
      - DRAM: 刷新的一次存取时间

03.B
- 存储器寻址计算
  - 总容量: 16MB = $2^{24}$B
  - 字长: 32位
  - 按半字(2B)寻址
  - 可寻址单元数: $2^{24}\mathrm{B}/2\mathrm{B}=2^{23}$

04.D
- 相联存储器特性
  - 基本原理
    - 以存储内容部分作为检索项
    - 按内容或地址寻址
  - 应用
    - TLB
    - 相联Cache
  - 特点
    - 价格昂贵

05.A
- CPU访问硬盘限制
  - 不能直接访问
  - 需先将数据调入内存

06.C
- 数据传输速率计算
  - 每存储周期: 16bit = 2B
  - 传输速率: $2\mathrm{B}{\cdot}(250{\times}10^{-9})\mathrm{s}=8{\times}10^{6}\mathrm{B/s}$

07.B
- 寻址空间计算
  - 机器字长: 64位 = 8B
  - 按字编址
  - 可寻址单元数: $128\mathrm{MB}/8\mathrm{B}=16\mathrm{M}$

08.B
- 存储器主要特性
  - 速度
  - 容量
  - 价格/位
  - 分级方式用于解决三者矛盾

09.D
- 计算机存储系统层次
  - CPU内部寄存器
  - Cache
  - 主存
  - 外存

10.D
- Cache-主存结构特点
  - Cache内容是主存的部分副本
  - 未增加主存容量
  - 目的是解决速度不匹配问题

11.D
- 存储器分层速度比较
  - 最快: 寄存器(CPU中)
  - 次之: Cache
  - 再次: 主存
  - 最慢: 辅存(磁盘、光盘)

12.D
- 命中率计算
  - 设命中率为 $x$
  - $100x+1000(1-x){\leqslant}100{\times}(1+15\%)$
  - 计算得 $x\!\geqslant\!98.33\%$
  - 所需命中率至少99%

> attention
- Cache访问方式说明
  - 本题采用同时访问Cache和主存
  - 不命中时间为1000ns
  - 未说明时默认为访问Cache和主存时间之和

13.A
- 存储器访问特性
  - 主存和辅存数据调动
    - 由硬件和操作系统共同完成
    - 对应用程序员透明
  - CPU可与主存直接交换信息

14.B
- 存储器访问方式
  - 随机存取特点
    - 可访问任意存储单元
    - 存取时间与物理位置无关
  - CD-ROM特点
    - 采用串行存取方式
    - 属于只读型光盘存储器
    - 不属于ROM  
# 3.2.6 答案与解析  

# 一、单项选择题  

- 存储器芯片引脚数
  01.C
  - 芯片容量为1024×8位
    - 数据线需8根
    - 地址线需10根(1024=2^10)
  - 总引脚数至少18根

  02.C
  - 芯片规格
    - 数据线16根(16位)
    - 地址线15根(32K=2^15)

- DRAM刷新特性
  03.B
  - DRAM按行进行刷新

  04.B
  - 刷新方式比较
    - 集中刷新:存在死时间
    - 分散刷新:无死时间但存取周期变长
    - 异步刷新:死时间缩短但仍存在

- RAM类型比较
  05.B
  - DRAM vs SRAM特点
    - DRAM集成度高于SRAM(正确)
    - SRAM成本低于DRAM(错误)
    - SRAM速度低于DRAM(错误)
    - DRAM需要刷新而SRAM不需要(正确)

  06.C
  - RAM特性
    - 属于易失性半导体
    - SRAM和DRAM区别在于是否需要动态刷新

- 存储器基本特性
  07.A
  - 主存组成与特性
    - RAM和ROM统一编址
    - 具有随机访问特性
    - RAM具有易失性
    - ROM具有非易失性

  08.A
  - 存储单元要求
    - 同一存储器中每个存储单元宽度必须相同

  09.D
  - SRAM vs DRAM工作原理
    - SRAM:双稳态电路存储
      - 速度快
      - 无需刷新
      - 集成度低
      - 功耗大
      - 价格高
    - DRAM:电容存储
      - 集成度高
      - 功耗小
      - 价格低
      - 需刷新
      - 速度慢

- 存储器地址复用
  10.B
  - 1024×8位芯片
    - 地址复用后地址引脚5根
    - 数据引脚8根
    - 总引脚数至少13根

- 存储器类型特性
  11.A
  - Cache特性
    - 由SRAM组成
    - 属于易失性存储器

  12.C
  - U盘特性
    - 采用Flash存储器技术
    - 基于E²PROM发展
    - 属于ROM
    - 常用作辅存

  > attention
  随机存取与RAM不同,ROM也支持随机存取

  13.C
  - BIOS引导特性
    - 操作系统保存于硬盘
    - 引导程序固化于ROM
    - 将OS引导至主存

  14.B
  - EPROM特性
    - 可多次改写
    - 改写烦琐
    - 写入时间长
    - 改写次数有限
    - 速度慢
    - 不适合频繁读写

- DRAM刷新机制
  15.C
  - 动态存储器刷新原理
    - 利用电容存储电荷
    - 需要定期刷新防止电荷流失
    - 通过刷新放大器重写数据
    - 只占用一个存取周期

  16.A
  - 64K×1位DRAM刷新特性
    - 由256×256位平面组成
    - 需256次刷新操作
    - 异步刷新间隔约7.8μs
    - 集中刷新需256个读写周期

- DRAM刷新与访存冲突
  17.D
  - 刷新特性
    - 是读取并重写的过程
    - 会与CPU访存产生冲突
    - 会产生访存"死时间"
    - 以行为单位定期补充栅极电容电荷

- SDRAM特性
  18.C
  - 与CPU同步交换数据
  - 属于DRAM，需定期刷新
  - 行缓冲器
    - 缓存整行数据
    - 用SRAM实现

- DRAM地址复用
  19.B
  - 行列地址分时复用
  - 每增加1根地址线
    - 行地址增加1位
    - 列地址增加1位
    - 容量提高4倍

- DRAM容量计算
  20.B
  - 容量计算公式
    - 位平面数×行数×列数
  - 芯片容量
    - $4096 \times 4096 \times 4b = 8MB$
  - 内存条总容量
    - $8MB \times 16 = 128MB$

- 多模块存储器
  21.D
  - 低位交叉编址要求
    - 模块数×总线周期≥存储周期
    - 存储体数应≥11

  22.B
  - 低位交叉存储器特性
    - 采用流水线技术
    - 一个存取周期可连续访问4个模块
    - 数据量：32位×4=128位

  23.C
  - 两种读取情况分析
    - 情况1
      - 每轮前6个T/4时间依次进入各体
      - 需等待M1完成才能开始新一轮
      - 总时间：$(80-1) \times 2T + 2.25T = 160.25T$

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/153b9d5bdf206a094cb694d14323915d7457d1260621994882de465cba4006b8.jpg)

    - 情况2
      - 每轮读取8个存储字用时2T
      - 可立即开始下一轮
      - 总时间：$(60-1) \times 2T + 2.75T = 120.75T$
    - 时间比为4:3

- 交叉编址芯片分析
  24.D
  - 芯片数量：4
  - 地址分配
    - 最低两位决定片选信号
    - 高14位为片内地址
    - 各芯片最低地址：0000H、0001H、0002H、0003H

- 存储器特性分析
  25.A
  - 单体多字存储器
    - 解决访存速度问题
    - 不解决容量问题
    - 适合连续存放的指令和数据

  26.B
  - 多模块存储器特点
    - 独立读写电路
    - 可并行操作
    - 低位交叉编址单元地址不连续

  27.A
  - RAM与ROM对比
    - RAM断电失去信息
    - ROM断电保持信息
    - 都采用随机存取
    - Cache采用SRAM
    - DRAM需刷新，ROM不需要

- 闪存特性
  28.A
  - 基本特点
    - 是E²PROM的发展
    - 可读可写
    - 用MOS管浮栅存储
    - 属于ROM
    - 写入需先擦除
    - 写速度慢于读速度
    - 非易失性
    - 随机访问
    - 用于SSD固态硬盘

- DRAM引脚分析
  29.A
  - 4M×8位芯片配置
    - 数据线：8根
    - 地址线：22/2=11根(地址复用)
    - 总引脚数：19根

- DRAM基本特性
  30.B
  - 电容存储特点
    - 需定期刷新
    - 无刷新则信息丢失
  - SDRAM是常用DRAM

- 存储器访问冲突分析
  31.D
  - 模块序号计算
    - 模块序号=访存地址%存储器交叉模块数
  - 冲突判断规则
    - 相邻四次访问出现在同一模块

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/b8e912d9bd3833a3cfe3a2e1adcc07bab81903b2a12a15b4c9f3c74e6a49264e.jpg)

- 多模块存储器读写分析
  32.C
  - 启动方式
    - 同时启动
    - 并行读写总位数等于总线数据线数

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/316df9934e3d1e7df954feb12767b55b3494d5b22292de4d2e33837230279dc2.jpg)

- DRAM设计考虑
  33.C
  - 设计原则
    - 行列地址差值不宜过大
    - 减小刷新开销
    - 选择较少行数

- 内存条参数分析
  34.C
  - 容量计算
    - 512MB总容量
  - 总线特性
    - 64位总线宽度
    - 需8体多模块交叉
  - 地址引脚
    - 26/2=13根(地址复用)
  - 行缓冲
    - 长度等于一行大小
# 二、综合应用题  

01.【解答】
- 刷新带宽计算
  - 刷新带宽W1计算
    - $W_1 = 1024 \times 768 \times 3\mathrm{B} \times 72/\mathrm{s} = 169869\mathrm{KB}/\mathrm{s}$
  - 刷新总带宽W0计算  
    - $W_0 = W_1(W_0/W_1) = 169869\mathrm{KB/s} \times 100/50 = 339738\mathrm{KB/s} = 339.738\mathrm{MB/s}$
  - 提高刷新存储器带宽的技术
    - 采用高速DRAM芯片
    - 采用多体交叉存储结构
    - 刷新存储器到显示控制器的内部总线宽度加倍
    - 采用双端口存储器将刷新端口和更新端口分开

02.【解答】
- 存取周期分析
  - 四体并行交叉存储器一个周期可取128位
    - 32位(总线宽度) × 4(存储体数) = 128位
  - 时间分析说明
    - 0.1μs内可向CPU提供32位信息
    - 每个存储体需400ns才能提供32位信息

03.【解答】
- 顺序与交叉存储器性能比较
  - 连续读出4个字的时间
    - 顺序存储器: $t_1 = 4 \times 200\mathrm{ns} = 800\mathrm{ns}$
    - 交叉存储器: $t_2 = 200\mathrm{ns} + 3 \times 50\mathrm{ns} = 350\mathrm{ns}$
  - 带宽计算
    - 顺序存储器: $W_1 = 256/(8 \times 10^{-7}) = 32 \times 10^7\mathrm{b/s}$
    - 交叉存储器: $W_2 = 256/(35 \times 10^{-8}) = 73 \times 10^7\mathrm{b/s}$

04.【解答】
- 交叉存储器性能分析
  - 数据传输速率计算
    - 存取周期200ns
    - 四体交叉每50ns读出一个数据字
    - 32位数据字长下传输速率为640Mb/s = 80MB/s
  - 地址交叉方式分析
    - 高位地址交叉不利于提高速度
    - 不符合局部性原理
  - 字长扩展分析
    - 扩大4倍实现单体4字结构
    - 灵活性不如多体单字结构
  - 多端口存储器分析
    - 扩容难度大于多体结构
    - 同一单元不能同时写入

05.【解答】
- 四体交叉访问分析
  - 存储模块地址分布
    - Bank0: 0,4,8,12,16,...
    - Bank1: 1,5,9,13,17,...,37,...,41...
    - Bank2: 2,6,10,14,18,...
    - Bank3: 3,7,11,15,19,...,51,...,67
  - 访存冲突分析
    - 相邻4次访问同一Bank会冲突
    - 17和9、37和17、13和37、8和4可能冲突
    - 41和13虽在同一模块但因延迟不冲突


# 3.3.6 答案与解析  

# 一、单项选择题  

01.D
- 存储器扩展分析
  - 字方向扩展: $64\mathrm{K}/16\mathrm{K}=4$ 倍
  - 位方向扩展: 8bit/1bit $=8$ 倍

02.A
- 存储器扩展需求
  - 以4B为编址单位
  - 需扩展到32KB ($8K{\times}32\mathrm{bit}$)
  - 仅需进行位扩展

03.D
- 存储器寻址分析
  - 总容量: $256\mathrm{KB}=2^{18}\mathrm{B}$
  - 按字寻址: 字长为 $16\mathrm{bit}=2\mathrm{B}$
  - 可寻址单元数: $2^{18}\mathrm{B}/2\mathrm{B}=2^{17}$
  - 寻址范围: $0{\sim}2^{17}{-}1$

04.A
- 存储器容量计算
  - 4个 $16K{\times}8$ 位芯片
  - 总容量: $4{\times}16\mathrm{K}{\times}8$ 位 $=512\mathrm{K}$ 位或64KB
  - 注意: $128K{\times}4$ 位不可选，因芯片为8位

05.C
- 存储容量计算
  - 方程: $(M\!\times\!16)\!+\!(2\!\times\!4)=16$
  - 解得: $M\!=\!8K$

06.D
- 存储芯片数量计算
  - 地址线24根: 寻址范围 $2^{24}$
  - 数据线32根: 字长32位
  - 总容量: $2^{24}{\times}32$ 位
  - 所需芯片数: $(2^{24}{\times}32){\div}(512\mathrm{K}{\times}8)=128$

07.A
- 存储器地址分配
  - 低位地址线: $\mathrm{A}_{4}{\sim}\mathrm{A}_{15}$ 接入芯片地址端
  - 8个芯片组成16KB存储器
  - 高两位地址线 $\mathrm{A}_{2}\mathrm{A}_{3}$ 作为译码器输入

08.C
- 内存容量分析
  - 地址范围: $43\mathrm{FF}-4000+1=400\mathrm{H}$
  - 内存区域: 1K个单元
  - 总容量: $1K{\times}16$ 位
  - 由4片存储芯片构成，每片容量 $1\mathrm{K}\!\times\!16$ 位

09.D
- 存储器芯片数量计算
  - 内存区域: CFFFF-90000+1=40000H (256K个单元)
  - 芯片规格: 16K×8位
  - 所需芯片数: (256K×8)÷(16K×8)=16片

10.B
- 存储芯片地址分析
  - 芯片规格: 32K×16位
  - 地址线构成
    - 片内地址: 15根
    - 片选地址: 3位
    - 总地址位数: 18位
  - 地址范围
    - 高3位为111
    - 末地址: 3FFFFH

11.D
- 片选信号译码分析
  - 部分译码特点
    - 高8位地址中A14和A16未参与译码
    - 译码输出: $\overline{CS}=\overline{A_{19}(A_{18}+A_{17})A_{15}A_{13}A_{12}}$
  - 不属于译码空间判断
    - A17与A18至少一个为1
    - A19,A15,A13,A12应全为1
    - D选项(111 110)不满足条件

12.D
- 存储器扩展配置
  - ROM区配置
    - 容量: 4KB
    - 芯片规格: 2K×8位
    - 需要2片(字扩展)
  - RAM区配置
    - 容量: 60KB
    - 芯片规格: 4K×4位
    - 需要30片(字位同时扩展)

13.D
- 存储器组织结构
  - 目标规格: 8K×8位
  - 芯片规格: 2K×4位
  - 组织方式
    - 总需8片，分4组
    - 每组2片并联(2K×8位)
  - 地址分配
    - 第一组: 0000H~07FH
    - 第二组: 0800H~0FFH
    - 第三组: 1000H~17FH
    - 第四组: 1800H~1FFFH
  - 0B1FH所在芯片最小地址: 0800H

14.D
- 存储器寻址分析
  - 地址空间: 64MB=2^26
  - MAR位数: 26位
  - 实际容量32MB不影响MAR位数
  - MAR需覆盖整个地址空间

15.C
- 存储容量计算
  - ROM区
    - 范围: 5FFF-4000+1=2000H
    - 容量: 8KB
  - RAM区
    - 容量: 56KB(64KB-8KB)
  - SRAM芯片数量: 56KB/(8K×4位)=14

16.C
- RAM容量分析
  - 地址范围: 000000~3FFFFF
  - 地址数: 2^22
  - 字长: 32位(4B)
  - RAM区大小: 2^22×32bit
  - 芯片数量: (2^22×32bit)÷(2^19×8bit)=32

17.C
- 存储空间分配
  - 总地址空间: 2^30
  - 地址范围: 0000 0000H~3FFFFFFFH
  - RAM:ROM=3:1
  - ROM地址空间: 2^28
  - ROM地址范围: 30000000H~3FFFFFFFH

# 二、综合应用题  

01.【解答】
- MAR和MDR的作用
  - MAR: 存放当前CPU访问或写入的内存单元地址
  - MDR: 存放从内存读出或要写入内存的信息

- 按字节编址分析
  - 容量: $1\mathrm{MB}=2^{20}{\times}8$ 位
  - MAR: 20位
  - MDR: 32位 
  - 编址范围: $0000\mathrm{H}\!\sim$ FFFFFH（FFFFFH $-\ensuremath{00000}\mathrm{H}+1=\ensuremath{100000}\mathrm{H}=2^{20}$）

- 按字编址分析
  - 容量: $1\mathbf{MB}=2^{18}{\times}32$ 位
  - MAR: 18位
  - MDR: 32位
  - 编址范围: 0000OH $\sim$ 3FFFFH（3FFFFH $\mathrm{I}-00000\mathrm{H}+1=40000\mathrm{H}=2^{18}$）

02.【解答】
- 数据线和地址线分析
  - 目标容量: $4\mathrm{M}{\times}32$ 位
  - 数据线: 32根
  - 地址线: 22根 $(2^{22}\,{=}\,4\mathrm{M})$

- Flash存储芯片组成分析
  - 芯片规格: $512\mathrm{K}{\times}8$ 位
  - 位扩展: 4片组成 $512\mathrm{K}{\times}32$ 位
  - 字扩展: 8组组成 $4{\bf{M}}{\times}32$ 位
  - 总需芯片数: $4\!\times\!8=32$ 片

- 地址线分配
  - CPU地址线: $\mathbf{A}_{0}{\sim}\mathbf{A}_{21}$
  - $\mathrm{A_{0}}{\sim}\mathrm{A_{18}}$: 片内地址(19位)
  - $\mathrm{A_{19}}$ $\mathrm{A}_{20}$ 、$\mathrm{A}_{21}$: 片选信号(3位)

03.【解答】
- 存储器容量分析
  - 总容量: $16\mathrm{K}\!\times\!16$ 位
  - RAM芯片: $1K\times4$ 位
  - 所需芯片数: $16K\!\times\!16$ 位/$\mathrm{1K\times4}$ 位 $=64$ 片

- 异步刷新分析
  - 刷新周期: $2\mathrm{ms}$
  - 刷新间隔: $2\mathrm{ms}/64=31.25\upmu\mathrm{s}$
  - 实际取值: $31\upmu\mathrm{s}$

> attention  
刷新周期也可取 $30\upmu\mathrm{s}$ ，只要小于 $31.25\upmu\mathrm{s}$ 即可，但通常取刷新间隔的整数部分。

# 3.4.4 答案与解析  

# 一、单项选择题  

01.B
- 闪存特点
  - 在EPROM基础上发展
  - 本质是只读存储器

- RAID特性
  - 多个物理盘组成单个逻辑盘
  - 不影响磁记录密度
  - 不会提高磁盘利用率

- 磁盘格式化过程
  - 需划分扇区
  - 写入控制信息
  - 扇区尾部留空隙
  - 实际容量小于非格式化容量

02.A
- 磁盘地址组成
  - 磁道号(柱面号)
  - 磁头号(盘面号) 
  - 扇区号

03.D
- 磁盘数据交换特点
  - 以成批方式读写
  - CPU通用寄存器数量有限
  - 速度差异大
  - 通常与主存直接交换

04.C
- 磁盘存取步骤
  - 启动磁头
  - 寻找磁道(寻道时间)
  - 查找扇区(旋转延迟时间)
  - 传输数据

- 转速提高影响
  - 寻道时间无影响
  - 存取速度提高但不到一倍
  - 平均旋转延迟时间减半
  - 传输速率提高

05.B
- 固态硬盘特性
  - 以块为单位擦除
  - 以页为单位读写
  - 写入速度慢于读取
  - 写入次数有限

06.D
- 固态硬盘优势
  - 基于闪存技术
  - 无机械部件
  - 随机读写速度快
  - 常用作外存而非主存

07.C
- 磁盘数据传输计算
  - 转速: 7200转/分 = 120转/秒
  - 每圈160个扇区
  - 每扇区512B
  - 传输速率: $120 \times 160 \times 512/1024 = 9600\mathrm{KB}$

08.D
- 磁道容量与传输速率计算
  - 每磁道容量: $60\mathrm{MB}/200 = 0.3\mathrm{MB}$
  - 读取时间: $25\mathrm{ms} - 1.25\mathrm{ms} \times 8 = 15\mathrm{ms}$
  - 传输速率: $0.3\mathrm{MB}/15\mathrm{ms} = 20\mathrm{MB}/\mathrm{s}$

09.B
- 磁盘访问时间计算
  - 转速: 10000转/分, 每圈6ms
  - 平均查询扇区时间: 3ms
  - 平均寻道时间: 6ms
  - 读取4KB时间: $4\mathrm{KB} \div 20\mathrm{MB/s} = 0.2\mathrm{ms}$
  - 控制器延迟: 0.2ms
  - 总时间: $3 + 6 + 0.2 + 0.2 = 9.4\mathrm{ms}$

10.B
- RAID可靠性措施
  - RAID0: 无余和无校验
  - RAID1~RAID5: 有镜像或校验
  - 条带化特点
    - 数据分片存储
    - 提高读写速度
    - 无冗余性
    - 常与镜像或校验结合

11.B
- 存取时间计算
  - 平均延迟时间: $(60/7200)/2 = 4.17\mathrm{ms}$
  - 传输时间: $(60/7200)/1000 = 0.01\mathrm{ms}$
  - 总存取时间: $4.17 + 0.01 + 8 = 12.18\mathrm{ms}$
  - 保留一位小数: $12.2\mathrm{ms}$

12.C
- 磁盘存储特性
  - 最小读写单位为扇区
  - 需要格式化
  - 格式化容量小于非格式化容量
  - 扇区包含数据、地址和校验信息
  - 由磁盘控制器、驱动器和盘片组成
# 二、综合应用题  

01.【解答】

- 1)磁盘容量计算
  - 磁道总数计算
    - 有效存储区域 $=15.5-10=5.5\mathrm{cm}$
    - 道密度 $=60$ 道/cm
    - 每个面磁道数 $=60\!\times\!5.5=330$ 道(柱面数)
    - 磁道总数 $=4{\times}330=1320$ 个磁道

  - 磁盘总容量计算
    - 外层磁道长度 $2\pi R=2\!\times\!3.14\!\times\!15.5=97.34\mathrm{cm}$
    - 每道信息量 $\mathbf{\tau}=600\mathbf{b}\mathrm{i}/\mathbf{cm}\times97.34\mathbf{cm}=58404\mathrm{b}\mathrm{i}=7300\mathbf{B}$
    - 磁盘总容量 $\mathbf{\Pi}=7300\mathbf{B}\mathbf{\times}1320=9636000\mathbf{B}$ (非格式化容量)

- 2)文件存储策略
  - 超过一个磁道容量的文件应记录在同一柱面
  - 无需重新寻找磁道,数据读/写速度快

- 磁盘编址格式
  - 采用定长数据块格式
  - 最小寻址单位为扇区
  - 每个扇区记录固定字节数信息
  - 活动头磁盘组编址格式:

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/8cfd8412ea63a0e85eaa0d0e4f85ff011096379c573fc7eb8cb2c1d6fc700b0a.jpg)  

  - 3)格式说明
    - 4个记录面
    - 每面128个磁道
    - 每道最多16个扇区

- 4)磁盘存取时间计算
  - 读取一个扇区时间组成
    - 找磁道时间(平均值10.5ms)
    - 找扇区时间(磁盘半周时间5ms)
    - 扫过一个扇区时间(0.83ms)
  - 具体计算
    - 磁盘转速6000转/分=100转/秒
    - 一周时间10ms,半周5ms
    - 每道12个扇区,扫过一个扇区时间 $10/12=0.83\mathrm{ms}$
    - 平均存取时间 $10.5+5+0.83=16.33\mathrm{ms}$

# 3.5.7 答案与解析  

# 一、单项选择题  

01.B
- Cache与主存储器的关系
  - 各层次存储系统不是孤立工作的
  - 三级结构存储系统围绕主存组织管理
  - 需遵循包含性原则
  - Cache存放主存信息副本
  - 总容量不是简单相加

02.C
- CPU与Cache/主存的信息交互
  - 块由若干字组成
  - CPU与Cache/主存交互单位是字
  - Cache与主存交互单位是块
  - CPU访问字不在Cache时
    - 调入该字所在主存块到Cache

03.C
- Cache命中率计算
  - 已知条件
    - Cache命中时存取时间2ns
    - 不命中时总存取时间42ns
    - 平均存取时间3ns
  - 设Cache命中率为 $x$
  - 计算方程 $2x + 42(1-x) = 3$
  - 解得 $x = 97.5\%$

04.D
- Cache写策略分类
  - 写不命中策略
    - 写分配法:加载到Cache再更新
    - 非写分配法:直接写入主存
  - 写命中策略
    - 回写法
    - 全写法
  - 策略搭配
    - 写分配法配回写法
    - 非写分配法配全写法

05.A
- 不同写策略的适用场景
  - 回写法
    - 适合写操作密集
    - 速度快
  - 全写法
    - 保持数据一致性
    - 适合高安全性要求

06.C
- 程序局部性分析
  - 时间局部性
    - 循环变量i和sum重复引用
  - 空间局部性
    - 指令顺序存放执行
    - 数据以向量数组形式存储

07.B
- 提高空间局部性的方法
  - 按数组内存存储顺序访问
  - C语言数组存储规则
    - 最右下标变化最快
  - 优化建议
    - 第2行与第4行互换
    - 实现顺序访问

08.A
- Cache特性说明
  - 功能由硬件实现
  - 替换单位是块
  - 地址空间独立映射
  - 信息一致性不保证

09.D
- Cache特性比较
  - 指令Cache vs 数据Cache
    - 空间局部性更好
    - 指令流顺序执行
  - 块大小影响
    - 增加可提高命中率
  - 写策略区别
    - 写回法换出时写回
    - 写直达法实时写回

10.A
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/6ca95328eda743bf11e48cf9d6cae6c3cd6b2972d0ef00bd22e02aed0822228e.jpg)
- 页面失效率计算
  - 失效率 = $6/20 = 30\%$

11.A
- 多级Cache命中率计算
  - 访存1000次
  - 第2级Cache后10次不命中
  - 总命中率 = $1-10/1000 = 99\%$

12.A
- Cache映射方式
  - $K=1$ : 直接映射
  - $K=M$ : 全相联映射
  - 其他: $K$ 路组相联映射
13.C
- LRU算法特点
  - 基于程序访问局部性原理
  - 选择近期使用最少的存储块作为替换块

14.D
- 地址映射表分析
  - 结构特点
    - 即标记阵列
    - Cache分64块,每块一行
    - 采用直接映射
  - 标记项组成
    - 主存标记12位(Cache容量的4096倍)
    - 有效位1位
  - 总位数计算
    - $64 \times 13$ 位

15.C
- Cache地址结构分析
  - 块内地址
    - 块大小16B,占4位
  - 组号字段
    - 128KB容量,8路组相联
    - 1024组,占10位
  - 标记字段
    - 1234567H的二进制转换
    - 高14位为标记字段
    - 结果为048DH

16.A
- 主存地址分析
  - 二进制形式
    - $0011\;0101\;0011\;0000\;0001$
  - 地址结构
    - 字块内地址:低5位(32B块)
    - 主存字块标记:高6位(1MB/16KB=64)
    - Cache字块地址:中间位转十进制为152

17.C
- CPU访存地址分析
  - 发送主存物理地址
  - 虚拟地址仅用于虚拟存储系统
  - CPU不直接访问磁盘地址

18.C
- 地址位数分析
  - 逻辑地址
    - 页号3位(8页)
    - 页内地址10位(1024B)
    - 总共13位
  - 物理地址
    - 块内地址10位
    - 块号至少5位(32块)
    - 总共至少15位

19.B
- Cache参数变化影响
  - 块大小增加一倍
    - 字块内地址位数+1
    - Cache组数减半
    - 组号位数-1
  - Tag字段位数不变

20.B
- Cache映射分析
  - 直接映射
    - 块大小16B,4位块内地址
    - 16行Cache,4位行号
    - 地址48和308映射到行3
  - 2路组相联
    - 8组Cache,3位组号
    - 地址48和308映射到组3

21.D
- Cache容量计算
  - 块大小
    - 1字(32位)
    - 块内地址2位
  - 标志字段
    - 全相联映射
    - 30位标志
  - 每行位数
    - 32位数据
    - 30位tag
    - 1位修改位
    - 1位有效位
    - 总64位
  - 总容量
    - $32K \times 64bit = 2048K$ bit

22.A
- Cache组号确定
  - 块大小32字节,块内地址5位
  - 四路组相联,64行16组,组号4位
  - 2593号单元组号为0001

23.C
- 缺失损失时间计算
  - 读取需求
    - 一个主存块64B
    - 每次8B,需8次
  - 时间计算
    - 每次10个时钟周期
    - 总共80个时钟周期

24.A
- 突发传送时间计算
  - 传送需求
    - 一个主存块64B
    - 每次8B×8=64B
  - 时间计算
    - 首地址和读命令1周期
    - 流水线启动8周期
    - 传送8周期
    - 总共17个时钟周期

25.B
- 替换算法分析
  - 直接映射无需替换
  - 组相联和全相联需替换
  - 先进先出算法需时间戳

26.D
- 主存块大小影响
  - 太小影响
    - 空间局部性利用差
    - 缺失率高
  - 太大影响
    - Cache行数减少
    - 命中率降低
  - 建议大小
    - 几十到上百字节

27.D
- 命中率计算
  - 命中率公式
    - Cache命中次数/总访问次数
  - 注意缺失次数与命中次数区别

28.C
- Cache映射分析
  - 组织结构
    - 16块二路组相联
    - 8组,组号3位
  - 地址分析
    - 块大小32B,块内地址5位
    - 129映射到组号4

29.C
- 二路组相联映射过程
  - 地址映射规则
    - 0~1,4~5,8~9映射第0组
    - 2~3,6~7映射第1组

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/5c6d3488af8e8163b07751cb16ce02d55798381ef41b13fc464e42476c0971b7.jpg)

> attention

在不同的计算机组成原理教材中,关于组相联映射的介绍并不相同。

通常是采用上题中的方式,也是本书及唐朔飞所编教材中的方式,但本题中采用的是蒋本珊所编教材中的方式。
可以推断两次命题的老师应该不是同一老师,这也给考生答题带来了困扰。

30.C
- Cache缺失率分析
  - 语句访问特点
    - a[k]读取一次
    - a[k]写入一次
  - 缺失情况
    - 首次访问缺失
    - 后续7次命中
  - 缺失率约1/8

31.A
- 程序局部性分析
  - 时间局部性
    - 外层循环重复访问数组a
  - 空间局部性
    - 顺序访问数组a

32.A
- Cache行组成分析
  - 数据区大小
    - 32KB,32B块大小
    - 1K个Cache行
  - 地址结构
    - 偏移量5bit
    - 组号10bit
    - tag17bit
  - 总位数
    - 32B数据
    - 17bit tag
    - 1bit脏位
    - 1bit有效位
    - 共275bit

33.A
- Cache组相联映射分析
  - 地址结构
    - 块内地址6位(64B块)
    - 组号6位(64组)
    - Tag标记20位

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/6367334f9ded4fbae6a7b359ccdaedc1d6194c5bbf1663799c71f6d287334c98.jpg)

  - 比较器设计
    - 数量:8个(8路组相联)
    - 位数:20位(Tag位数)
    - 功能:并行比较Tag标记

# 二、综合应用题  

01.【解答】
- Cache写策略选择
  - WriteBack策略
    - 减少访存次数
    - 存在数据不一致隐患
  - WriteThrough策略
    - 保证数据一致性
    - 适用于高安全要求场景

02.【解答】
- Cache地址结构分析
  - 块内地址
    - 64B块大小,占6位
  - 组号字段
    - 128块/4路=32组
    - 占5位
  - 标记字段
    - 32-5-6=21位
- Cache总位数计算
  - 标记项总位数
    - 每块标记项包含:标记字段、有效位、脏位
    - 128×(21+1+1)=2944位
  - 数据块位数
    - 128×64×8=65536位
  - 总位数=68480位

03.【解答】
- Cache组织结构分析
  - 行数计算
    - 64KB/128B=512行
    - 四路组相联,512/4=128组
  - 标记项分析
    - 512个标记项
    - 标记位长度=32-7-7=18位
- 替换策略设计
  - LRU策略
    - 每标记项2位替换控制位
  - 全写法
    - 无脏位,1位有效位
    - 每标记项21位
    - 总大小512×21=10752位
  - 回写法
    - 加1位一致性控制位
    - 总大小512×22=11264位

04.【解答】
- Cache映射分析
  - 基本参数
    - 32B块大小
    - 256B/32B=8行
    - 2路组相联=4组
- 直接映射性能
  - s=64情况
    - 访存顺序:a[0],a[64]循环
    - 映射冲突,缺失率100%
  - s=63情况
    - 访存顺序:a[0],a[63],a[126]循环
    - 部分冲突,缺失率67%
- 2路组相联映射性能
  - s=64情况
    - 可放同组不同行
    - 仅2次缺失,缺失率≈0
  - s=63情况
    - 可放同组不同行
    - 仅3次缺失,缺失率≈0

05.【解答】
- Cache行结构设计
  - 标记项组成
    - 地址28位
    - 块内地址6位
    - Cache块号3位
    - Tag 19位
    - 有效位1位

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/5b8b46f643df17cfaede8b1aa0b4e4b3f0c7a24d95f225e459403c0e5a084b5d.jpg)

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/bb5acc0009f8543760c114f98c5cd228eb0b76b77dd344f3567ea462668afe6e.jpg)

- Cache容量计算
  - 8行×(64+20/8)B=532B

- 数组映射分析
  - 存储布局

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/2bb734350f3df8989ece04f9459fe312b57e24670735ad7b4f962b26e81f7f78.jpg)

  - 行号计算
    - a[0][31]:行号6
    - a[1][1]:行号5

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/1c6ed13a6f46155b86b2d616d6569c490fbe99a61d5bef41a08d41b179c3c3c7.jpg)

- 命中率分析
  - 程序A(按行访问)
    - 每块16个数据
    - 命中率93.75%
  - 程序B(按列访问)
    - Cache容量不足
    - 命中率0

06.【解答】
- 时钟周期计算
  - CPU:1/800MHz=1.25ns
  - 总线:1/200MHz=5ns
  - 总线带宽:800MB/s
- 总线事务分析
  - 地址传送:5ns
  - 数据准备:40ns
  - 数据传送:8×5ns
  - 总时间:85ns
- CPU执行时间分析
  - Cache命中:5ns
  - 缺失开销:102ns
  - 总执行时间:1010ns

07.【解答】
- Cache结构分析
  - 块大小:64B
  - 组数:64
  - 标记位:20位
  - LRU位:3位
- 访问性能分析
  - 数组s
    - 64个主存块
    - 每块16个元素
    - 缺失次数64次
  - 指令访问
    - 组索引0
    - 初始缺失
    - 更新标记和控制位



# 3.6.7 答案与解析  

# 一、单项选择题  

01.【解答】
- 虚拟存储系统特点
  - 利用局部性原理
  - 程序需具有较好局部性
  - 输入输出操作与虚存无关
  - 程序大小不影响虚存效果
  - 顺序执行指令应占较大比重

02.【解答】
- 局部性原理含义
  - 时间局部性
    - 指令或数据使用后近期可能再次访问
  - 空间局部性
    - 邻近指令或数据可能近期使用
  - 程序只能访问主存获得指令和数据

03.【解答】
- 虚拟存储方式比较
  - 页式:按页进行交互
  - 段页式:先逻辑分段后分页,以页为单位交互

04.【解答】
- 虚拟存储透明性
  - 对系统程序员不透明:需实现地址映射
  - 对应用程序员透明:使用逻辑地址

05.【解答】
- 虚拟存储器实现
  - 需操作系统完成地址映射
  - 需硬件支持(快表、地址映射系统等)

06.【解答】
- 虚拟存储器目的
  - 解决内存容量不够大的问题

07.【解答】
- 页表与Cache关系
  - 页表不命中时Cache必不命中
  - Cache缺失由硬件处理
  - TLB缺失可由硬件或软件处理
  - 虚拟存储器容量限制

08.【解答】
- 段的特点
  - 与程序逻辑分界对应
  - 易于编译、修改、保护和共享

09.【解答】
- 虚拟存储管理特点
  - 逻辑地址空间大于主存空间
  - MMU进行地址转换
  - 通过页表项判断缺页

10.【解答】
- 页表特性
  - 反映页面位置和使用信息
  - 仅系统和硬件可访问
  - 对用户进程透明

11.【解答】
- 缺页性质
  - 属于内部异常
  - 发生于指令执行过程

12.【解答】
- 分段方式特点
  - 对低级语言程序员不透明
  - 需使用段号编程
  - 编译器需使用段号链接

13.【解答】
- 快表与慢表比较
  - 快表采用硬件实现高速
  - 慢表依赖查找算法
  - 命中率无必然联系

14.【解答】
- TLB与Cache关系
  - Cache命中时Page必命中
  - TLB命中时Page必命中
  - Page命中时TLB可能不命中

15.【解答】
- 地址转换过程
  - 页面大小4KB,页内地址12位
  - 虚拟地址32位,页号20位
  - 页框号与页内地址拼接为物理地址

16.【解答】
- 指令执行访存分析
  - 取数可能直接访问Cache
  - 直写方式需同时写Cache和主存

17.【解答】
- Cache地址结构分析
  - 块大小16B,字块内地址4位
  - Cache行数1K,标记10位
  - 主存标记18位
- Cache容量计算
  - 标记阵列:20K位
  - 存储容量:128K位
  - 总容量:148K位

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/29a5cd848995adbcdc0b0a61ee30283897b0755702526a702eedcbfd9f298149.jpg)

18.【解答】
- 缺页中断处理
  - CPU检测到异常产生中断
  - 由中断程序完成缺页处理
  - 处理后返回原指令继续执行

19.【解答】
- 存储器组成
  - Cache由SRAM组成
  - TLB由SRAM组成
  - DRAM不适合组成TLB和Cache

20.【解答】
- 地址转换实例
  - 页大小4KB,页内地址12位
  - 虚拟地址32位,页号20位
  - 页框号与页内地址拼接得主存地址

# 二、综合应用题  

01.【解答】

- 地址转换过程
  - 所有地址可转换为页号和页内偏移量
  - 转换步骤
    - 取出逻辑页号
    - 查找页表获得页框号 
    - 页框号与页内偏移量拼接得到物理地址

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/35e3d360d5c97ebd6263089d17a2af929bf5def7da1edfb5365702b009e69319.jpg)  

注：在本题中，物理地址 $=$ 页框号×1024B $^+$ 页内偏移量，页内偏移量 $=$ 逻辑地址-逻辑页号x1024B，逻辑页号 $=$ 逻辑地址/1024B（结果向下取整）。

02.【解答】

- 地址转换实例
  - 虚拟地址1转换
    - 页号15,页内地址0324
    - 对应主存起始位置80000
    - 实地址码 $0324+80000=80324$
  - 虚拟地址2转换
    - 实地址码 $0128+96000=96128$
  - 虚拟地址3转换
    - 页号48在快表无记录
    - 该页面在快表中无对应项

03.【解答】

- LRU替换策略分析
  - 页面访问请求后的主存位置变化

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/e5d97e102b608f5c205626050b04deabe246839b152fb0bfb7da24dcff7349ab.jpg)

  - 命中率计算
    - 30次访存,13次命中
    - 命中率为 $13/30=43\%$

04.【解答】

- 地址结构分析
  - 虚拟地址空间
    - 大小16MB = $2^{24}$B
    - 虚拟地址24位
    - 页面大小4KB = $2^{12}$B
    - 高12位为虚页号
  - 物理地址空间
    - 大小1MB = $2^{20}$B
    - 物理地址20位
    - 页内地址12位
    - 高8位为物理页号

- Cache映射分析
  - 直接映射方式物理地址字段划分

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/0a7e72355443358451452532f9144a08fa1fe2e9dda183d0e916ebb4a4e3f9f0.jpg)

  - 块大小32B,字块内地址5位
  - Cache 8行,Cache字块标记3位
  - 主存字块标记12位

- 虚拟地址转换过程
  - 地址001C60H分析
    - 虚页号001H
    - 页表项有效位为1
    - 页框号04H
    - 物理地址04C60H
  - Cache访问结果
    - 映射到第3行
    - 有效位=1
    - 标记不匹配,未命中

- TLB访问分析
  - 四路组相联结构
    - 2个组,虚页号高11位为标记
    - 最低1位为组号
  - 地址024BACH访问
    - 虚页号0000 0010 0100B
    - TLB标记012H
    - 组号0,命中

05.【解答】

- 地址字段分析
  - 页面相关参数
    - 页大小8KB,页内偏移13位
    - A=B=19, D=13, C=11
  - Cache相关参数  
    - 块大小64B, G=6
    - 二路组相联,512组
    - F=9, E=9

- 块号映射分析
  - 块号4099二进制表示
  - Cache组号3
  - H字段内容000001000B

- 性能开销分析
  - Cache缺失开销小,只需访问主存
  - 缺页开销大,需要访问磁盘

- 写策略选择
  - Cache-主存可用直写策略
  - 主存-外存必须用回写策略
  - 原因是写磁盘比写主存慢很多
06.【解答】
- 物理地址分析
  - 物理地址由实页号和页内地址拼接
  - 位数为 $16+12=28$ 或 $20+3+5=28$

- TLB特性
  - 采用全相联映射
    - 页表内容可调入任意空TLB项
    - 每项都有比较器
    - 无映射规则,只要空闲即可
  - 使用静态存储器(SRAM)
    - 读/写速度快
    - 成本高
    - 适用于小容量高速缓存

- Cache结构分析
  - 映射方式
    - 二路组相联映射
    - 每组两行
  - 控制位
    - 每行1位LRU位(采用LRU替换算法)
    - 每行1位修改位(回写策略)
    - 每行1位有效位
  - 地址结构(28位物理地址)
    - Tag字段20位
    - 组索引字段3位
    - 块内偏移5位
  - 容量计算
    - 8组($2^3$)
    - 每组2行
    - 每行32B($2^5$)
    - 总容量 $8×2×(20+1+1+1+32×8)=4464\text{b}=558\text{B}$

- 虚拟地址转换分析
  - 地址结构
    - 虚拟地址:虚页号+页内地址
    - 物理地址:实页号+页内地址
  - 转换过程
    - 用虚页号查TLB表
    - 取出实页号与页内地址拼接
  - 具体示例(虚页号0008CH)
    - TLB命中,对应实页号0040H
    - 页内地址040H
    - 物理地址0040040H
    - Cache访问分析
      - 标志字段00400H
      - 组号2(010B)
      - 不命中(有效位为0或标志不匹配)
    - 物理地址低12位分析
      - 值为 $0010\,0110\,0000\text{B}$
      - 组号为3(011B)

07.【解答】
- TLB结构分析
  - 页面大小
    - $4\text{KB}=2^{12}\text{B}$
    - 页内地址12位
  - 虚拟地址结构
    - 高18位为虚页号
    - 低12位为页内地址
  - TLB组织
    - 二路组相联
    - 8组($2^3$)
    - 3位组号
    - 15位TLB标记

- 虚页号替换分析
  - 映射规则:组号=虚页号mod8
  - 访问序列映射结果
    - 10→2, 12→4, 16→0, 7→7
    - 26→2, 4→4, 12→4, 20→4
  - 4号组超过两路
    - 按LRU策略
    - 虚页号4被替换

- 地址扩展影响
  - 虚拟地址增加2位(32-30)
  - TLB表项标记字段增加2位
  - 每个表项位数增加2位

08.【解答】
- 数组存储分析
  - 起始地址 $0042\,2000\text{H}$
  - 页面大小4KB(12位偏移)
  - 数组大小
    - $24×64=1536$个元素
    - 每个int 4字节
    - 总占用6KB
  - 页面分布
    - 跨两个相邻页面(00422H和00423H)
    - 首次访问产生两次缺页
    - 故障地址:00422000H和 $0042\,3000\text{H}$

- 局部性分析
  - 数据访问特点
    - 每个元素只访问一次
    - 无时间局部性

- Cache映射分析
  - 物理地址结构
    - Tag标记+Cache组号+块内地址
    - 块大小32B(5位块内地址)
    - 256行,4路组相联,64组(6位组号)
  - a[1][0]访问分析
    - 虚拟地址 $0042\,2100\text{H}$
    - Cache组号8(001000B)

- Cache命中率分析
  - 数组块占用
    - 总块数192($24×64×4/32$)
    - 每块8个元素
  - 命中率计算
    - 每8个访问7次命中
    - 命中率87.5%
  - 原因分析
    - 8行元素占64块
    - 每组3个Cache行
    - 4路组相联足够存放
    - 无替换发生

# 4.1.7 答案与解析  

# 一、单项选择题  

# 一、单项选择题

01.D
- 指令集体系结构(ISA)
  - 定义软硬件接口
  - 是机器语言/汇编语言程序员需熟悉的
  - 指令系统是计算机硬件的语言系统

02.A  
- ISA的定义与内容
  - 软硬件接口的完整定义
  - 包含内容
    - 基本数据类型
    - 指令集
    - 寄存器
    - 寻址模式
    - 存储体系
    - 中断和异常处理
    - 外部I/O
  - 规定内容
    - 指令执行所需信息
    - 指令功能和效果
  - 控制信号属于微架构层面

03.A
- PC与指令地址码的区别
  - PC存放当前欲执行指令地址
  - 指令地址码字段保存操作数地址

04.A
- 不同指令的寻址对象
  - 运算型指令寻址操作数
  - 转移型指令寻址下次执行指令地址

05.D
- 程序控制类指令功能
  - 改变程序执行顺序
  - 实现程序测试、分析、判断和循环能力

06.C
- 程序控制类指令范围
  - 包含指令类型
    - 无条件转移
    - 有条件转移
    - 子程序调用和返回
    - 循环指令
  - 中断隐指令
    - 由硬件实现
    - 不属于指令系统

07.C
- 特权指令特点
  - 仅用于操作系统/系统软件
  - 不提供给用户使用
  - 确保系统与数据安全

08.C
- 零地址运算类指令
  - 又称堆栈运算指令
  - 操作数来源
    - 栈顶单元
    - 次栈顶单元

> attention
- 堆栈指令访存次数
  - 软堆栈(内存实现)
    - 双目运算需4次访存
      - 取指令
      - 取源数1
      - 取源数2
      - 存结果
  - 硬堆栈(寄存器实现)
    - 仅需取指令1次访存

09.B
- 指令地址个数与长度关系
  - 无必然联系
  - 单地址指令可能因寻址方式不同有不同长度

10.B
- 单地址指令特点
  - 只有一个地址码
  - 两操作数运算时
    - 一个由地址码指出
    - 另一个在累加寄存器(隐含寻址)

11.B
- 存储容量计算
  - $16\text{M}=2^{24}$
  - 32位字长
  - 半字(16位)寻址
  - 存储单元数 $8\text{M}(=2^{23})$

12.B
- 操作码位数确定
  - $128=2^7<200<2^8=256$
  - 定长操作码至少需要8位

13.C
- 扩展操作码特点
  - 不改变指令长度
  - 操作码长度随地址码减少而增加

14.D
- 指令设计数量计算
  - 地址码12位
  - 二地址指令操作码 $32-12-12=8$ 位
  - 已定义250条二地址指令
  - 可设计单地址指令数 $6\times2^{12}=3\times2^{13}$

15.A
- 指令字长计算
  - 三地址指令29条
    - 操作码至少5位
  - 二地址指令计算
    - 剩余3种操作码
    - 额外6位操作码
    - 最大数量 $3\times64=192$
  - 指令字长要求
    - 最少23位
    - 需8的倍数
    - 最终至少24位

16.B
- ISA规定范围
  - 位于软/硬件交界面
  - 包含内容
    - 指令字和格式
    - 通用寄存器个数和位数
  - 不包含内容
    - CPU时钟周期
    - 加法器进位方式

17.D
- 指令数量计算
  - 地址码6位
  - 指令空间占用关系
    - 二地址占用 $2^6$ 个一地址空间
    - 一地址占用 $2^6$ 个零地址空间
  - 零地址指令数计算
    - 总空间 $2^{16}$
    - 减去高级指令占用空间
    - 结果为128条
# 二、综合应用题  

01.【解答】
- 指令长度计算
  - 基本条件
    - 142条指令需8位操作码 $(2^8=256)$
    - 32个寄存器需5位编码
    - 立即数需16位
  - 不同类型指令长度
    - 20%一输入一输出寄存器指令
      - 需 $8+5+5=18$ 位
      - 对齐到24位
    - 30%两输入一输出寄存器指令
      - 需 $8+5+5+5=23$ 位
      - 对齐到24位
    - 25%一输入一输出带立即数指令
      - 需 $8+5+5+16=34$ 位
      - 对齐到40位
    - 25%一立即数输入一输出指令
      - 需 $8+16+5=29$ 位
      - 对齐到32位
  - 空间效率比较
    - 定长编码为40位
    - 变长编码平均30位
    - 变长节省25%存储空间

02.【解答】
- 操作码分析
  - 基本条件
    - 6位地址码
    - 二地址指令操作码 $16-6-6=4$ 位
    - 可有16种操作
  - 指令数量关系
    - 零地址指令M种
    - 一地址指令N种
    - 二地址指令最多 $16-M-N$ 种
- 扩展操作码技术
  - 二地址指令
    - 4位操作码
    - 最多15种操作
  - 操作码长度变化
    - 二地址4位
    - 一地址10位
    - 零地址16位
  - 指令数量计算
    - 一地址指令R条
    - 一地址最多 $(2^4-P)\times2^6$ 条
    - 零地址最多 $[(2^4-P)\times2^6-R]\times2^6$ 条
    - R计算公式: $R=(2^4-P)\times2^6-\left\lceil Q\times2^{-6}\right\rceil$

03.【解答】

1)
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/38ef7b4e68e3a7b08474f441f81ab33eeb932a184a4e8eb051d0d03f765b7674.jpg)

2)
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/0f3da896c1d01c426c5089e207779cc1657223d154581f5519ec6cd7b1635e45.jpg)

3)
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/c690c5f72307ac5a540da94ad269c4415aaf881198bac8f305dbd7ea59543837.jpg)

# 4.2.4 答案与解析  

# 一、单项选择题  

01.B
- 寻址方式的目的
  - 缩短指令字长
  - 扩大寻址空间 
  - 提高编程灵活性
  - 提高指令译码复杂度
  - 程序控制依靠转移指令实现

02.A  
- 转移指令的三种属性
  - 条件/无条件转移
    - 条件转移需判断条件是否成立
    - 无条件转移直接转移(如函数调用和返回)
  - 直接/间接转移
    - 直接转移:目标地址在指令中
    - 间接转移:目标地址在寄存器或内存中
  - 相对/绝对转移
    - 相对转移:目标地址为PC值加偏移量
    - 绝对转移:目标地址由指令或寄存器给出

03.D
- 寄存器寻址特点
  - CPU寄存器数量少
  - 编码短
  - 地址段位数为log(通用寄存器个数)
  - 有效缩短地址段位数
- 其他寻址方式
  - 立即寻址:操作数在指令中
  - 变址寻址:EA = IX内容 + 形式地址A
  - 间接寻址:存放主存地址

04.B
- 隐含寻址特点
  - 不明显给出操作数地址
  - 在指令中隐含操作数地址
  - 可简化地址结构

05.B
- 寻址方式速度比较(从快到慢)
  - 立即寻址:直接给出操作数
  - 寄存器寻址:访问一次寄存器
  - 直接寻址:访问一次内存
  - 间接寻址:访问内存两次以上

06.A
- 直接寻址特点
  - 指令字中形式地址即为操作数有效地址

07.B
- 变址寻址有效地址计算
  - EA = ((X) + A)
  - 寄存器内容和指令地址码相加得到操作数地址码

08.B
- 变址寻址和基址寻址比较
  - 变址寻址便于处理数组问题
![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/e8049d7cf56958be7a1f660caf7f89e2bc1af43f990c17979558b13f34996147.jpg)

09.B
- 堆栈操作顺序
  - 进栈
    - 先压入数据:A→M_SP
    - 后修改指针:(SP)-1→SP
  - 出栈
    - 先修改指针:(SP)+1→SP
    - 后弹出数据:(M_SP)→A

10.D
- 相对寻址特点
  - EA = (PC) + A
  - PC已完成加1操作
  - 以下一条指令地址为基准位置的偏移量

11.C
- 堆栈类型
  - 硬堆栈:寄存器堆栈
  - 软堆栈:主存中划分区域作堆栈(最常用)

12.C
- 跳跃寻址特点
  - 通过转移类指令实现
  - 可实现条件或无条件转移

13.B
- 小端方式存储示例
  - R2值:1234H
  - 内存1234H值:56H
  - 内存1235H值:78H
  - R1最终值:7856H

14.C
- PC值计算
  - 主存按字编址
  - 指令字长为1字(2字节)
  - 取指令后PC加1
  - 相对偏移量06H
  - 最终PC值:4000H+06H+1H=4007H

15.D
- 变址寻址计算
  - 指令2222H二进制:0010 0010 0010 0010B
  - 寻址特征位X=10
  - 使用X2变址寻址
  - EA=1188H+22H=11AAH

16.C
- 无条件转移指令执行
  - 指令字长16位(2字节)
  - 取指令后PC=2002H
  - 形式地址40H
  - 执行后PC=2002H+0040H=2042H

17.A
- 指令格式分析
  - 操作码:7位(可完成97种操作)
  - 寻址特征位:3位(六种寻址方式)
  - 地址码:6位(16-3-7=6)
  - 相对寻址偏移量范围:-32~+31
18.B
- 机器按字寻址特点
  - PC给出下一条指令字的访存地址
  - 取决于存储器的字数
  - IR用于接收取得的指令
  - 取决于指令字长

19.D
- 各种寻址方式访问结果分析
  - 直接寻址200访问操作数为300
  - 寄存器间接寻址(R)访问结果与I相同
  - 存储器间接寻址(200)
    - 主存地址200内容为有效地址
    - 有效地址为300
    - 访问操作数为400
  - 寄存器寻址R表示寄存器R内容为操作数

20.A
- 寄存器间接寻址计算
  - 有效地址 $\mathrm{EA}=(\mathrm{R}_{i})$
  - 8号寄存器内容为1200H
  - 因此 $\mathrm{EA}=1200\mathrm{H}$

21.D、C
- 补码扩充原理
  - 使用符号位补足
  - 正数补码扩充补0
  - 负数补码扩充补1

- 转移指令计算
  1) 正数情况
    - PC当前值240
    - 取指后PC值243
    - 目标地址290
    - 相对位移量 $290-243=47$
    - 补码为 $2\mathrm{FH}$
    - 第二字节为2FH
    - 第三字节为00H
  
  2) 负数情况  
    - PC当前值240
    - 取指后PC值243
    - 目标地址200
    - 相对位移量 $200-243=-43$
    - 补码为D5H
    - 第二字节为D5H
    - 第三字节为FFH

22.D
- 基址寻址计算
  - 有效地址为基址寄存器内容加形式地址
  - $\mathrm{C000~0000H+FF00H=C000}$ $\ensuremath{0000\mathrm{H}}+$ FFFFFI $\mathrm{{F00H}=}$ BFFFFF00H
  - 大端方式LSB存放地址为BFFFFF03H

23.D
- 指令功能分析
  - 算术与逻辑运算指令完成一个或两个数据运算
  - 移位操作用于左移或右移
  - 转移指令、子程序调用与返回指令用于变动程序指令执行次序

24.C
- 相对寻址计算
  - $\mathrm{EA}=(\mathrm{PC})+\mathrm{A}$
  - 转移指令2字节
  - 每取一字节PC加1
  - 取指令后PC值为2002H
  - $\mathrm{{EA}=(\mathrm{{PC})+A}=2002H+06H=2008H}$

25.A
- 各种寻址方式特点
  - 间接寻址: $\mathrm{EA}=(\mathrm{A})$
  - 基址寻址: $\mathrm{EA}=\mathbf{A}+$ BR内容
  - 相对寻址: $\mathrm{EA}=\mathrm{A}+$ PC内容
  - 变址寻址: $\mathrm{EA}=\mathrm{A}+$ IX内容

26.C
- 无符号整数比较指令bgt分析
  - 比较 $A$ 和 $B$
  - 若 $A>B$ 则 $A-B$ 无进位/借位且不为0
  - CF和ZF均为0

27.D
- 变址寻址过程
  - 变址寄存器内容(1000H)与形式地址(2000H)相加
  - 得到实际地址(3000H)
  - 访问内存获取操作数4000H

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/c0c2f4c24c538e3a48ebd79d22813dfd68fdf5bf3e8d5b13850ae4e8cabb7579.jpg)

28.A
- 32位定长指令字分析
  - 操作码8位
  - 两个地址码共24位
  - 寄存器直接寻址和基址寻址各占4位
  - 偏移量16位补码范围-32768~+32767

29.C
- 变址间接寻址计算
  - 变址寻址: $\mathrm{EA}=(\mathrm{I})+\mathrm{D}$
  - 间接寻址: $\mathrm{EA}=(\mathrm{D})$
  - 最终有效地址: $\mathrm{((I)+D)}$

30.D
- 各种寻址方式特点
  - 变址寻址适合访问一维数组元素
  - 相对寻址以PC为基地址
  - 寄存器寻址指出使用的寄存器
  - 直接寻址直接指出操作数有效地址

31.B
- 变址寻址数组下标计算
  - $\mathrm{EA}\,{=}\,(\mathrm{IC})+\mathrm{A}$
  - $\mathrm{\Delta(IV)=2100H-\Delta2000H=100H=256}$
  - sizeof(double)=8
  - 数组下标=256/8=32

32.D
- 基址寻址大端方式计算
  - $\mathrm{EA}=(\mathrm{BR})+\mathrm{A}$
  - BR内容为 $\mathrm{F}000\,\,0000\mathrm{H}$
  - 形式地址FF12H补码为 $1111\ 1111\ 0001\ 0010\mathrm{B}$
  - 有效地址 $\mathrm{F000\000H+(-00E E H)=E F F}$ FF12H
  - LSB地址为EFFFFF15H

33.A
- 指令编码分析
  - 48条指令需6位操作码
  - 4种寻址方式需2位特征位
  - 8位地址码
  - 直接寻址范围0~255

34.A
- 指令字段组成
  - 操作码
  - 寻址特征
  - 地址码
- 寄存器寻址方式
  - 直接寻址:寄存器存放操作数
  - 间接寻址:寄存器存放操作数地址

# 二、综合应用题  

01.【解答】

- 指令系统分析
  - OP字段长5位，可定义 $2^{5}\,{=}\,32$ 种指令
  - 各种寻址方式的EA计算公式和寻址范围

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/ea424a1fc017761cda43997f3930c83a8dc8761ce95ab6d12e32fe4e4dae0e98.jpg)

02.【解答】

- 不同寻址方式的操作数获取
  - 直接寻址
    - EA为地址码500
    - ACC获取800
  - 立即寻址 
    - 地址码500直接作为操作数
  - 间接寻址
    - EA存储在地址500中
    - EA为800，操作数为300
  - 相对寻址
    - EA = (PC) + A = 202 + 500 = 702
    - ACC获取325
  - 变址寻址
    - EA = (NR) + A = 100 + 500 = 600
    - ACC获取900
  - 寄存器寻址
    - R1内容400装入ACC
  - 寄存器间接寻址
    - EA为R1内容400
    - ACC获取700

03.【解答】

- 取指令后PC=1235H(按字编址)
- 不同X值的EA计算
  - X=00: D=20H, EA=20H
  - X=10: D=44H, EA=1122H+44H=1166H
  - X=11: D=22H, EA=1235H+22H=1257H
  - X=01: D=21H, EA=0037H+21H=0058H
  - X=11: D=23H, EA=1235H+23H=1258H

04.【解答】

- 编址方式分析
  - PC增量为2，指令2字节，按字节编址
- bgt指令分析
  - 有符号整数比较
  - 转移条件: ZF+(SF⊕OF)=0
- 转移目标地址范围
  - Imm9为补码，范围-128~127
  - 目标地址范围: PC+2+(-128×2)~PC+2+127×2

05.【解答】

- 各种寻址方式的EA和操作数
  - 直接寻址
    - EA=300
    - 操作数=400
  - 间接寻址
    - EA=400
    - 操作数=700
  - 相对寻址
    - EA=202+300=502
    - 操作数=900
  - 变址寻址
    - EA=100+300=400
    - 操作数=700
  - 基址寻址
    - EA=200+300=500
    - 操作数=600
  - 先变址后间址
    - EA=700
    - 操作数=401
  - 先间址后变址
    - EA=500
    - 操作数=600

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/2c2079d2980d724c722e492928f99eb8be47eca3321f95d3c4077b578c024322.jpg)

06.【解答】
- 指令系统分析
  - 操作码占4位，最多16条指令
  - 操作数占6位
    - 寻址方式占3位
    - 寄存器编号占3位，最多8个通用寄存器
  - 存储空间
    - 主存128KB，按字编址，字长16位
    - MAR至少16位
    - MDR至少16位

- 地址范围分析
  - 寄存器字长16位
  - PC地址范围 $0{\sim}2^{16}{-}1$
  - Rn相对偏移量 $-2^{15}{\sim}2^{15}-1$
  - 转移指令目标地址范围0000H～FFFFH

- 汇编指令分析
  - 指令"add(R4), $({\tt R}5)^{+}$"机器码

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/2409d3635499b265dd349dd8bd5f98585f11ca964ca8d7908e2b6e732ec6a1c8.jpg)

  - 十六进制形式 $0010\,0011\ 0001\ 0101\mathrm{B}=2315\mathrm{H}$
  - 指令功能
    - R4指向单元与R5指向单元数据相加
    - 结果存入R5指向单元
    - 执行过程
      - $(1234\mathrm{H})=5678\mathrm{H}$
      - $(5678\mathrm{H})=1234\mathrm{H}$
      - $5678\mathrm{H}+1234\mathrm{H}=68\mathrm{ACH}$
    - R5自增
    - 结果：R5从5678H变为5679H，5678H单元变为68ACH

07.【解答】
- 指令编址分析
  - 指令长度16位
  - 下一指令地址$(PC)+2$
  - 按字节编址

- 偏移量分析
  - OFFSET为8位补码，范围$-128{\sim}127$
  - 转移目标地址$(PC)+2+2\times\text{OFFSET}$
  - 向后最多跳转127条指令

- 条件转移分析
  - 条件：$C=0$，$Z=1$，$N=1$
  - 标志位状态
    - $CF=0$，$ZF=0$，$NF=1$时转移
      - 偏移量$1110\ 0011\mathrm{B}=\mathrm{E}3\mathrm{H}$
      - 符号扩展后FFE3H
      - 左移后FFC6H
      - 目标地址$200\mathrm{CH}+2+\mathrm{FFC6H}=1\mathrm{FD}4\mathrm{H}$
    - $CF=1$，$ZF=0$，$NF=0$时不转移
      - PC值$200\mathrm{CH}+2=200\mathrm{EH}$

- 指令设置分析
  - $C=Z=1$，$N=0$
  - 比较基于减法运算
  - 结果为0或负时转移

- 硬件部件分析
  - 部件$\textcircled{\scriptsize{1}}$：指令寄存器
  - 部件$\circledcirc$：移位寄存器
  - 部件$\mathcal{B}$：加法器

08.【解答】
- 指令系统容量
  - 操作码7位，最多128条指令

- 机器码分析
  - "incR1"：$0000001\;0\;01\;0\;00\;0\;00$ (0240H)
  - "shbar R2,R1"：$0000010\ 0\ 10\ 0\ 01\ 0\ 00$ (0488H)
  - "subR3,(R1),R2"：$0000011\;0\;11\;1\;01\;0\;10$ (06EAH)

- 控制信号分析
  - @00：mov
  - $\circledcirc$：mova
  - $\textcircled{3}$：left
  - $\textcircled{4}$：read
  - $^\mathrm{\textregistered}$：sub
  - $\textcircled{\scriptsize{2}}$：mov
  - $\circledast$：SRout

- 执行周期分析
  - "subR1,R3,(R2)"：至少4个时钟周期
  - "incR1"：至少2个时钟周期

09.【解答】
- 硬件参数分析
  - ALU：16位宽度
  - 地址线：20位，可寻址1MB
  - 指令寄存器：16位
  - MAR：20位
  - MDR：8位

- 指令格式分析
  - R型：操作码4位，最多16种操作
  - I型和J型
    - 操作码6位共享
    - 最多63种操作
  - 寄存器编码2位，最多4个通用寄存器

- 指令执行分析
  - 01B2H指令
    - R型有符号整数减法
    - $R[3]=B052H-0008H=B04AH$
    - 未溢出
  - 01B3H指令
    - R型有符号整数乘法
    - $R[3]=B052H\times0008H=8290H$
    - 结果溢出

- 跳转特性
  - 偏移量为有符号整数
  - 需进行符号扩展

- 无条件转移
  - 采用J型格式
  - target写入PC低10位

# 4.3.6 答案与解析  

# 一、单项选择题  

01.C
- 指令分析
  - Intel格式
  - add指令目的寄存器为ax
  - 补码加法过程
    - 111111111110 1000 + 0111 1111 1110 0110 = (1)0111 1111 1100 1110 (7FCEH)
    - 操作数符号不同，不会溢出，OF=0
    - 结果符号位为0，SF=0
    - 有进位，CF=C⊕Sub=1⊕0=1
    - 非0，ZF=0

> attention

无论是无符号数还是有符号数，都以二进制代码形式无差别地存放在计算机内。即便两个有符号数相加，也会导致CF的变动，只是CF值对有符号数运算是没有意义的。同理，两个无符号数相加，也会导致OF和SF的变动，只是OF值和SF值仅对有符号数运算有意义。

02.B
- 指令分析
  - Intel格式
  - sub指令目的寄存器为bx
  - 补码减法运算
    - 被减数+减数逐位取反+1 = 1111 1111 1110 1000 + 1000 0000 0001 1001 + 1 = (1)1000 0000 0000 0010 (8002H)
    - 操作数符号位都是1，结果符号位也是1，无溢出，OF=0
    - 结果为负数，SF=1
    - 进位输出Cout=1，低位进位Sub=1
    - CF=Cout⊕Sub=1⊕1=0
    - 非0，ZF=0

03.C
- 指令分析
  - imm值为-3
    - 二进制为1111111111111101B (FFFDH)
  - 小端存储
    - 机器码为2DFDFFH
  - OF标志位
    - 7-(-3)无溢出
    - OF=0

04.A
- 寻址分析
  - b[j]地址计算
    - 基址在edx
    - 索引在esi
    - 元素占4字节
    - 地址为R[edx]+R[esi]*4
  - Intel格式
    - 第一个为目的操作数
    - 第二个为源操作数

05.C
- 指令分析
  - 源操作数地址
    - R[eax]+R[ebx]*4=080480B4H+0000011H*4=080480F8H
  - 指令功能
    - R[ecx]←M[080480F8H]*(-16)
    - (-000000B0H)<<4=FFFFFF50H<<4=FFFFF500H
  - 目的操作数在eax
    - 内存单元080480F8H内容不变

06.D
- 指令执行分析
  - 初始状态
    - i=105 (eax)
    - j=100 (edx)
  - cmp指令比较
    - 100<105
    - 满足jle条件
  - 跳转地址计算
    - jle指令长2字节
    - 目标地址=84846H+2+0dH=804847bH

07.C
- 数组访问分析
  - double型元素占8字节
  - 数组a首地址为80498c0H
  - i存储在ecx
  - a[i]地址表示为[ecx*8+80498c0H]
  - 汇编指令：mov eax,[ecx*8+80498c0H]

08.C
- 子程序调用特性
  - 需保存程序断点至堆栈
  - 改变SP值
  - 改变PC值跳转到子程序

09.D
- if语句机器级代码特点
  - comp_A后接条件跳转指令
  - 条件成立跳转到statementB
  - statementB会跳转到if-else下一条
  - statementB与statementC顺序不固定

10.D
- 循环结构特点
  - 循环体末尾有条件转移指令
  - 可用CMP实现判断
  - 不一定包含无条件转移指令

11.D
- 过程调用返回机制
  - 需保存返回地址
    - 由调用指令计算并保存
    - 必须压栈而非用寄存器
  - 目标地址
    - 被调用过程第一条指令地址
    - 在调用指令中给出

12.C
- 过程调用参考
  - 详见4.3.4节

# 二、综合应用题  

01.【解答】
- CISC特征分析
  - M为CISC原因
    - 指令长短不一
    - 不符合RISC指令系统特点
  - fl机器代码长度计算
    - 首指令"pushebp"地址为 $0040\ 1020\mathrm{H}$
    - 末指令"ret"地址为 $0040107\mathrm{FH}$
    - 长度 = $0040107\mathrm{H} - 0040\ 1020\mathrm{H} + 1 = 60\mathrm{H} = 96\mathrm{B}$
  - CF标志分析
    - cmp指令比较i与n-1
    - 执行f1(0)时:
      - n = 0
      - i = $0000\ 0000\mathrm{H}$
      - n-1 = FFFFFFFFH
    - 补码运算:
      - $0000\ 0000\mathrm{H} + 0000000\mathrm{H} + 1 = 0000\ 0001\mathrm{H}$
      - $C_{\mathrm{out}} = 0$
      - $\mathrm{Sub} = 1$
      - $\mathrm{CF} = C_{\mathrm{out}} \oplus \mathrm{Sub} = 0 \oplus 1 = 1$
  - f2中shl指令分析
    - 不能用shl实现power*2
    - 原因:
      - power为float型
      - 包含阶码部分
      - 整体左移无法实现乘2功能
    - 浮点运算比整型复杂耗时长

02.【解答】
- 函数调用分析
  - f(10)调用次数
    - 需调用f1共10次
    - 通过第16行call指令递归调用
  - 指令功能分析
    - 第12行le指令
      - 条件转移指令
      - n≤1时跳转至 $0040\ 1035\mathrm{H}$
    - 第16行call指令: 函数调用
    - 第20行jmp指令: 无条件转移
    - 第30行ret指令: 子程序返回
  - 地址计算
    - call指令虚拟地址: $00401025\mathrm{H}$
    - 指令长度: 5字节
    - 下一指令地址: $0040\ 102\mathrm{AH}$
    - 目标地址计算:
      - 相对寻址: $\mathbf{\mu} = (\mathbf{PC}) +$ 偏移量
      - 目标地址: $0040~1000\mathrm{H}$
      - 偏移量 = $0040\ 1000\mathrm{H} - 0040\ 102\mathrm{AH} = \mathrm{FFF}\ \mathrm{FD6H}$
    - 小端方式确认
  - f(13)溢出分析
    - 结果 = 6227020800
    - 超出32位int范围
    - 解决方案:
      - 改用double/longlong/long double/float类型
  - 乘法溢出处理
    - 溢出条件: 高33位不全为0或1
    - 编译器处理:
      - imul后加溢出自陷指令
      - OF=1时调用异常处理程序

03.【解答】
- 内存管理分析
  - 页面特征
    - 大小: 4KB
    - 虚拟页号: 高20位
    - push和ret指令在同一页($00401\mathrm{H}$)
  - Cache组织
    - 64块,4路组相联
    - 16组,组号4位
    - 块大小64B,块内地址6位
    - 地址划分:
      - 低6位: 块内地址
      - 中间4位: 组号
      - 高22位: 标记
  - 地址转换
    - 页大小决定低12位相同
    - call指令地址 $0040\ 1025\mathrm{H}$
    - $025\mathrm{H} = 0000\ 0010\ 0101\mathrm{B}$
    - Cache组号为0

04.【解答】
- 指令地址分析
  - 第19条指令
    - 虚拟地址: $004010\mathrm{AEH}$
    - 长度: 11字节
    - 下一指令地址: $0040\ 10\mathrm{B9H}$
  - 转移指令分析
    - 第2条指令:
      - 地址: $00401079\mathrm{H}$
      - 长度: 2字节
      - PC+2 = $0040107\mathrm{AH}$
      - 目标地址: $00401084\mathrm{H}$
      - 偏移量: $09\mathrm{H}$
    - 采用相对寻址方式
  - 寻址方式分析
    - 第19条指令:
      - 源操作数: $0\mathrm{AH}$
      - 立即寻址
    - 数组访问:
      - 行大小: 64×4字节
      - 地址计算: $00422000\mathrm{h} + i × 256 + j × 4$
      - ecx存放 $i × 256$
  - 缺页异常分析
    - 第19条指令在页号 $00401\mathrm{H}$ 页面
    - 页面已在主存
    - 不会发生缺页异常



# 4.4.5 答案与解析  

# 一、单项选择题  

01.A
- RISC与流水线技术
  - RISC必然采用流水线技术,由指令特点决定
  - CISC无强制要求,但也常用流水线提高速度
  - 流水线技术不是RISC专利
- RISC与CISC兼容性比较
  - CISC可兼容多种高级语言和软件
  - RISC指令系统简单精简
    - 只包含基本指令
    - 需组合实现复杂功能
    - 增加编译器设计难度
    - 增加编程难度
  - CISC兼容性更好
- RISC特点
  - CPU配备多通用寄存器

02.B
- RISC特点分析
  - A、C、D均为RISC特点
  - B项错误
    - RISC特点:寻址方式种类减少
    - CISC特点:增强指令功能
    - RISC采用简单指令组合实现复杂功能

03.D
- 错误分析
  - A错误:RISC选择常用寄存器型指令非为兼容CISC
  - B错误:
    - RISC仅改变CPU结构
    - 不影响整机结构
    - 采用RISC的CPU架构不可能简单如早期
  - C错误:RISC通过简单指令组合实现复杂功能
- 正确观点:RISC主要目标是减少指令数

04.C
- CISC编译优化分析
  - 指令格式种类多
  - 增大编译优化复杂性
  - 不利于编译优化

05.A
- RISC相对CISC的特点
  - 指令条数少
  - 指令长度固定,格式和寻址种类少
  - 只有取数/存数指令访问存储器
  - CPU中通用寄存器多
  - 大部分指令一个时钟周期完成
  - 以硬布线逻辑为主,少用微程序控制
- 错误分析
  - B、C、D为RISC特点
  - A错误:RISC速度快,普遍用硬布线控制器

